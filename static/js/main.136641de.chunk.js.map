{"version":3,"sources":["components/RouteMap/index.module.css","App.module.scss","components/RouteMap/WorldSelect.module.scss","components/Sidebar/BottomSheet/utils/domFns.ts","components/Sidebar/BottomSheet/utils/positionFns.ts","components/Sidebar/BottomSheet/DraggableCore.tsx","components/Sidebar/BottomSheet/Draggable.tsx","data/index.ts","hooks/useLocationState.ts","hooks/useSettings.ts","services/search.ts","components/SettingsDialog/index.tsx","StravaSegmentRepository.ts","components/ElevationGradient/index.tsx","components/Sidebar/ElevationChart.tsx","components/Sidebar/Details/RouteDetails.tsx","assets/ZwiftInsider-40x40.jpg","assets/strava-40x40.png","assets/WhatsOnZwift-40x40.png","components/Sidebar/Details/WorldDetails.tsx","components/Sidebar/Details/index.tsx","components/ElevationChartPreview/index.tsx","components/Sidebar/SearchResultCardRoute.tsx","hooks/useOnScreen.ts","components/Sidebar/SearchResultCardWorld.tsx","components/Sidebar/SearchResultList.tsx","components/Sidebar/index.tsx","hooks/useWindowHeight.ts","hooks/useIsDesktop.ts","worldConfig.ts","maps/bologna.png","maps/crit-city.png","maps/france.png","maps/innsbruck.png","maps/london.png","maps/new-york.png","maps/paris.png","maps/richmond.png","maps/watopia.png","maps/yorkshire.png","components/RouteMap/WorldSelect.tsx","components/RouteMap/index.tsx","App.tsx","index.tsx","components/Sidebar/index.module.scss"],"names":["module","exports","getTouchIdentifier","e","targetTouches","identifier","changedTouches","getBoundPosition","bounds","y","newY","bottom","Math","min","top","max","getControlPosition","touchIdentifier","touchObj","i","length","getTouch","clientY","createCoreData","draggable","state","isStart","lastY","isNaN","node","props","nodeRef","current","deltaY","eventsFor","start","move","stop","DraggableCore","dragEventFor","dragging","NaN","undefined","mounted","handleDragStart","button","onStart","setState","addEvent","document","handleDrag","handleDragStop","coreEvent","onDrag","MouseEvent","onStop","thisNode","removeEvent","ownerDocument","onMouseDown","onMouseUp","onTouchStart","onTouchEnd","this","passive","React","only","children","el","event","handler","inputOptions","addEventListener","capture","removeEventListener","Draggable","onDragStart","coreData","newStateY","slackY","onDragStop","defaultPosition","disabled","draggableCoreProps","style","transform","willChange","routes","routesJSON","segments","segmentsJSON","worlds","worldsJSON","DEFAULT_WORLD","find","w","slug","listeners","useLocationState","useState","getLocationState","useEffect","listener","window","newState","push","splice","indexOf","useCallback","searchParams","URLSearchParams","set","world","route","history","pushState","toString","forEach","l","location","search","get","filter","r","LOCAL_STORAGE_KEY","loadSettings","rawSettings","localStorage","getItem","sport","JSON","parse","useSettings","settings","setSettings","newSettings","setItem","stringify","saveSettings","searchResults","sort","a","b","name","localeCompare","map","type","terms","t","toLocaleLowerCase","data","stravaSegmentId","searchResultTypes","title","segment","SettingsDialog","visible","onClose","handleSportChange","target","checked","value","Dialog","id","aria-labelledby","onRequestClose","DialogHeader","DialogTitle","DialogContent","Fieldset","legend","Radio","label","onChange","DialogFooter","Button","onClick","cache","getStravaSegmentStream","segmentSlug","stream","cacheKey","fetchStravaSegmentStream","getStravaSegmentStreams","streams","Promise","all","streamData","Object","fromEntries","fetch","response","json","ElevationGradient","x1","y1","x2","y2","offset","stopColor","stopOpacity","REQUIRED_STREAMS","ElevationChart","onMouseHoverDistanceChange","useAsync","result","useMemo","uniqWith","distance","index","round","elevation","altitude","width","height","ResponsiveContainer","AreaChart","margin","right","left","baseValue","CartesianGrid","vertical","XAxis","dataKey","allowDecimals","tick","unit","domain","hide","YAxis","tickCount","Tooltip","content","TooltipContent","onMouseDistance","isAnimationActive","position","cursor","stroke","Area","fillOpacity","fill","payload","RouteDetails","backButtonText","onBackButtonClick","List","SimpleListItem","themeType","TextIconSpacing","icon","ListFontIcon","Text","clickable","leftAddon","SpaceBarFontIcon","leftAddonType","leadInDistance","LandscapeFontIcon","leadInElevation","eventOnly","EventFontIcon","MapFontIcon","ListSubheader","zwiftInsiderUrl","ListItem","open","Avatar","color","src","alt","rightAddon","OpenInNewFontIcon","rightAddonType","stravaSegmentUrl","whatsOnZwiftUrl","WorldDetails","Details","locationState","ElevationChartPreview","filteredData","lowestElevation","d","CircularProgress","small","circleStyle","SearchResultCardRoute","secondaryText","getRouteInfo","ChartContainer","ref","useRef","onScreen","isIntersecting","setIntersecting","observer","IntersectionObserver","entry","observe","unobserve","useOnScreen","pointerEvents","SearchResultCardWorld","sports","includes","s","SearchResultList","onResultClick","searchResult","Divider","SearchResultCard","Sidebar","windowHeight","innerHeight","setHeight","handleResize","useWindowHeight","isDesktop","useMediaQuery","query","setLocationState","setQuery","containerRef","containerHeight","useResizeObserver","settingsDialogVisible","setSettingsDialogVisible","term","split","sr","every","some","srt","className","styles","Container","DragHandle","DragHandleFontIcon","SearchBox","TextField","placeholder","isRightAddon","rightChildren","buttonType","aria-label","FontIcon","NoGapDivider","Content","BottomMenu","SettingsFontIcon","worldConfigs","bologna","imageBounds","initialBounds","image","backgroundColor","france","innsbruck","london","paris","richmond","watopia","yorkshire","options","WorldSelect","Select","listboxStyle","zIndex","newWorldSlug","RouteMap","mouseHoverDistance","worldConfig","filteredSegments","stravaSegmentsInWorld","fs","stravaSegments","stravaData","setMap","zoomControl","setPosition","routeStravaSegment","latlng","reduce","coord","extend","LatLngBounds","invalidateSize","fitBounds","setMaxBounds","minZoom","getBoundsZoom","setMinZoom","pointCoordinates","pointIndex","findIndex","MapContainer","whenCreated","maxZoom","ImageOverlay","url","attribution","Pane","Polyline","positions","pathOptions","weight","LayersControl","Overlay","LayerGroup","Circle","center","radius","fillColor","App","setMouseHoverDistance","Wrapper","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.136641de.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"RouteMap_Container__1kS2N\",\"MapContainer\":\"RouteMap_MapContainer__1oyLk\",\"navigationControl\":\"RouteMap_navigationControl__2RyF3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Wrapper\":\"App_Wrapper__2vPXK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"WorldSelect_Container__3BQ6b\"};","export function getTouch(\n  e: TouchEvent,\n  identifier: number\n): { clientX: number; clientY: number } | undefined {\n  if (e.targetTouches) {\n    for (let i = 0; i < e.targetTouches.length; ++i) {\n      if (e.targetTouches[i].identifier === identifier) {\n        return e.targetTouches[i];\n      }\n    }\n  }\n\n  if (e.changedTouches) {\n    for (let i = 0; i < e.changedTouches.length; ++i) {\n      if (e.changedTouches[i].identifier === identifier) {\n        return e.changedTouches[i];\n      }\n    }\n  }\n}\n\nexport function getTouchIdentifier(e: TouchEvent): number | undefined {\n  if (e.targetTouches && e.targetTouches[0]) {\n    return e.targetTouches[0].identifier;\n  }\n  if (e.changedTouches && e.changedTouches[0]) {\n    return e.changedTouches[0].identifier;\n  }\n}\n","import type DraggableCore from \"../DraggableCore\";\nimport { getTouch } from \"./domFns\";\nimport type { Bounds, DraggableData, MouseTouchEvent } from \"./types\";\n\nexport function getBoundPosition(bounds: Bounds, y: number): number {\n  let newY = y;\n  if (typeof bounds.bottom === \"number\") {\n    newY = Math.min(newY, bounds.bottom);\n  }\n  if (typeof bounds.top === \"number\") {\n    newY = Math.max(newY, bounds.top);\n  }\n\n  return newY;\n}\n\nexport function getControlPosition(\n  e: MouseTouchEvent,\n  touchIdentifier: number | undefined\n): number | undefined {\n  const touchObj =\n    typeof touchIdentifier === \"number\" ? getTouch(e, touchIdentifier) : null;\n\n  if (typeof touchIdentifier === \"number\" && !touchObj) {\n    return undefined;\n  }\n\n  return (touchObj || e).clientY;\n}\n\nexport function createCoreData(\n  draggable: DraggableCore,\n  y: number\n): DraggableData {\n  const state = draggable.state;\n  const isStart =\n    typeof state.lastY !== \"number\" || isNaN(state.lastY);\n  const node = draggable.props.nodeRef.current!;\n\n  if (isStart) {\n    return {\n      node,\n      deltaY: 0,\n      lastY: y,\n      y,\n    };\n  } else {\n    return {\n      node,\n      deltaY: y - state.lastY,\n      lastY: state.lastY,\n      y,\n    };\n  }\n}\n\n","import * as React from \"react\";\nimport { ReactElement } from \"react\";\nimport { getTouchIdentifier } from \"./utils/domFns\";\nimport { createCoreData, getControlPosition } from \"./utils/positionFns\";\nimport type { Bounds, EventHandler, MouseTouchEvent } from \"./utils/types\";\n\nconst eventsFor = {\n  touch: {\n    start: \"touchstart\",\n    move: \"touchmove\",\n    stop: \"touchend\",\n  },\n  mouse: {\n    start: \"mousedown\",\n    move: \"mousemove\",\n    stop: \"mouseup\",\n  },\n};\n\ninterface State {\n  dragging: boolean;\n  lastY: number;\n  touchIdentifier: number | undefined;\n}\n\nexport type DraggableData = {\n  node: HTMLElement;\n  y: number;\n  deltaY: number;\n  lastY: number;\n};\n\ninterface Props {\n  onStart: () => void;\n  onDrag: (data: DraggableData) => void | false;\n  onStop: () => void | false;\n  bounds: Bounds;\n  children: ReactElement<any>;\n  nodeRef: React.MutableRefObject<HTMLDivElement | null>;\n}\n\nexport default class DraggableCore extends React.Component<Props, State> {\n  dragEventFor = eventsFor.mouse;\n\n  state: State = {\n    dragging: false,\n    lastY: NaN,\n    touchIdentifier: undefined,\n  };\n\n  mounted: boolean = false;\n\n  componentDidMount() {\n    this.mounted = true;\n\n    if (this.props.nodeRef.current) {\n      addEvent(\n        this.props.nodeRef.current,\n        eventsFor.touch.start,\n        this.onTouchStart,\n        {\n          passive: false,\n        }\n      );\n    }\n  }\n\n  componentWillUnmount() {\n    this.mounted = false;\n\n    if (this.props.nodeRef.current) {\n      const { ownerDocument } = this.props.nodeRef.current;\n      removeEvent(ownerDocument, eventsFor.mouse.move, this.handleDrag);\n      removeEvent(ownerDocument, eventsFor.touch.move, this.handleDrag);\n      removeEvent(ownerDocument, eventsFor.mouse.stop, this.handleDragStop);\n      removeEvent(ownerDocument, eventsFor.touch.stop, this.handleDragStop);\n      removeEvent(this.props.nodeRef.current, eventsFor.touch.start, this.onTouchStart, {\n        passive: false,\n      });\n    }\n  }\n\n  handleDragStart: EventHandler<MouseTouchEvent> = (e) => {\n    if (typeof e.button === \"number\" && e.button !== 0) {\n      return false;\n    }\n\n    this.props.onStart();\n\n    const touchIdentifier = getTouchIdentifier(e);\n    this.setState({\n      touchIdentifier,\n      dragging: true,\n      lastY: getControlPosition(e, touchIdentifier)!,\n    });\n\n    addEvent(document, this.dragEventFor.move, this.handleDrag);\n    addEvent(document, this.dragEventFor.stop, this.handleDragStop);\n  };\n\n  handleDrag: EventHandler<MouseTouchEvent> = (e) => {\n    const y = getControlPosition(e, this.state.touchIdentifier);\n    if (y == null) {\n      return;\n    }\n\n    const coreEvent = createCoreData(this, y);\n\n    const shouldUpdate = this.props.onDrag(coreEvent);\n    if (shouldUpdate === false || this.mounted === false) {\n      // @ts-ignore\n      this.handleDragStop(new MouseEvent(\"mouseup\"));\n    } else {\n      this.setState({\n        lastY: y,\n      });\n    }\n  };\n\n  handleDragStop: EventHandler<MouseTouchEvent> = (e) => {\n    if (!this.state.dragging) {\n      return;\n    }\n\n    const y = getControlPosition(e, this.state.touchIdentifier!);\n    if (y === null) {\n      return;\n    }\n\n    const shouldContinue = this.props.onStop();\n    if (shouldContinue === false || this.mounted === false) {\n      return false;\n    }\n\n    this.setState({\n      dragging: false,\n      lastY: NaN,\n    });\n\n    const thisNode = this.props.nodeRef.current;\n    if (thisNode) {\n      removeEvent(\n        thisNode.ownerDocument,\n        this.dragEventFor.move,\n        this.handleDrag\n      );\n      removeEvent(\n        thisNode.ownerDocument,\n        this.dragEventFor.stop,\n        this.handleDragStop\n      );\n    }\n  };\n\n  onMouseDown: EventHandler<MouseTouchEvent> = (e) => {\n    this.dragEventFor = eventsFor.mouse;\n    return this.handleDragStart(e);\n  };\n\n  onMouseUp: EventHandler<MouseTouchEvent> = (e) => {\n    this.dragEventFor = eventsFor.mouse;\n    return this.handleDragStop(e);\n  };\n\n  onTouchStart: EventHandler<MouseTouchEvent> = (e) => {\n    this.dragEventFor = eventsFor.touch;\n    return this.handleDragStart(e);\n  };\n\n  onTouchEnd: EventHandler<MouseTouchEvent> = (e) => {\n    this.dragEventFor = eventsFor.touch;\n    return this.handleDragStop(e);\n  };\n\n  render(): ReactElement<any> {\n    return React.cloneElement(React.Children.only(this.props.children), {\n      onMouseDown: this.onMouseDown,\n      onMouseUp: this.onMouseUp,\n      onTouchEnd: this.onTouchEnd,\n    });\n  }\n}\n\nfunction addEvent(\n  el: Node,\n  event: string,\n  handler: any,\n  inputOptions: AddEventListenerOptions = {}\n): void {\n  el.addEventListener(event, handler, { capture: true, ...inputOptions });\n}\n\nfunction removeEvent(\n  el: Node,\n  event: string,\n  handler: any,\n  inputOptions: AddEventListenerOptions = {}\n): void {\n  el.removeEventListener(event, handler, { capture: true, ...inputOptions });\n}\n","import * as React from \"react\";\nimport { MutableRefObject, ReactElement } from \"react\";\nimport DraggableCore from \"./DraggableCore\";\nimport { getBoundPosition } from \"./utils/positionFns\";\nimport type { Bounds, DraggableData } from \"./utils/types\";\n\ninterface State {\n  dragging: boolean;\n  y: number;\n  slackY: number;\n}\n\ninterface Props {\n  defaultPosition: number;\n  disabled?: boolean;\n  bounds: Bounds;\n  children: ReactElement;\n  nodeRef: MutableRefObject<HTMLDivElement | null>;\n}\n\nexport default class Draggable extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n\n    this.state = {\n      dragging: false,\n      y: props.defaultPosition,\n      slackY: 0,\n    };\n  }\n\n  componentWillUnmount() {\n    this.setState({ dragging: false });\n  }\n\n  static getDerivedStateFromProps(\n    props: Props,\n    state: State\n  ): Partial<State> | null {\n    const y = getBoundPosition(props.bounds, state.y);\n    if (y !== state.y) {\n      return {\n        y,\n        slackY: 0,\n      };\n    } else {\n      return null;\n    }\n  }\n\n  onDragStart = () => {\n    this.setState({ dragging: true });\n  };\n\n  onDrag = (coreData: DraggableData): false | void => {\n    if (!this.state.dragging) {\n      return false;\n    }\n\n    const y = this.state.y + coreData.deltaY;\n    const newStateY = getBoundPosition(\n      this.props.bounds,\n      y + this.state.slackY\n    );\n\n    this.setState({\n      y: newStateY,\n      slackY: this.state.slackY + (y - newStateY),\n    });\n  };\n\n  onDragStop = () => {\n    if (!this.state.dragging) {\n      return false;\n    }\n\n    this.setState({ dragging: false, slackY: 0 });\n  };\n\n  render() {\n    const {\n      children,\n      defaultPosition,\n      disabled,\n      ...draggableCoreProps\n    } = this.props;\n\n    if (disabled) {\n      return children;\n    } else {\n      return (\n        <DraggableCore\n          {...draggableCoreProps}\n          onStart={this.onDragStart}\n          onDrag={this.onDrag}\n          onStop={this.onDragStop}\n        >\n          {React.cloneElement(React.Children.only(children), {\n            style: {\n              ...children.props.style,\n              transform: `translate(0, ${this.state.y}px)`,\n              willChange: \"transform\",\n            },\n          })}\n        </DraggableCore>\n      );\n    }\n  }\n}\n","import { Route, Segment, World } from \"../types\";\nimport routesJSON from \"./routes.json\";\nimport segmentsJSON from \"./segments.json\";\nimport worldsJSON from \"./worlds.json\";\n\nexport const routes: ReadonlyArray<Route> = routesJSON as any;\nexport const segments: ReadonlyArray<Segment> = segmentsJSON as any;\nexport const worlds: ReadonlyArray<World> = worldsJSON as any;\n","import { useCallback, useEffect, useState } from \"react\";\nimport { routes, worlds } from \"../data\";\nimport { LocationState } from \"../types\";\n\nconst DEFAULT_WORLD = worlds.find((w) => w.slug === \"watopia\")!;\n\ntype Listener = (state: LocationState) => void;\nconst listeners: Listener[] = [];\n\nexport function useLocationState(): [\n  LocationState,\n  (s: LocationState) => void\n] {\n  const [state, setState] = useState(getLocationState);\n\n  useEffect(() => {\n    const listener = () => setState(getLocationState());\n    window.addEventListener(\"popstate\", listener);\n    return () => window.removeEventListener(\"popstate\", listener);\n  }, []);\n\n  useEffect(() => {\n    const listener: Listener = (newState) => setState(newState);\n    listeners.push(listener);\n\n    return () => {\n      listeners.splice(listeners.indexOf(listener), 1);\n    };\n  }, []);\n\n  const updateLocationState = useCallback((newState: LocationState) => {\n    const searchParams = new URLSearchParams();\n    searchParams.set(\"world\", newState.world.slug);\n    if (newState.route) {\n      searchParams.set(\"route\", newState.route.slug);\n    }\n\n    window.history.pushState(undefined, \"\", `?${searchParams.toString()}`);\n    setState(newState);\n    listeners.forEach((l) => l(newState));\n  }, []);\n\n  return [state, updateLocationState];\n}\n\n\nfunction getLocationState(): LocationState {\n  const searchParams = new URLSearchParams(window.location.search);\n\n  const world =\n    worlds.find((w) => w.slug === searchParams.get(\"world\")) ?? DEFAULT_WORLD;\n\n  const route = routes\n    .filter((r) => r.world === world?.slug)\n    .find((r) => r.slug === searchParams.get(\"route\"));\n\n  return { world, route };\n}\n","import { useCallback, useEffect, useState } from \"react\";\nimport { Settings } from \"../types\";\n\nconst LOCAL_STORAGE_KEY = \"settings\";\n\ntype Listener = (settings: Settings) => void;\nconst listeners: Listener[] = [];\n\nfunction loadSettings(): Settings {\n  try {\n    const rawSettings = localStorage.getItem(LOCAL_STORAGE_KEY) ?? \"{}\";\n    const settings: Partial<Settings> = JSON.parse(rawSettings);\n\n    return {\n      sport: settings.sport ?? \"cycling\",\n    };\n  } catch {\n    return {\n      sport: \"cycling\",\n    };\n  }\n}\n\nfunction saveSettings(settings: Settings) {\n  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(settings));\n}\n\nexport function useSettings(): [Settings, (settings: Settings) => void] {\n  const [settings, setSettings] = useState(loadSettings);\n\n  useEffect(() => {\n    const listener: Listener = (newSettings) => setSettings(newSettings);\n    listeners.push(listener);\n\n    return () => {\n      listeners.splice(listeners.indexOf(listener), 1);\n    };\n  }, [settings]);\n\n  const updateSettings = useCallback((newSettings: Settings) => {\n    setSettings(newSettings);\n    saveSettings(newSettings);\n    listeners.forEach((listener) => listener(newSettings));\n  }, []);\n\n  return [settings, updateSettings];\n}\n","import { routes, worlds } from \"../data\";\nimport { Route, Segment, Sport, World } from \"../types\";\n\nexport type SearchResult =\n  | SearchResultWorld\n  | SearchResultRoute\n  | SearchResultSegment;\n\nexport interface SearchResultWorld {\n  type: \"world\";\n  terms: string[];\n  data: World;\n}\n\nexport interface SearchResultRoute {\n  type: \"route\";\n  terms: string[];\n  data: Route;\n}\n\nexport interface SearchResultSegment {\n  type: \"segment\";\n  terms: string[];\n  data: Segment;\n}\n\nconst searchResults: SearchResult[] = [\n  ...[...worlds]\n    .sort((a, b) => a.name.localeCompare(b.name))\n    .map((world) => ({\n      type: \"world\" as const,\n      terms: [world.name].map((t) => t.toLocaleLowerCase()),\n      data: world,\n    })),\n  ...[...routes]\n    .sort((a, b) => a.name.localeCompare(b.name))\n    .filter((route) => route.stravaSegmentId !== undefined)\n    .map((route) => ({\n      type: \"route\" as const,\n      terms: [\n        worlds.find((w) => w.slug === route.world)!.name,\n        route.name,\n      ].map((t) => t.toLocaleLowerCase()),\n      data: route,\n    })),\n  //   ...segments\n  //     .filter((route) => route.stravaSegmentId !== undefined)\n  //     .map((segment) => ({\n  //     type: \"segment\" as const,\n  //     terms: [\n  //       worlds.find((w) => w.slug === segment.slug)!.name,\n  //       segment.name,\n  //     ].map((t) => t.toLocaleLowerCase()),\n  //     data: segment,\n  //   })),\n];\n\nexport function search(term: string, sport: Sport): SearchResult[] {\n  const terms = term\n    .toLocaleLowerCase()\n    .split(\" \")\n    .filter((t) => t.length > 0);\n\n  return searchResults\n    .filter((sr) => {\n      if (sr.type === \"world\") {\n        return true;\n      } else {\n        return sr.data.sports.includes(sport);\n      }\n    })\n\n    .filter((sr) =>\n      terms.every((t) => sr.terms.some((srt) => srt.includes(t)))\n    );\n}\n\nexport const searchResultTypes = {\n  world: {\n    title: \"Worlds\",\n  },\n  route: {\n    title: \"Routes\",\n  },\n  segment: {\n    title: \"Segments\",\n  },\n};\n","import { Button } from \"@react-md/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@react-md/dialog\";\nimport { Fieldset, Radio } from \"@react-md/form\";\nimport React, { ChangeEvent } from \"react\";\nimport { useSettings } from \"../../hooks/useSettings\";\nimport { Sport } from \"../../types\";\n\ninterface Props {\n  visible: boolean;\n  onClose: () => void;\n}\n\nexport function SettingsDialog({ visible, onClose }: Props) {\n  const [settings, setSettings] = useSettings();\n\n  const handleSportChange = (e: ChangeEvent<HTMLInputElement>) => {\n    if (e.target.checked) {\n      setSettings({ ...settings, sport: e.target.value as Sport });\n    }\n  };\n  return (\n    <Dialog\n      id=\"settings-dialog\"\n      aria-labelledby=\"settings-dialog-title\"\n      visible={visible}\n      onRequestClose={onClose}\n    >\n      <DialogHeader>\n        <DialogTitle id=\"settings-dialog-title\">Settings</DialogTitle>\n      </DialogHeader>\n      <DialogContent>\n        <Fieldset legend=\"Sport\">\n          <Radio\n            id=\"settings-dialog-cycling\"\n            name=\"settings-dialog-sport\"\n            label=\"Cycling\"\n            value=\"cycling\"\n            checked={settings.sport === \"cycling\"}\n            onChange={handleSportChange}\n          />\n          <Radio\n            id=\"settings-dialog-running\"\n            name=\"settings-dialog-sport\"\n            label=\"Running\"\n            value=\"running\"\n            checked={settings.sport === \"running\"}\n            onChange={handleSportChange}\n          />\n        </Fieldset>\n      </DialogContent>\n      <DialogFooter>\n        <Button id=\"dialog-close\" onClick={onClose}>\n          Close\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import { StravaSegment } from \"./types\";\n\nconst cache: { [cacheKey: string]: Promise<any> } = {};\n\nexport async function getStravaSegment(\n  segmentSlug: string\n): Promise<StravaSegment> {\n  if (!cache[segmentSlug]) {\n    cache[segmentSlug] = fetchStravaSegment(segmentSlug);\n  }\n\n  return await cache[segmentSlug];\n}\n\nexport async function getStravaSegmentStream<\n  Stream extends \"altitude\" | \"distance\" | \"latlng\"\n>(segmentSlug: string, stream: Stream): Promise<StravaSegment[Stream]> {\n  const cacheKey = `${segmentSlug}-${stream}`;\n  if (!cache[cacheKey]) {\n    cache[cacheKey] = fetchStravaSegmentStream(segmentSlug, stream);\n  }\n\n  return cache[cacheKey];\n}\n\nexport async function getStravaSegmentStreams<\n  Stream extends \"altitude\" | \"distance\" | \"latlng\"\n>(\n  segmentSlug: string,\n  streams: ReadonlyArray<Stream>\n): Promise<Pick<StravaSegment, Stream>> {\n  const streamData = await Promise.all(\n    streams.map((stream) => getStravaSegmentStream(segmentSlug, stream))\n  );\n\n  // @ts-ignore\n  return Object.fromEntries(\n    streams.map((stream, i) => [stream, streamData[i]])\n  );\n}\n\nasync function fetchStravaSegment(segmentSlug: string) {\n  const response = await Promise.all([\n    getStravaSegmentStream(segmentSlug, \"altitude\"),\n    getStravaSegmentStream(segmentSlug, \"distance\"),\n    getStravaSegmentStream(segmentSlug, \"latlng\"),\n  ]);\n\n  return {\n    altitude: response[0],\n    distance: response[1],\n    latlng: response[2],\n  };\n}\n\nasync function fetchStravaSegmentStream<\n  Stream extends \"altitude\" | \"distance\" | \"latlng\"\n>(segmentSlug: string, stream: Stream): Promise<StravaSegment[Stream]> {\n  const response = await fetch(`segments/${segmentSlug}/${stream}.json`);\n  return await response.json();\n}\n","export function ElevationGradient() {\n  return (\n    <linearGradient id=\"colorElevation\"  x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n      <stop offset=\"5%\" stopColor=\"black\" stopOpacity={0.8} />\n      <stop offset=\"95%\" stopColor=\"black\" stopOpacity={0} />\n    </linearGradient>\n  );\n}\n","import uniqWith from \"lodash/uniqWith\";\nimport React, { useEffect, useMemo } from \"react\";\nimport { useAsync } from \"react-async-hook\";\nimport {\n  Area,\n  AreaChart,\n  CartesianGrid,\n  ResponsiveContainer,\n  Tooltip,\n  TooltipProps,\n  XAxis,\n  YAxis,\n} from \"recharts\";\nimport { getStravaSegmentStreams } from \"../../StravaSegmentRepository\";\nimport { Route, StravaSegment } from \"../../types\";\nimport { ElevationGradient } from \"../ElevationGradient\";\n\ninterface Props {\n  route: Route;\n  onMouseHoverDistanceChange: (distance: number | undefined) => void;\n}\n\nconst REQUIRED_STREAMS = [\"altitude\", \"distance\"] as const;\n\nexport function ElevationChart({ route, onMouseHoverDistanceChange }: Props) {\n  const { result: segment } = useAsync<\n    Pick<StravaSegment, \"altitude\" | \"distance\">\n  >(getStravaSegmentStreams, [route.slug, REQUIRED_STREAMS]);\n\n  const data: any[] | undefined = useMemo(() => {\n    if (segment === undefined) {\n      return;\n    }\n\n    return uniqWith(\n      segment.distance.map((distance, index) => ({\n        distance: Math.round(distance / 10) / 100,\n        elevation: segment.altitude[index],\n      })),\n      (a, b) => a.distance === b.distance\n    );\n  }, [segment]);\n\n  if (data === undefined) {\n    return null;\n  }\n\n  return (\n    <div style={{ width: \"100%\", height: 100 }}>\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\n        <AreaChart\n          data={data}\n          margin={{\n            top: 25,\n            right: 15,\n            left: 15,\n            bottom: 15,\n          }}\n          // @ts-ignore\n          baseValue=\"dataMin\"\n        >\n          <defs>\n            <ElevationGradient />\n          </defs>\n          <CartesianGrid vertical={false} />\n          <XAxis\n            name=\"Distance\"\n            dataKey=\"distance\"\n            type=\"number\"\n            allowDecimals={false}\n            tick={false}\n            unit=\"km\"\n            domain={[0, \"dataMax\"]}\n            hide={true}\n          />\n          <YAxis\n            name=\"Elevation\"\n            type=\"number\"\n            allowDecimals={false}\n            tickCount={5}\n            domain={[\"dataMin\", \"auto\"]}\n            unit=\"m\"\n            hide={true}\n          />\n          <Tooltip\n            content={(props) => (\n              <TooltipContent\n                {...props}\n                onMouseDistance={onMouseHoverDistanceChange}\n              />\n            )}\n            isAnimationActive={false}\n            position={{ y: 10 }}\n            cursor={{ stroke: \"black\" }}\n          />\n          <Area\n            type=\"monotone\"\n            dataKey=\"elevation\"\n            name=\"Elevation\"\n            stroke=\"black\"\n            fillOpacity={1}\n            fill=\"url(#colorElevation)\"\n            unit=\"m\"\n            isAnimationActive={false}\n          />\n        </AreaChart>\n      </ResponsiveContainer>\n    </div>\n  );\n}\n\ninterface TooltipContentProps extends TooltipProps<any, any> {\n  onMouseDistance: (distance: number | undefined) => void;\n}\n\nfunction TooltipContent(props: TooltipContentProps) {\n  useEffect(() => {\n    if (props.payload === undefined || props.payload.length === 0) {\n      props.onMouseDistance(undefined);\n    } else {\n      props.onMouseDistance(props.label * 1_000);\n    }\n  }, [props]);\n\n  return null;\n}\n","import { Avatar } from \"@react-md/avatar\";\nimport { Button } from \"@react-md/button\";\nimport { TextIconSpacing } from \"@react-md/icon\";\nimport { List, ListItem, ListSubheader, SimpleListItem } from \"@react-md/list\";\nimport {\n  EventFontIcon,\n  LandscapeFontIcon,\n  ListFontIcon,\n  MapFontIcon,\n  OpenInNewFontIcon,\n  SpaceBarFontIcon,\n} from \"@react-md/material-icons\";\nimport { Text } from \"@react-md/typography\";\nimport round from \"lodash/round\";\nimport React from \"react\";\nimport stravaLogo from \"../../../assets/strava-40x40.png\";\nimport zwiftInsiderLogo from \"../../../assets/ZwiftInsider-40x40.jpg\";\nimport whatsOnZwiftLogo from \"../../../assets/WhatsOnZwift-40x40.png\";\nimport { worlds } from \"../../../data\";\nimport { Route } from \"../../../types\";\nimport { ElevationChart } from \"../ElevationChart\";\n\ninterface Props {\n  route: Route;\n  onMouseHoverDistanceChange: (distance: number | undefined) => void;\n  backButtonText: string;\n  onBackButtonClick: () => void;\n}\n\nexport function RouteDetails({\n  route,\n  onMouseHoverDistanceChange,\n  backButtonText,\n  onBackButtonClick,\n}: Props) {\n  const world = worlds.find((w) => w.slug === route.world)!;\n\n  return (\n    <List>\n      <SimpleListItem>\n        <Button themeType=\"outline\" onClick={onBackButtonClick}>\n          <TextIconSpacing icon={<ListFontIcon />}>\n            {backButtonText}\n          </TextIconSpacing>\n        </Button>\n      </SimpleListItem>\n      <SimpleListItem>\n        <Text type=\"headline-6\" style={{ margin: 0 }}>\n          {route.name}\n        </Text>\n      </SimpleListItem>\n\n      <SimpleListItem\n        clickable={false}\n        leftAddon={<SpaceBarFontIcon />}\n        leftAddonType=\"icon\"\n      >\n        {round(route.distance, 1)}km\n        {route.leadInDistance !== undefined && (\n          <>\n            &nbsp;\n            <small>(+{round(route.leadInDistance, 1)}km)</small>\n          </>\n        )}\n      </SimpleListItem>\n\n      <SimpleListItem\n        clickable={false}\n        leftAddon={<LandscapeFontIcon />}\n        leftAddonType=\"icon\"\n      >\n        {round(route.elevation)}m\n        {route.leadInElevation !== undefined && (\n          <>\n            &nbsp;\n            <small>(+{round(route.leadInElevation)}m)</small>\n          </>\n        )}\n      </SimpleListItem>\n\n      {route.eventOnly && (\n        <SimpleListItem\n          clickable={false}\n          leftAddon={<EventFontIcon />}\n          leftAddonType=\"icon\"\n        >\n          Event only route\n        </SimpleListItem>\n      )}\n\n      <SimpleListItem clickable={false} leftAddon={<MapFontIcon />}>\n        {world.name}\n      </SimpleListItem>\n\n      <SimpleListItem>\n        <ElevationChart\n          route={route}\n          onMouseHoverDistanceChange={onMouseHoverDistanceChange}\n        />\n      </SimpleListItem>\n\n      <ListSubheader>Events</ListSubheader>\n      <SimpleListItem>\n        <Text type=\"body-2\">Upcoming events will show up here... soon</Text>\n      </SimpleListItem>\n\n      <ListSubheader>Links</ListSubheader>\n      {route.zwiftInsiderUrl && (\n        <ListItem\n          onClick={() => window.open(route.zwiftInsiderUrl, \"_blank\")}\n          leftAddon={\n            <Avatar color=\"#fc6719\">\n              <img src={zwiftInsiderLogo} alt=\"\" />\n            </Avatar>\n          }\n          leftAddonType=\"avatar\"\n          rightAddon={<OpenInNewFontIcon />}\n          rightAddonType=\"icon\"\n        >\n          ZwiftInsider\n        </ListItem>\n      )}\n      {route.stravaSegmentUrl && (\n        <ListItem\n          onClick={() => window.open(route.stravaSegmentUrl, \"_blank\")}\n          leftAddon={\n            <Avatar color=\"#ff6b00\">\n              <img src={stravaLogo} alt=\"\" />\n            </Avatar>\n          }\n          leftAddonType=\"avatar\"\n          rightAddon={<OpenInNewFontIcon />}\n          rightAddonType=\"icon\"\n        >\n          Strava Segment\n        </ListItem>\n      )}\n      {route.whatsOnZwiftUrl && (\n        <ListItem\n          onClick={() => window.open(route.whatsOnZwiftUrl, \"_blank\")}\n          leftAddon={\n            <Avatar color=\"#000000\">\n              <img src={whatsOnZwiftLogo} alt=\"\" />\n            </Avatar>\n          }\n          leftAddonType=\"avatar\"\n          rightAddon={<OpenInNewFontIcon />}\n          rightAddonType=\"icon\"\n        >\n          What's on Zwift\n        </ListItem>\n      )}\n    </List>\n  );\n}\n","export default \"data:image/jpeg;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACXlBMVEX/awD/agD/aQD/aAD/ZwD/ZQD/ZAD/YgD/YQD/YAD/XwD/XQD/XAD/WgD/WQD/VwD/VgD/VAD/UwD/UQD/WwD/UgD/UAD/XgD/gjj/eCr/TwD/TgD/Zgv/z7T/vJb/XgL/j07/+vf/8Oj/fTT/z7P/////vJj/XAP/TQD/TAD/kVD/+fb/8en/fTf/ZQz/0bb/vZr/WgT/kFD/8uv/fjr/VQD/waD/WQX/SwD/klP/9O3/fz3/ZQ7/0rn/w6T/WAb/SgD/klb//f3//v3/9O//gEL/0rr/y7H/1L//xan/Vgj/SQD/fj3/ilD/9vH/gEX/ZA//07z/WAX/Wwv/zbX/x63/Vgn/WAD/k1r/+/n/f0D/iE//+PX/9/P/gkr/ZBD/1b7/waL/WQr/yrD/ya//VQr/lFr/8+3/fT7/hEn/hE3/ZBH/1L3/vp7/VwX/UgH/Vwn/xqr//fz/yrH/VQz/TAH/SwH/ZBP/kVj/lV7/k17/kl3/bCP/Yxj/jlf/kFr/j1r/nGz/kF//i1j/iVb/iFT/jln/jVn/jVr/h1H/Vg//Wgv/nm7/tpH/tZD/rYX/aCT/SAD/dDb/sIr/so7/s4//j13/TQT/dTT/sYv/sYz/sY3/k2D/UAX/Vg3/nXD/sIz/qoL/ZSP/Vgr/mmr/sIv/rIX/ayj/dzv/jFj/TAP/cS//rof/kl//WxP/qoH/ZCL/Ugj/l2b/q4T/lGH/roj/by//qYD/YyD/Ugf/lmX/ilT/SwL/bCv/qH//YR3/TwX/iVP/aSj/TQX/kV//aSn/pHn/YR7/Tgf/ayv0qRl1AAAAAWJLR0QlwwHJDwAAAAd0SU1FB+UECw4ZCUCePeYAAAJ3SURBVDjLjdTnX9NAGMDxsypim66kabXFgXraiFvRqijR4jz3qgPce6EoOHDj3hFxEEcdVxXBvTdu/yvvujIuH/FetHnx/fyaNs9TAOhpZbPZWrchp21OTrvc3PZ2u8Ph4JxOl9vt9ni9Xl4Q/uF8WecVU7ClHnUC6+yWzs+4QIeOHOuCIaaX16lzFwsXAqb7c3TN79bd6TN9bigJ9S6Q1wPCnr2YXlgCxu/L9S6AsE9ft6kXliRgcIF+/SE5AwaaewQafj/foAIKBw8pNPVSUPudU0EIhw4z9aQI0Dvf8PwUHDFSNPYiBGqOKxoF02d0MW/oRWSge76+MTQ4NkpeSsYFDT1ZBprjisbT2ISJ9HXSZENPRkCbF2cyWDJlKv3m06YH9T2EgDZXM2Ym727W7Dn0fe48g0Mg62LzF9DgQlFcVEouyhZLekdgZk6XLKWhZcVefvkKerVyld4hkJn72GoaXLNW5MXgujJyWbpeJizjEEj3XBs2wmgUbtrMl5cLW7bCigq4bbtUWVmVdgSm5j62Y+eu3dXVe0Rh7779Bw4eqjl8pOboseMnTqIMzOyHp5A+C1H0nzp95uy58wpSLtRerLt0WQdNc++/crVevXY9cuOmGr91W9Egsx937qo4cQ/dr8XqgwaUhRyzH+GHjVhtekSCj58oGmT3Lfz0mYqfv3hpCBLoYvYj8qoR4ziOv36j6CC7b5L09p2KMVbff0A6yO6bJMkfExjXf/qsGKGH2Q/5S5OK1eYqZIBMjzxf9DVhCiLA9ugcfPte16y/QwItemQOlB8/fykMZHrk/P7TgMyQ7VkdwFv1rKDwfy4J6f9kSw79BReDIgKN7zeEAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIxLTA0LTExVDE0OjI0OjUyKzAwOjAwCFzYFAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMS0wNC0xMVQxNDoyNDozMiswMDowML9uaS8AAAAASUVORK5CYII=\"","export default \"data:image/png;base64,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\"","import { World } from \"../../../types\";\n\ninterface Props {\n  world: World;\n}\n\nexport function WorldDetails({ world }: Props) {\n    return null;\n}\n","import React from \"react\";\nimport { useLocationState } from \"../../../hooks/useLocationState\";\nimport { RouteDetails } from \"./RouteDetails\";\nimport { WorldDetails } from \"./WorldDetails\";\n\ninterface Props {\n  onMouseHoverDistanceChange: (distance: number | undefined) => void;\n  backButtonText: string;\n  onBackButtonClick: () => void;\n}\n\nexport function Details({\n  onMouseHoverDistanceChange,\n  backButtonText,\n  onBackButtonClick,\n}: Props) {\n  const [locationState] = useLocationState();\n\n  if (locationState.route) {\n    return (\n      <RouteDetails\n        route={locationState.route}\n        onMouseHoverDistanceChange={onMouseHoverDistanceChange}\n        backButtonText={backButtonText}\n        onBackButtonClick={onBackButtonClick}\n      />\n    );\n  } else {\n    return <WorldDetails world={locationState.world} />;\n  }\n}\n","import { CircularProgress } from \"@react-md/progress\";\nimport uniqWith from \"lodash/uniqWith\";\nimport React, { useMemo } from \"react\";\nimport { useAsync } from \"react-async-hook\";\nimport { Area, AreaChart, XAxis, YAxis } from \"recharts\";\nimport { getStravaSegmentStreams } from \"../../StravaSegmentRepository\";\nimport { Route, StravaSegment } from \"../../types\";\nimport { ElevationGradient } from \"../ElevationGradient\";\n\ninterface Props {\n  route: Route;\n}\n\nconst REQUIRED_STREAMS = [\"altitude\", \"distance\"];\n\nexport function ElevationChartPreview({ route }: Props) {\n  const { result: segment } = useAsync<\n    Pick<StravaSegment, \"altitude\" | \"distance\">\n  >(getStravaSegmentStreams, [route.slug, REQUIRED_STREAMS]);\n\n  const data: any[] | undefined = useMemo(() => {\n    if (segment === undefined) {\n      return;\n    }\n\n    const filteredData = uniqWith(\n      segment.distance.map((distance, index) => ({\n        distance: Math.round(distance / 100) / 10,\n        elevation: segment.altitude[index],\n      })),\n      (a, b) => a.distance === b.distance\n    );\n\n    // remove negative elevation\n    const lowestElevation = Math.min(...filteredData.map((d) => d.elevation));\n    return filteredData.map((d) => ({\n      ...d,\n      elevation: d.elevation - lowestElevation,\n    }));\n  }, [segment]);\n\n  if (!data) {\n    return (\n      <CircularProgress\n        id={`elevation-preview-${route.slug}`}\n        small\n        circleStyle={{ stroke: \"black\" }}\n      />\n    );\n  }\n\n  return (\n    <AreaChart\n      height={50}\n      width={100}\n      data={data}\n      // @ts-ignore\n      baseValue=\"dataMin\"\n    >\n      <defs>\n        <ElevationGradient />\n      </defs>\n\n      <XAxis\n        dataKey=\"distance\"\n        type=\"number\"\n        domain={[0, \"dataMax\"]}\n        unit=\"km\"\n        hide={true}\n      />\n\n      <YAxis\n        dataKey=\"elevation\"\n        type=\"number\"\n        allowDecimals={false}\n        domain={[0, 750]}\n        unit=\"m\"\n        hide={true}\n      />\n\n      <Area\n        type=\"monotone\"\n        dataKey=\"elevation\"\n        name=\"Elevation\"\n        stroke=\"black\"\n        fillOpacity={1}\n        fill=\"url(#colorElevation)\"\n        unit=\"m\"\n        isAnimationActive={false}\n      />\n    </AreaChart>\n  );\n}\n","import { ListItem } from \"@react-md/list\";\nimport round from \"lodash/round\";\nimport React, { useRef } from \"react\";\nimport { useOnScreen } from \"../../hooks/useOnScreen\";\nimport { Route } from \"../../types\";\nimport { ElevationChartPreview } from \"../ElevationChartPreview\";\n\nexport interface Props {\n  route: Route;\n  onClick: () => void;\n}\n\nexport function SearchResultCardRoute({ route, onClick }: Props) {\n  return (\n    <ListItem\n      secondaryText={getRouteInfo(route)}\n      onClick={onClick}\n      rightAddonType=\"large-media\"\n      rightAddon={<ChartContainer route={route} />}\n    >\n      {route.name}\n    </ListItem>\n  );\n}\n\nfunction getRouteInfo(route: Route) {\n  return `${round(route.distance, 1)}km | ${round(route.elevation)}m`;\n}\n\ninterface ChartProps {\n  route: Route;\n}\n\nfunction ChartContainer({ route }: ChartProps) {\n  const ref = useRef<HTMLDivElement | null>(null);\n\n  const onScreen = useOnScreen(ref);\n\n  return (\n    <div ref={ref} style={{ width: \"100%\", pointerEvents: \"none\" }}>\n      {onScreen ? <ElevationChartPreview route={route} /> : null}\n    </div>\n  );\n}\n","import { MutableRefObject, useEffect, useState } from \"react\";\n\n/**\n * @see https://usehooks.com/useOnScreen/\n */\nexport function useOnScreen(ref: MutableRefObject<HTMLElement | null>) {\n  const [isIntersecting, setIntersecting] = useState(false);\n  useEffect(() => {\n    const current = ref.current;\n\n    const observer = new IntersectionObserver(([entry]) => {\n      setIntersecting(entry.isIntersecting);\n    });\n    if (current) {\n      observer.observe(current);\n    }\n    return () => {\n      if (current) {\n        observer.unobserve(current);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return isIntersecting;\n}\n","import { ListItem } from \"@react-md/list\";\nimport { routes, segments } from \"../../data\";\nimport { useSettings } from \"../../hooks/useSettings\";\nimport { World } from \"../../types\";\n\nexport interface Props {\n  world: World;\n  onClick: () => void;\n}\n\nexport function SearchResultCardWorld({ world, onClick }: Props) {\n  const [settings] = useSettings();\n  const secondaryText = `${\n    routes\n      .filter((r) => r.sports.includes(settings.sport))\n      .filter((r) => r.world === world.slug).length\n  } routes | ${\n    segments\n      .filter((s) => s.sports.includes( settings.sport))\n      .filter((s) => s.world === world.slug).length\n  } segments`;\n\n  return (\n    <ListItem secondaryText={secondaryText} onClick={onClick}>\n      {world.name}\n    </ListItem>\n  );\n}\n","import { Divider } from \"@react-md/divider\";\nimport { ListSubheader, SimpleListItem } from \"@react-md/list\";\nimport React, { Fragment } from \"react\";\nimport { SearchResult, searchResultTypes } from \"../../services/search\";\nimport { SearchResultCardRoute } from \"./SearchResultCardRoute\";\nimport { SearchResultCardWorld } from \"./SearchResultCardWorld\";\n\ninterface Props {\n  searchResults: ReadonlyArray<SearchResult>;\n  onResultClick: (searchResult: SearchResult) => void;\n}\n\nexport function SearchResultList({ searchResults, onResultClick }: Props) {\n  if (searchResults.length === 0) {\n    return <SimpleListItem>No worlds or routes found</SimpleListItem>;\n  }\n\n  return (\n    <>\n      {searchResults.map((searchResult, i) => (\n        <Fragment key={searchResult.data.slug}>\n          {searchResults[i - 1]?.type !== searchResult.type && (\n            <>\n              {searchResults[i - 1] && <Divider />}\n              <ListSubheader>\n                {searchResultTypes[searchResult.type].title}\n              </ListSubheader>\n            </>\n          )}\n          <SearchResultCard\n            searchResult={searchResult}\n            onClick={() => onResultClick(searchResult)}\n          />\n        </Fragment>\n      ))}\n    </>\n  );\n}\n\ninterface SearchResultCardProps {\n  searchResult: SearchResult;\n  onClick: () => void;\n}\n\nfunction SearchResultCard({ searchResult, onClick }: SearchResultCardProps) {\n  switch (searchResult.type) {\n    case \"world\":\n      return (\n        <SearchResultCardWorld world={searchResult.data} onClick={onClick} />\n      );\n    case \"route\":\n      return (\n        <SearchResultCardRoute route={searchResult.data} onClick={onClick} />\n      );\n    default:\n      return null;\n  }\n}\n","import { Button } from \"@react-md/button\";\nimport { Divider } from \"@react-md/divider\";\nimport { TextField } from \"@react-md/form\";\nimport { FontIcon } from \"@react-md/icon\";\nimport { List, ListItem, SimpleListItem } from \"@react-md/list\";\nimport { DragHandleFontIcon, SettingsFontIcon } from \"@react-md/material-icons\";\nimport React, { useRef, useState } from \"react\";\nimport Draggable from \"./BottomSheet/Draggable\";\nimport useResizeObserver from \"use-resize-observer\";\nimport { routes, worlds } from \"../../data\";\nimport { useLocationState } from \"../../hooks/useLocationState\";\nimport { useSettings } from \"../../hooks/useSettings\";\nimport { search, SearchResult } from \"../../services/search\";\nimport { SettingsDialog } from \"../SettingsDialog\";\nimport { Details } from \"./Details\";\nimport styles from \"./index.module.scss\";\nimport { SearchResultCardRoute } from \"./SearchResultCardRoute\";\nimport { SearchResultList } from \"./SearchResultList\";\nimport { useIsDesktop } from \"../../hooks/useIsDesktop\";\nimport { useWindowHeight } from \"../../hooks/useWindowHeight\";\n\nconst DRAG_HANDLE_HEIGHT = 24;\n\ninterface Props {\n  onMouseHoverDistanceChange: (distance: number | undefined) => void;\n}\n\nexport function Sidebar({ onMouseHoverDistanceChange }: Props) {\n  const windowHeight = useWindowHeight();\n  const isDesktop = useIsDesktop();\n  const [locationState, setLocationState] = useLocationState();\n  const [query, setQuery] = useState(\"\");\n  const [settings] = useSettings();\n  const containerRef = useRef<HTMLDivElement | null>(null);\n  const { height: containerHeight } = useResizeObserver<HTMLDivElement>({\n    ref: containerRef,\n  });\n\n  const [settingsDialogVisible, setSettingsDialogVisible] = useState(false);\n\n  const searchResults = search(query, settings.sport);\n\n  const handleSearchResultClick = (searchResult: SearchResult) => {\n    switch (searchResult.type) {\n      case \"world\":\n        setLocationState({ world: searchResult.data });\n        break;\n      case \"route\":\n        setLocationState({\n          world: worlds.find((w) => w.slug === searchResult.data.world)!,\n          route: searchResult.data,\n        });\n        break;\n    }\n  };\n\n  return (\n    <>\n      <Draggable\n        defaultPosition={windowHeight - DRAG_HANDLE_HEIGHT}\n        bounds={{\n          top: windowHeight - (containerHeight ?? DRAG_HANDLE_HEIGHT),\n          bottom: windowHeight - DRAG_HANDLE_HEIGHT,\n        }}\n        disabled={isDesktop}\n        nodeRef={containerRef}\n      >\n        <div className={styles.Container} ref={containerRef}>\n          <div className={styles.DragHandle}>\n            <DragHandleFontIcon />\n          </div>\n          <List className={styles.SearchBox}>\n            <SimpleListItem>\n              <TextField\n                id=\"search-input\"\n                style={{ width: \"100%\" }}\n                placeholder=\"Search for worlds and routes…\"\n                value={query}\n                onChange={(e) => {\n                  setQuery(e.target.value);\n                }}\n                isRightAddon={false}\n                rightChildren={\n                  query !== \"\" && (\n                    <Button\n                      buttonType=\"icon\"\n                      style={{ right: 0, position: \"absolute\" }}\n                      onClick={() => {\n                        setQuery(\"\");\n                      }}\n                      aria-label=\"Clear search field\"\n                    >\n                      <FontIcon>clear</FontIcon>\n                    </Button>\n                  )\n                }\n              />\n            </SimpleListItem>\n            <Divider className={styles.NoGapDivider} />\n          </List>\n          <div className={styles.Content}>\n            {locationState.route ? (\n              <Details\n                onMouseHoverDistanceChange={onMouseHoverDistanceChange}\n                backButtonText={\n                  query === \"\" ? \"Back to route list\" : \"Back to search results\"\n                }\n                onBackButtonClick={() => {\n                  setLocationState({ ...locationState, route: undefined });\n                }}\n              />\n            ) : (\n              <List>\n                {query === \"\" ? (\n                  <>\n                    {routes\n                      .filter(\n                        (route) => route.world === locationState.world.slug\n                      )\n                      .filter((route) => route.sports.includes(settings.sport))\n                      .filter((route) => route.stravaSegmentId !== undefined)\n                      .sort((a, b) => a.name.localeCompare(b.name))\n                      .map((route) => (\n                        <SearchResultCardRoute\n                          route={route}\n                          key={route.slug}\n                          onClick={() => {\n                            setLocationState({\n                              world: worlds.find(\n                                (w) => w.slug === route.world\n                              )!,\n                              route,\n                            });\n                          }}\n                        />\n                      ))}\n                  </>\n                ) : (\n                  <SearchResultList\n                    searchResults={searchResults}\n                    onResultClick={handleSearchResultClick}\n                  />\n                )}\n              </List>\n            )}\n          </div>\n          <List className={styles.BottomMenu}>\n            <Divider className={styles.NoGapDivider} />\n            <ListItem\n              onClick={() => setSettingsDialogVisible(true)}\n              leftAddon={<SettingsFontIcon />}\n              leftAddonType=\"icon\"\n            >\n              Settings\n            </ListItem>\n          </List>\n        </div>\n      </Draggable>\n      <SettingsDialog\n        visible={settingsDialogVisible}\n        onClose={() => setSettingsDialogVisible(false)}\n      />\n    </>\n  );\n}\n","import { useEffect, useState } from \"react\";\n\nexport function useWindowHeight(): number {\n  const [height, setHeight] = useState(window.innerHeight);\n\n  useEffect(() => {\n    function handleResize() {\n      setHeight(window.innerHeight);\n    }\n\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  return height;\n}\n","import { useMediaQuery } from \"react-responsive\";\n\nexport function useIsDesktop() {\n  return useMediaQuery({\n    query: \"(min-width: 751px)\",\n  });\n}\n","import { LatLngTuple } from \"leaflet\";\nimport bolognaMap from \"./maps/bologna.png\";\nimport critCityMap from \"./maps/crit-city.png\";\nimport franceMap from \"./maps/france.png\";\nimport innsbruckMap from \"./maps/innsbruck.png\";\nimport londonMap from \"./maps/london.png\";\nimport newYorkMap from \"./maps/new-york.png\";\nimport parisMap from \"./maps/paris.png\";\nimport richmondMap from \"./maps/richmond.png\";\nimport watopiaMap from \"./maps/watopia.png\";\nimport yorkshireMap from \"./maps/yorkshire.png\";\nimport { WorldSlug } from \"./types\";\n\nexport type WorldConfig = {\n  imageBounds: [LatLngTuple, LatLngTuple];\n  initialBounds: [LatLngTuple, LatLngTuple];\n  image: string;\n  backgroundColor: string;\n};\n\nexport const worldConfigs: Record<WorldSlug, WorldConfig> = {\n  bologna: {\n    imageBounds: [\n      [44.45463821, 11.26261748],\n      [44.5308037, 11.36991729102076],\n    ],\n    initialBounds: [\n      [44.478222, 11.294653],\n      [44.501423, 11.341099],\n    ],\n    image: bolognaMap,\n    backgroundColor: \"#b9b9b8\",\n  },\n  \"crit-city\": {\n    imageBounds: [\n      [-10.3657, 165.7824],\n      [-10.4038, 165.8207],\n    ],\n    initialBounds: [\n      [-10.382352, 165.798758],\n      [-10.386016, 165.803496],\n    ],\n    image: critCityMap,\n    backgroundColor: \"#7c9938\",\n  },\n  france: {\n    imageBounds: [\n      [-21.64155, 166.1384],\n      [-21.7564, 166.26125],\n    ],\n    initialBounds: [\n      [-21.697812, 166.148225],\n      [-21.744906, 166.202642],\n    ],\n    image: franceMap,\n    backgroundColor: \"#6f992d\",\n  },\n  innsbruck: {\n    imageBounds: [\n      [47.2947, 11.3501],\n      [47.2055, 11.4822],\n    ],\n    initialBounds: [\n      [47.280902, 11.386414],\n      [47.214544, 11.445934],\n    ],\n    image: innsbruckMap,\n    backgroundColor: \"#7c9938\",\n  },\n  london: {\n    imageBounds: [\n      [51.5362, -0.1776],\n      [51.4601, -0.0555],\n    ],\n    initialBounds: [\n      [51.511261, -0.134875],\n      [51.489256, -0.072996],\n    ],\n    image: londonMap,\n    backgroundColor: \"#6f992d\",\n  },\n  \"new-york\": {\n    imageBounds: [\n      [40.81725, -74.0227],\n      [40.74085, -73.9222],\n    ],\n    initialBounds: [\n      [40.799618, -73.982068],\n      [40.763547, -73.949602],\n    ],\n    image: newYorkMap,\n    backgroundColor: \"#bbbbb7\",\n  },\n  paris: {\n    imageBounds: [\n      [48.9058, 2.2561],\n      [48.82945, 2.3722],\n    ],\n    initialBounds: [\n      [48.874328, 2.294207],\n      [48.860895, 2.331992],\n    ],\n    image: parisMap,\n    backgroundColor: \"#b9b9b9\",\n  },\n  richmond: {\n    imageBounds: [\n      [37.5774, -77.48954],\n      [37.5014, -77.394],\n    ],\n    initialBounds: [\n      [37.558393, -77.467668],\n      [37.520429, -77.415864],\n    ],\n    image: richmondMap,\n    backgroundColor: \"#7c9938\",\n  },\n  watopia: {\n    imageBounds: [\n      [-11.62597, 166.87747],\n      [-11.70255, 167.03255],\n    ],\n    initialBounds: [\n      [-11.635444, 166.93555],\n      [-11.673613, 166.972511],\n    ],\n    image: watopiaMap,\n    backgroundColor: \"#0884e2\",\n  },\n  yorkshire: {\n    imageBounds: [\n      [54.0254, -1.632],\n      [53.9491, -1.5022],\n    ],\n    initialBounds: [\n      [53.999691, -1.592961],\n      [53.974875, -1.539474],\n    ],\n    image: yorkshireMap,\n    backgroundColor: \"#7c9938\",\n  },\n};\n","export default __webpack_public_path__ + \"static/media/bologna.6f13d4d4.png\";","export default __webpack_public_path__ + \"static/media/crit-city.3bab2d0f.png\";","export default __webpack_public_path__ + \"static/media/france.aded90ff.png\";","export default __webpack_public_path__ + \"static/media/innsbruck.9821ed90.png\";","export default __webpack_public_path__ + \"static/media/london.54ae112e.png\";","export default __webpack_public_path__ + \"static/media/new-york.5bf9b5e8.png\";","export default __webpack_public_path__ + \"static/media/paris.d1eaa520.png\";","export default __webpack_public_path__ + \"static/media/richmond.72df812b.png\";","export default __webpack_public_path__ + \"static/media/watopia.0901a23e.png\";","export default __webpack_public_path__ + \"static/media/yorkshire.b83235cf.png\";","import { Select } from \"@react-md/form\";\nimport React from \"react\";\nimport { worlds } from \"../../data\";\nimport { useLocationState } from \"../../hooks/useLocationState\";\nimport styles from \"./WorldSelect.module.scss\";\n\nconst options = [...worlds]\n  .sort((a, b) => a.name.localeCompare(b.name))\n  .map((world) => ({\n    label: world.name,\n    value: world.slug,\n  }));\n\nexport function WorldSelect() {\n  const [locationState, setLocationState] = useLocationState();\n\n  return (\n    <div className={styles.Container}>\n      <Select\n        id=\"world-select\"\n        options={options}\n        value={locationState.world.slug}\n        listboxStyle={{ zIndex: 3000 }}\n        onChange={(newWorldSlug) =>\n          setLocationState({\n            world: worlds.find((w) => w.slug === newWorldSlug)!,\n          })\n        }\n      />\n    </div>\n  );\n}\n","import { LatLngBounds, LatLngExpression, Map } from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { useAsync } from \"react-async-hook\";\nimport {\n  Circle,\n  ImageOverlay,\n  LayerGroup,\n  LayersControl,\n  MapContainer,\n  Pane,\n  Polyline,\n} from \"react-leaflet\";\nimport { segments } from \"../../data\";\nimport { useLocationState } from \"../../hooks/useLocationState\";\nimport { useSettings } from \"../../hooks/useSettings\";\nimport {\n  getStravaSegmentStream,\n  getStravaSegmentStreams,\n} from \"../../StravaSegmentRepository\";\nimport { Route, Segment } from \"../../types\";\nimport { worldConfigs } from \"../../worldConfig\";\nimport styles from \"./index.module.css\";\nimport { WorldSelect } from \"./WorldSelect\";\n\ninterface Props {\n  mouseHoverDistance: number | undefined;\n}\n\nexport default function RouteMap({ mouseHoverDistance }: Props) {\n  const [locationState] = useLocationState();\n  const world = locationState.world;\n  const worldConfig = worldConfigs[world.slug];\n  const [settings] = useSettings();\n\n  const filteredSegments = useMemo(\n    () =>\n      segments\n        .filter((s) => s.sports.includes(settings.sport))\n        .filter((s) => s.world === world.slug)\n        .filter((s) => s.stravaSegmentId !== undefined),\n    [settings.sport, world]\n  );\n  const { result: stravaSegmentsInWorld } = useAsync(\n    async (fs: Segment[]) => {\n      const stravaSegments = await Promise.all(\n        fs.map((s) => getStravaSegmentStream(s.slug, \"latlng\"))\n      );\n      return fs.map((s, i) => ({\n        ...s,\n        stravaData: stravaSegments[i],\n      }));\n    },\n    [filteredSegments]\n  );\n\n  const [map, setMap] = useState<Map | undefined>();\n  useEffect(() => {\n    map?.zoomControl.setPosition(\"topright\");\n  }, [map]);\n\n  const { result: routeStravaSegment } = useAsync(\n    async (r?: Route) => {\n      if (r === undefined) {\n        return;\n      }\n\n      return await getStravaSegmentStreams(r.slug, [\"distance\", \"latlng\"]);\n    },\n    [locationState.route]\n  );\n\n  useEffect(() => {\n    if (!map || !routeStravaSegment) {\n      return;\n    }\n\n    const bounds = routeStravaSegment.latlng.reduce(\n      (bounds, coord) => bounds.extend(coord),\n      new LatLngBounds(\n        routeStravaSegment.latlng[0],\n        routeStravaSegment.latlng[0]\n      )\n    );\n\n    map.invalidateSize();\n    map.fitBounds(bounds);\n  }, [map, routeStravaSegment, worldConfig]);\n\n  useEffect(() => {\n    if (!map || !locationState) {\n      return;\n    }\n\n    const worldConfig = worldConfigs[locationState.world.slug];\n\n    map.invalidateSize();\n    map.setMaxBounds(worldConfig.imageBounds);\n\n    const minZoom = map.getBoundsZoom(worldConfig.imageBounds, false);\n    map.setMinZoom(minZoom);\n\n    if (!locationState.route) {\n      map.fitBounds(worldConfig.initialBounds);\n    }\n  }, [map, locationState]);\n\n  const pointCoordinates = useMemo<LatLngExpression | undefined>(() => {\n    if (!routeStravaSegment || !mouseHoverDistance) {\n      return;\n    }\n\n    const pointIndex = routeStravaSegment.distance.findIndex(\n      (d) => d > mouseHoverDistance\n    );\n    if (!pointIndex) {\n      return;\n    }\n    return routeStravaSegment.latlng[pointIndex];\n  }, [routeStravaSegment, mouseHoverDistance]);\n\n  return (\n    <div className={styles.Container}>\n      <WorldSelect />\n      <MapContainer\n        key={locationState.world.slug}\n        whenCreated={(map) => setMap(map)}\n        bounds={worldConfig.imageBounds}\n        style={{ backgroundColor: worldConfig.backgroundColor }}\n        maxZoom={19}\n        className={styles.MapContainer}\n      >\n        <ImageOverlay\n          url={worldConfig.image}\n          bounds={worldConfig.imageBounds}\n          attribution='&amp;copy <a href=\"https://zwift.com\" rel=\"noreferrer noopener\">Zwift</a>'\n        />\n\n        <Pane name=\"route\">\n          {routeStravaSegment && (\n            <Polyline\n              positions={routeStravaSegment.latlng}\n              pathOptions={{ color: \"#fc6719\", weight: 5 }}\n            />\n          )}\n        </Pane>\n\n        <LayersControl>\n          <LayersControl.Overlay name=\"Show segments\" checked>\n            <LayerGroup>\n              <Pane name=\"segments\">\n                {stravaSegmentsInWorld?.map((s) => (\n                  <Polyline\n                    key={s.slug}\n                    positions={s.stravaData}\n                    pathOptions={{ color: \"green\", weight: 5 }}\n                  />\n                ))}\n              </Pane>\n            </LayerGroup>\n          </LayersControl.Overlay>\n        </LayersControl>\n\n        <Pane name=\"mouse-position\">\n          {pointCoordinates && (\n            <Circle\n              center={pointCoordinates}\n              radius={10}\n              pathOptions={{\n                color: \"black\",\n                fillColor: \"black\",\n                fillOpacity: 1,\n              }}\n            />\n          )}\n        </Pane>\n      </MapContainer>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport styles from \"./App.module.scss\";\nimport { Sidebar } from \"./components/Sidebar\";\nimport RouteMap from \"./components/RouteMap\";\n\nexport default function App() {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [mouseHoverDistance, setMouseHoverDistance] = useState<\n    number | undefined\n  >(undefined);\n\n  return (\n    <>\n      <div className={styles.Wrapper}>\n        <Sidebar onMouseHoverDistanceChange={setMouseHoverDistance} />\n        <RouteMap mouseHoverDistance={mouseHoverDistance} />\n      </div>\n    </>\n  );\n}\n","import \"./index.scss\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"app\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Sidebar_Container__3o0kK\",\"SearchBox\":\"Sidebar_SearchBox__3wlGX\",\"Content\":\"Sidebar_Content__15Hau\",\"BottomMenu\":\"Sidebar_BottomMenu__2Obmz\",\"NoGapDivider\":\"Sidebar_NoGapDivider__20DmD\",\"DragHandle\":\"Sidebar_DragHandle__l0Son\"};"],"sourceRoot":""}