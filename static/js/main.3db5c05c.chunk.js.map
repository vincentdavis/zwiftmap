{"version":3,"sources":["components/RouteMap/index.module.css","App.module.scss","components/RouteMap/WorldSelect.module.scss","components/InfoDialog/index.module.scss","services/local-storage.ts","hooks/useIsLoggedInStrava.ts","hooks/useLocationState/constants.ts","hooks/useLocationState/getLocationState.ts","hooks/useLocationState/index.ts","hooks/useLocationState/createUrl.ts","maps/bologna.png","worldConfig.ts","maps/crit-city.png","maps/france.png","maps/innsbruck.png","maps/london.png","maps/makuri-islands.png","maps/new-york.png","maps/paris.png","maps/richmond.png","maps/watopia.png","maps/yorkshire.png","util/strava.ts","services/strava/token.ts","services/strava/auth.ts","services/axios-cache.ts","services/strava/api.ts","services/StravaActivityRepository.ts","services/StravaSegmentRepository.ts","components/RouteMap/WorldSelect.tsx","components/RouteMap/index.tsx","assets/strava-40x40.png","hooks/useSettings.ts","components/Distance/index.tsx","components/Elevation/index.tsx","components/ElevationGradient/index.tsx","components/Sidebar/ElevationChart.tsx","services/fetchEvents.ts","components/Sidebar/Details/RouteDetails/RouteEvents.tsx","components/Time/index.tsx","components/Sidebar/Details/RouteDetails/RouteSegments.tsx","components/Sidebar/Details/RouteDetails/RouteStravaPB.tsx","components/Sidebar/Details/RouteDetails/index.tsx","assets/ZwiftInsider-40x40.jpg","assets/WhatsOnZwift-40x40.png","components/Sidebar/Details/StravaActivityDetails/index.tsx","components/Sidebar/Details/WorldDetails.tsx","components/Sidebar/Details/index.tsx","components/InfoDialog/index.tsx","components/SettingsDialog/index.tsx","components/Sidebar/MenuButton.tsx","hooks/useIsMobile.ts","components/ElevationChartPreview/index.tsx","components/Sidebar/ListItemRoute.tsx","hooks/useOnScreen.ts","components/Sidebar/RouteList.tsx","components/Sidebar/SearchInput.tsx","services/search.ts","components/Sidebar/ListItemStravaActivity.tsx","components/Sidebar/ListItemWorld.tsx","components/Sidebar/SearchResultList.tsx","components/Sidebar/StravaActivitiesList.tsx","components/Sidebar/index.tsx","App.tsx","hooks/usePing.ts","hooks/useStravaTokenListener.ts","index.tsx","components/Sidebar/index.module.scss"],"names":["module","exports","STRAVA_AUTH_KEY","emitter","mitt","setLocalStorageItem","key","value","localStorage","removeItem","setItem","emit","getLocalStorageItem","getItem","useIsLoggedInStrava","useState","isLoggedIn","setIsLoggedIn","useEffect","callback","listener","v","on","addLocalStorageListener","window","addEventListener","e","newValue","DEFAULT_WORLD","worlds","find","w","slug","getLocationState","location","search","pathname","searchParams","URLSearchParams","world","getWorld","query","get","has","route","routes","filter","r","selectedSegments","split","map","segments","s","segment","type","stravaActivityId","pathParts","slice","worldFromPath","worldFromSearch","listeners","useLocationState","state","setState","removeEventListener","newState","push","splice","indexOf","updateLocationState","useCallback","url","path","set","length","join","searchParamsString","toString","createUrl","history","pushState","undefined","forEach","l","worldConfigs","bologna","imageBounds","initialBounds","image","backgroundColor","france","innsbruck","london","paris","richmond","watopia","yorkshire","activity","start_latlng","bb","getStravaToken","tokenString","JSON","parse","writeStravaToken","token","stringify","removeStravaToken","a","axios","post","params","access_token","openStravaAuthUrl","href","Object","fromEntries","entries","getStravaAuthUrl","getRefreshedToken","refreshToken","refresh_token","response","data","getCacheKey","config","axiosCache","cache","Cache","requestHandler","request","cacheKey","method","hasResponse","headers","cached","getResponse","prepareResponse","toLocaleLowerCase","storeResponse","errorOrData","Promise","resolve","reject","store","this","handler","off","api","create","baseURL","fetchActivity","activityId","fetchActivityStreams","keys","key_by_type","fetchSegment","segmentId","getLoggedInAthleteActivities","getStravaActivity","esa","Error","id","name","athlete","distance","total_elevation_gain","moving_time","average_watts","photos","primary","urls","fetchStravaActivityStreams","athleteId","elevation","time","avgWatts","photoUrl","streams","altitude","cadence","heartrate","latlng","velocity","velocity_smooth","watts","interceptors","use","expires_at","Math","round","Date","now","Authorization","token_type","identity","error","getStravaSegmentStream","segmentSlug","stream","getStravaSegmentStreams","all","streamData","i","options","sort","b","localeCompare","label","WorldSelect","locationState","setLocationState","className","styles","Container","Select","listboxStyle","zIndex","onChange","newWorldSlug","RouteMap","mouseHoverDistance","previewRoute","worldConfig","useAsync","stravaSegments","stravaData","stravaSegmentsToShow","result","setMap","zoomControl","setPosition","routeStravaSegment","isLoggedInStrava","loggedIn","stravaActivity","previewRouteStravaSegment","bounds","reduce","coord","extend","LatLngBounds","invalidateSize","fitBounds","setMaxBounds","minZoom","getBoundsZoom","setMinZoom","pointCoordinates","useMemo","pointIndex","findIndex","d","MapContainer","whenCreated","style","maxZoom","ImageOverlay","attribution","Pane","Polyline","positions","pathOptions","color","weight","Circle","center","radius","fillColor","fillOpacity","LOCAL_STORAGE_KEY","loadSettings","rawSettings","settings","sport","units","useSettings","setSettings","newSettings","updateSettings","saveSettings","formatDigits","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","formatNoDigits","Distance","format","Elevation","ElevationGradient","x1","y1","x2","y2","offset","stopColor","stopOpacity","REQUIRED_STREAMS","ElevationChart","onMouseHoverDistanceChange","hoverData","setHoverData","handleMouseMove","uniqWith","index","width","height","marginBottom","ResponsiveContainer","AreaChart","margin","top","right","left","bottom","baseValue","CartesianGrid","vertical","XAxis","dataKey","allowDecimals","tick","unit","domain","hide","YAxis","tickCount","Tooltip","content","props","TooltipContent","onMouseMove","isAnimationActive","position","y","cursor","stroke","Area","fill","display","gap","Text","whiteSpace","payload","CullingType","Description","fetchEvents","then","RouteEvents","events","filteredEvents","event","eventRouteIds","routeId","eventSubgroups","esg","includes","eventStart","SimpleListItem","CircularProgress","small","circleStyle","ListItem","onClick","open","rightAddon","EventFontIcon","rightAddonType","secondaryText","DateTimeFormat","hour","minute","weekday","eventTypes","eventType","distanceInMeters","durationInSeconds","laps","threeLines","GROUP_RIDE","GROUP_WORKOUT","RACE","TIME_TRIAL","Time","secondsInput","seconds","minutes","hours","padStart","RouteSegments","segmentsOnRoute","disabled","stravaSegmentId","VisibilityFontIcon","VisibilityOffFontIcon","SecondaryText","sid","stravaSegment","segmentPB","athlete_segment_stats","effort_count","pr_elapsed_time","avgIncline","segmentTypes","climb","sprint","RouteStravaPB","loading","leftAddon","TimerFontIcon","leftAddonType","OpenInNewFontIcon","RouteDetails","backButtonText","onBackButtonClick","List","Button","themeType","TextIconSpacing","icon","ListFontIcon","clickable","SpaceBarFontIcon","leadInDistance","LandscapeFontIcon","leadInElevation","experience","StarFontIcon","eventOnly","MapFontIcon","ListSubheader","zwiftInsiderUrl","Avatar","src","alt","stravaSegmentUrl","stravaLogo","whatsOnZwiftUrl","StravaActivityDetails","StravaActivityDetailsWithToken","WorldDetails","Details","InfoDialog","visible","onClose","Dialog","onRequestClose","DialogHeader","paddingBottom","DialogTitle","DialogContent","rel","target","DialogFooter","SettingsDialog","handleSportChange","checked","handleUnitsChange","Fieldset","legend","Radio","MenuButton","onBottomSheetClose","buttonRef","useRef","menuVisible","setMenuVisible","useToggle","settingsDialogVisible","showSettingsDialog","hideSettingsDialog","infoDialogVisible","showInfoDialog","hideInfoDialog","isMobile","useMediaQuery","isStravaLoggedIn","stopPropagation","MenuFontIcon","ChevronRightFontIcon","ref","Menu","controlId","anchor","BOTTOM_RIGHT_ANCHOR","portal","MenuItem","InfoFontIcon","SettingsFontIcon","Divider","ElevationChartPreview","filteredData","lowestElevation","min","ListItemRoute","onHoverRoute","showWorldName","RouteInfo","ChartContainer","onMouseEnter","onMouseLeave","onScreen","isIntersecting","setIntersecting","current","observer","IntersectionObserver","entry","observe","unobserve","useOnScreen","pointerEvents","RouteList","sports","SearchInput","TextField","placeholder","isRightAddon","rightChildren","buttonType","FontIcon","REGEX_STRAVA_ACTIVITY","searchResults","terms","t","searchResultTypes","title","ListItemStravaActivity","SearchResultCardStravaActivityWithToken","ListItemWorld","SearchResultList","term","test","exec","sr","every","some","srt","searchResult","SearchResultCard","getTime","StravaActivitiesList","activities","page","newResults","after","per_page","start_date","Sidebar","bottomSheetOpen","setBottomSheetOpen","containerRef","c","BottomSheetOpen","DragHandle","KeyboardArrowDownFontIcon","SearchBox","NoGapDivider","Content","BottomMenu","DragHandleBottom","KeyboardArrowUpFontIcon","App","updateStravaToken","delete","replaceState","origin","useStravaTokenListener","setMouseHoverDistance","setPreviewRoute","Wrapper","Sentry","enabled","process","dsn","integrations","Integrations","BrowserTracing","tracesSampleRate","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"iHACAA,EAAOC,QAAU,CAAC,UAAY,4BAA4B,aAAe,+BAA+B,kBAAoB,sC,oBCA5HD,EAAOC,QAAU,CAAC,QAAU,uB,oBCA5BD,EAAOC,QAAU,CAAC,UAAY,iC,oBCA9BD,EAAOC,QAAU,CAAC,OAAS,6B,8PCCdC,EAAkB,cAEzBC,EAAUC,cAQT,SAASC,EAAoBC,EAAaC,GACjC,OAAVA,EACFC,aAAaC,WAAWH,GAExBE,aAAaE,QAAQJ,EAAKC,GAE5BJ,EAAQQ,KAAKL,EAAKC,GAGb,SAASK,EAAoBN,GAClC,OAAOE,aAAaK,QAAQP,GCfvB,SAASQ,IACd,MAAoCC,oBAClC,kBAA+C,OAAzCH,EAAoBV,MAD5B,mBAAOc,EAAP,KAAmBC,EAAnB,KAQA,OAJAC,qBAAU,YDaL,SACLZ,EACAa,GAEA,IAAMC,EAAW,SAACC,GAAD,OACfF,EAASE,IACXlB,EAAQmB,GAAGhB,EAAKc,GClBdG,CAAwBrB,GAAiB,SAACmB,GAAD,OAAOJ,EAAoB,OAANI,QAC7D,IAEIL,EDVTQ,OAAOC,iBAAiB,WAAW,SAACC,GAC9BA,EAAEpB,KACJH,EAAQQ,KAAKe,EAAEpB,IAAKoB,EAAEC,a,YENbC,EAAgBC,IAAOC,MAAK,SAACC,GAAD,MAAkB,YAAXA,EAAEC,QCE3C,SAASC,IAEE,IAAD,2DAD+CT,OAAOU,SAAnEC,EACa,EADbA,OAAQC,EACK,EADLA,SAEJC,EAAe,IAAIC,gBAAgBH,GAEnCI,EAAQC,EAAS,CAAEH,eAAcD,aACjCK,EAAK,UAAGJ,EAAaK,IAAI,YAApB,QAA4B,GAEvC,GAAIL,EAAaM,IAAI,SAAU,CAAC,IAAD,EACvBC,EAAQC,IACXC,QAAO,SAACC,GAAD,OAAOA,EAAER,SAAF,OAAYA,QAAZ,IAAYA,OAAZ,EAAYA,EAAOP,SACjCF,MAAK,SAACiB,GAAD,OAAOA,EAAEf,OAASK,EAAaK,IAAI,YACrCM,GAAmB,UAACX,EAAaK,IAAI,mBAAlB,QAAiC,IACvDO,MAAM,KACNC,KAAI,SAAClB,GAAD,OAAUmB,IAASrB,MAAK,SAACsB,GAAD,OAAOA,EAAEpB,OAASA,QAC9Cc,QAAO,SAACO,GAAD,QAAmCA,KAE7C,OAAKT,EAGI,CACLL,QACAE,QACAa,KAAM,QACNV,QACAO,SAAUH,GAPL,CAAET,QAAOE,QAAOa,KAAM,WAU1B,OAAIjB,EAAaM,IAAI,qBACnB,CAAEJ,QAAOE,QAAOa,KAAM,qBACpBjB,EAAaM,IAAI,mBACnB,CACLJ,QACAE,QAEAa,KAAM,kBACNC,iBAAkBlB,EAAaK,IAAI,oBAG9B,CAAEH,QAAOE,QAAOa,KAAM,WAIjC,SAASd,EAAT,GAMW,IAAD,EALRH,EAKQ,EALRA,aAMMmB,EADE,EAJRpB,SAK2Ba,MAAM,KAAKQ,MAAM,GAEtCC,EAAgB7B,IAAOC,MAAK,SAACC,GAAD,OAAOA,EAAEC,OAASwB,EAAU,MACxDG,EAAkB9B,IAAOC,MAC7B,SAACC,GAAD,OAAOA,EAAEC,OAASK,EAAaK,IAAI,YAGrC,wBAAOgB,QAAP,IAAOA,IAAiBC,SAAxB,QAA2C/B,ECvD7C,IAAMgC,EAAwB,GAEvB,SAASC,IAId,MAA0B9C,mBAASkB,GAAnC,mBAAO6B,EAAP,KAAcC,EAAd,KAEA7C,qBAAU,WACR,IAAME,EAAW,kBAAM2C,EAAS9B,MAEhC,OADAT,OAAOC,iBAAiB,WAAYL,GAC7B,kBAAMI,OAAOwC,oBAAoB,WAAY5C,MACnD,IAEHF,qBAAU,WACR,IAAME,EAAqB,SAAC6C,GAAD,OAAcF,EAASE,IAGlD,OAFAL,EAAUM,KAAK9C,GAER,WACLwC,EAAUO,OAAOP,EAAUQ,QAAQhD,GAAW,MAE/C,IAEH,IAAMiD,EAAsBC,uBAAY,SAACL,GACvC,IAAMM,EC5BH,SAAmBT,GACxB,IAAMU,EAAI,WAAOV,EAAMvB,MAAMP,MAEvBK,EAAe,IAAIC,gBAEzB,OAAQwB,EAAMR,MACZ,IAAK,UACH,MACF,IAAK,QACHjB,EAAaoC,IAAI,QAASX,EAAMlB,MAAMZ,MAClC8B,EAAMX,SAASuB,OAAS,GAC1BrC,EAAaoC,IACX,WACAX,EAAMX,SAASD,KAAI,SAACE,GAAD,OAAOA,EAAEpB,QAAM2C,KAAK,MAG3C,MAEF,IAAK,oBACHtC,EAAaoC,IAAI,oBAAqB,IACtC,MAEF,IAAK,kBACHpC,EAAaoC,IAAI,kBAAmBX,EAAMP,kBAI1CO,EAAMrB,MAAMiC,OAAS,GACvBrC,EAAaoC,IAAI,IAAKX,EAAMrB,OAG9B,IAAMmC,EAAqBvC,EAAawC,WAExC,MAA2B,KAAvBD,EACKJ,EAED,GAAN,OAAUA,EAAV,YAAkBI,GDRNE,CAAUb,GACtBzC,OAAOuD,QAAQC,eAAUC,EAAW,GAAIV,GACxCR,EAASE,GACTL,EAAUsB,SAAQ,SAACC,GAAD,OAAOA,EAAElB,QAC1B,IAEH,MAAO,CAACH,EAAOO,GEpCF,ICqBFe,EAA+C,CAC1DC,QAAS,CACPC,YAAa,CACX,CAAC,WAAY,aACb,CAAC,YAAa,oBAEhBC,cAAe,CACb,CAAC,UAAW,WACZ,CAAC,UAAW,YAEdC,MD/BW,IAA0B,oCCgCrCC,gBAAiB,WAEnB,YAAa,CACXH,YAAa,CACX,EAAE,QAAS,UACX,EAAE,QAAS,WAEbC,cAAe,CACb,EAAE,UAAW,YACb,EAAE,UAAW,aAEfC,MC3CW,IAA0B,sCD4CrCC,gBAAiB,WAEnBC,OAAQ,CACNJ,YAAa,CACX,EAAE,SAAU,UACZ,EAAE,QAAS,YAEbC,cAAe,CACb,EAAE,UAAW,YACb,EAAE,UAAW,aAEfC,MEvDW,IAA0B,mCFwDrCC,gBAAiB,WAEnBE,UAAW,CACTL,YAAa,CACX,CAAC,QAAS,SACV,CAAC,QAAS,UAEZC,cAAe,CACb,CAAC,UAAW,WACZ,CAAC,UAAW,YAEdC,MGnEW,IAA0B,sCHoErCC,gBAAiB,WAEnBG,OAAQ,CACNN,YAAa,CACX,CAAC,SAAU,OACX,CAAC,SAAU,QAEbC,cAAe,CACb,CAAC,WAAY,SACb,CAAC,WAAY,UAEfC,MI/EW,IAA0B,mCJgFrCC,gBAAiB,WAEnB,iBAAkB,CAChBH,YAAa,CACX,EAAE,SAAU,WACZ,EAAE,SAAU,YAEdC,cAAe,CACb,EAAE,UAAW,YACb,EAAE,UAAW,aAEfC,MK3FW,IAA0B,2CL4FrCC,gBAAiB,WAEnB,WAAY,CACVH,YAAa,CACX,CAAC,UAAW,SACZ,CAAC,UAAW,UAEdC,cAAe,CACb,CAAC,WAAY,WACb,CAAC,WAAY,YAEfC,MMvGW,IAA0B,qCNwGrCC,gBAAiB,WAEnBI,MAAO,CACLP,YAAa,CACX,CAAC,QAAS,QACV,CAAC,SAAU,SAEbC,cAAe,CACb,CAAC,UAAW,UACZ,CAAC,UAAW,WAEdC,MOnHW,IAA0B,kCPoHrCC,gBAAiB,WAEnBK,SAAU,CACRR,YAAa,CACX,CAAC,SAAU,UACX,CAAC,SAAU,SAEbC,cAAe,CACb,CAAC,WAAY,WACb,CAAC,WAAY,YAEfC,MQ/HW,IAA0B,qCRgIrCC,gBAAiB,WAEnBM,QAAS,CACPT,YAAa,CACX,EAAE,SAAU,WACZ,EAAE,SAAU,YAEdC,cAAe,CACb,EAAE,UAAW,WACb,EAAE,UAAW,aAEfC,MS3IW,IAA0B,oCT4IrCC,gBAAiB,WAEnBO,UAAW,CACTV,YAAa,CACX,CAAC,SAAU,OACX,CAAC,SAAU,SAEbC,cAAe,CACb,CAAC,WAAY,UACb,CAAC,WAAY,WAEfC,MUvJW,IAA0B,sCVwJrCC,gBAAiB,YWpJd,SAASjD,EACdyD,GAEA,GAA8B,OAA1BA,EAASC,aAIb,OAAOrE,IAAOC,MAAK,SAACS,GAClB,IACM4D,EADcf,EAAa7C,EAAMP,MAChBsD,YACvB,OACEa,EAAG,GAAG,IAAMF,EAASC,aAAc,IACnCD,EAASC,aAAc,IAAMC,EAAG,GAAG,IACnCA,EAAG,GAAG,IAAMF,EAASC,aAAc,IACnCD,EAASC,aAAc,IAAMC,EAAG,GAAG,M,6BCVlC,SAASC,IACd,IAAMC,EAAczF,EAAoBV,GACxC,OAAoB,OAAhBmG,EACK,KAEFC,KAAKC,MAAMF,GAGb,SAASG,EAAiBC,GAC/BpG,EAAoBH,EAAiBoG,KAAKI,UAAUD,IAG/C,SAAeE,IAAtB,+B,4CAAO,4BAAAC,EAAA,yDACCH,EAAQL,IADT,wDAML/F,EAAoBH,EAAiB,MANhC,kBASG2G,IAAMC,KAAN,gDAAuD7B,EAAW,CACtE8B,OAAQ,CAAEC,aAAcP,EAAMO,gBAV7B,iH,sBCEA,SAASC,IACdzF,OAAOU,SAASgF,KApBlB,WACE,IAAMH,EAAS,IAAIzE,gBAWnB,OAVAyE,EAAOtC,IACL,QACA6B,KAAKI,UAAU,CACblC,KAAMhD,OAAOU,SAASE,SACtBD,OAAQgF,OAAOC,YACb,IAAI9E,gBAAgBd,OAAOU,SAASC,QAAQkF,cAK5C,GAAN,OAEM,2BAFN,6BAIqBN,EAAOlC,YAILyC,GAGlB,SAAeC,EAAtB,kC,4CAAO,WAAiCC,GAAjC,iBAAAZ,EAAA,6DACCrC,EADD,UAGC,2BAHD,4BAOkBsC,IAAMC,KAAYvC,EAAK,CAC5CkD,cAAeD,IARZ,cAOCE,EAPD,yBAWEA,EAASC,MAXX,4C,4CCvBP,SAASC,EAAYC,GACnB,OAAOvB,KAAKI,UAAU,CACpBnC,IAAKsD,EAAOtD,IACZwC,OAAQc,EAAOd,SAIZ,SAASe,IAId,IAAMC,EAAQ,IAAIC,EAEZC,EAAc,uCAAG,WACrBC,GADqB,eAAAtB,EAAA,yDAGfuB,EAAWP,EAAYM,GACN,QAAnBA,EAAQE,OAJS,qBAKfL,EAAMM,YAAYF,GALH,wBAMjBD,EAAQI,QAAR,2BAAuBJ,EAAQI,SAA/B,IAAwCC,OAAQ,SAN/B,SAOIR,EAAMS,YAAYL,GAPtB,aAOjBD,EAAQP,KAPS,OAQXO,EARW,QAUjBH,EAAMU,gBAAgBN,GAVL,iCAadD,GAbc,4CAAH,sDA6BpB,MAAO,CACLA,QAASD,EACTP,SAAU,CAfY,SAACA,GAA4C,IAAD,EAIlE,MAHoD,SAAhD,UAAAA,EAASG,OAAOO,cAAhB,eAAwBM,sBAC1BX,EAAMY,cAAcf,EAAYF,EAASG,QAASH,EAASC,MAEtDD,GAEoB,SAACkB,GAC5B,MAAmC,SAA/BA,EAAYN,QAAQC,OACfM,QAAQC,QAAQF,GAElBC,QAAQE,OAAOH,M,QASpBZ,E,iDACIgB,MAAsC,G,KAEtC7I,QAAUC,c,mDAElB,SAAuBmE,GAAc,IAAD,OAClC0E,KAAKD,MAAMzE,GAAO,IAAIsE,SAAQ,SAACC,GAO7B,EAAK3I,QAAQmB,GAAGiD,GANA,SAAV2E,EAAWxB,GACf,EAAKvH,QAAQgJ,IAAI5E,EAAK2E,GAEtBJ,EAAQpB,W,2BAOd,SAAqBnD,EAAamD,GAChCuB,KAAK9I,QAAQQ,KAAK4D,EAAKmD,K,yBAGzB,SAAmBnD,GACjB,YAA2BU,IAApBgE,KAAKD,MAAMzE,K,yBAGpB,SAAmBA,GACjB,OAAI0E,KAAKZ,YAAY9D,GACZ0E,KAAKD,MAAMzE,GAGbsE,QAAQE,a,yBCrEbhB,GAAQD,IAERsB,GAAMvC,IAAMwC,OAAO,CACvBC,QAAS,kCAkCJ,SAAeC,GAAtB,mC,8CAAO,WAA6BC,GAA7B,eAAA5C,EAAA,sEACkBwC,GAAI1G,IAAJ,sBAAyC8G,IAD3D,cACC9B,EADD,yBAEEA,EAASC,MAFX,4C,sBAKA,SAAe8B,GAAtB,mC,8CAAO,WAAoCD,GAApC,eAAA5C,EAAA,sEACkBwC,GAAI1G,IAAJ,sBAYN8G,EAZM,YAYgB,CACrCzC,OAAQ,CACN2C,KAAM,CACJ,WACA,SACA,OACA,WACA,UACA,kBACA,QACA,UACA,aACA/E,KAAK,KACPgF,aAAa,KA1BZ,cACCjC,EADD,yBA6BEA,EAASC,MA7BX,4C,sBAgCA,SAAeiC,GAAtB,mC,8CAAO,WAA4BC,GAA5B,eAAAjD,EAAA,sEACkBwC,GAAI1G,IAAJ,oBAAsCmH,IADxD,cACCnC,EADD,yBAEEA,EAASC,MAFX,4C,sBAYA,SAAemC,KAAtB,gC,8CAAO,0CAAAlD,EAAA,6DACLG,EADK,+BACwC,GADxC,SAGkBqC,GAAI1G,IAAJ,sBAAkD,CAAEqE,WAHtE,cAGCW,EAHD,yBAIEA,EAASC,MAJX,2C,yBC9FA,SAAeoC,GAAtB,mC,8CAAO,WACLP,GADK,mBAAA5C,EAAA,sEAGa2C,GAAcC,GAH3B,UAGCQ,EAHD,OAKCzH,EAAQC,EAASwH,GALlB,sBAQG,IAAIC,MAAM,sCARb,mBAYCD,EAAIE,GAAGrF,WAZR,KAaGmF,EAAIG,KAbP,KAcQH,EAAII,QAAQF,GAAGrF,WAdvB,KAeOmF,EAAIK,SAAW,IAftB,KAgBQL,EAAIM,qBAhBZ,KAiBGN,EAAIO,YAjBP,KAkBIhI,EAlBJ,KAmBOyH,EAAIQ,cAnBX,eAoBOR,EAAIS,OAAOC,eApBlB,aAoBO,EAAoBC,KAAK,KApBhC,UAqBYC,GAA2BpB,GArBvC,8CAYHU,GAZG,KAaHC,KAbG,KAcHU,UAdG,KAeHR,SAfG,KAgBHS,UAhBG,KAiBHC,KAjBG,KAkBHxI,MAlBG,KAmBHyI,SAnBG,KAoBHC,SApBG,KAqBHC,QArBG,oD,+BAyBQN,G,iFAAf,WACEpB,GADF,qBAAA5C,EAAA,sEAGwB6C,GAAqBD,GAH7C,cAGQ0B,EAHR,yBAKS,CACLC,SAAUD,EAAQC,SAASxD,KAC3ByD,QAAO,UAAEF,EAAQE,eAAV,aAAE,EAAiBzD,KAC1B0C,SAAUa,EAAQb,SAAS1C,KAC3B0D,UAAS,UAAEH,EAAQG,iBAAV,aAAE,EAAmB1D,KAC9B2D,OAAQJ,EAAQI,OAAO3D,KACvBoD,KAAMG,EAAQH,KAAKpD,KACnB4D,SAAUL,EAAQM,gBAAgB7D,KAClC8D,MAAK,UAAEP,EAAQO,aAAV,aAAE,EAAe9D,OAb1B,4C,sBDXAyB,GAAIsC,aAAaxD,QAAQyD,IAAI5D,GAAMG,UACnC,EAAAkB,GAAIsC,aAAahE,UAASiE,IAA1B,oBAAiC5D,GAAML,WAEvC0B,GAAIsC,aAAaxD,QAAQyD,IAAzB,+BAAA/E,EAAA,MAA6B,WAAOiB,GAAP,eAAAjB,EAAA,2DACvBH,EAAQL,KADe,sBAIrBK,EAAMmF,WAAaC,KAAKC,MAAMC,KAAKC,MAAQ,MAJtB,0CAMPzE,EAAkBd,EAAMgB,eANjB,OAOrBjB,EADAC,EANqB,2EASfE,IATe,iCAUdkB,GAVc,QAczBA,EAAOS,QAAP,2BACKT,EAAOS,SADZ,IAEE2D,cAAc,GAAD,OAAKxF,EAAMyF,WAAX,YAAyBzF,EAAMO,gBAhBrB,iCAoBpBa,GApBoB,0DAA7B,uDAuBAuB,GAAIsC,aAAahE,SAASiE,IAAIQ,KAA9B,+BAAAvF,EAAA,MAAwC,WAAOwF,GAAP,SAAAxF,EAAA,sEAChCD,IADgC,gCAE/ByF,GAF+B,2CAAxC,uDExCA,IAAMrE,GAAQD,IACRsB,GAAMvC,IAAMwC,SAIX,SAAegD,GAAtB,uC,8CAAO,WAGLC,EACAhJ,EACAiJ,GALK,eAAA3F,EAAA,sEAOkBwC,GAAI1G,IAAJ,UAAkCY,EAAlC,YAA0CgJ,EAA1C,YAAyDC,EAAzD,UAPlB,cAOC7E,EAPD,yBAQEA,EAASC,MARX,4C,sBAWA,SAAe6E,GAAtB,uC,8CAAO,WAGLF,EACAhJ,EACA4H,GALK,eAAAtE,EAAA,sEAOoBiC,QAAQ4D,IAC/BvB,EAAQhI,KAAI,SAACqJ,GAAD,OAAYF,GAAuBC,EAAahJ,EAAMiJ,OAR/D,cAOCG,EAPD,yBAYEvF,OAAOC,YACZ8D,EAAQhI,KAAI,SAACqJ,EAAQI,GAAT,MAAe,CAACJ,EAAQG,EAAWC,SAb5C,4C,sBAdPvD,GAAIsC,aAAaxD,QAAQyD,IAAI5D,GAAMG,UACnC,EAAAkB,GAAIsC,aAAahE,UAASiE,IAA1B,oBAAiC5D,GAAML,W,gECDjCkF,GAAU,YAAI/K,KACjBgL,MAAK,SAACjG,EAAGkG,GAAJ,OAAUlG,EAAEuD,KAAK4C,cAAcD,EAAE3C,SACtCjH,KAAI,SAACX,GAAD,MAAY,CACfyK,MAAOzK,EAAM4H,KACb5J,MAAOgC,EAAMP,SAGV,SAASiL,KACd,MAA0CpJ,IAA1C,mBAAOqJ,EAAP,KAAsBC,EAAtB,KAEA,OACE,sBAAKC,UAAWC,KAAOC,UAAvB,SACE,eAACC,GAAA,EAAD,CACErD,GAAG,eACH0C,QAASA,GACTrM,MAAO2M,EAAc3K,MAAMP,KAC3BwL,aAAc,CAAEC,OAAQ,KACxBC,SAAU,SAACC,GACTR,EAAiB,CACf5K,MAAOV,IAAOC,MAAK,SAACC,GAAD,OAAOA,EAAEC,OAAS2L,KACrClL,MAAO,GACPa,KAAM,iBCEH,SAASsK,GAAT,GAAgE,IAA5CC,EAA2C,EAA3CA,mBAAoBC,EAAuB,EAAvBA,aACrD,EAAwBjK,IAAjBqJ,EAAP,oBACM3K,EAAQ2K,EAAc3K,MACtBwL,EAAc3I,EAAa7C,EAAMP,MAEvC,EAAyCgM,YAAQ,uCAC/C,WAAOlK,GAAP,eAAA8C,EAAA,yDACqB,UAAf9C,EAAMR,KADZ,yCAEW,IAFX,uBAI+BuF,QAAQ4D,IACnC3I,EAAMX,SAASD,KAAI,SAACE,GAAD,OACjBiJ,GAAuBjJ,EAAEpB,KAAM,WAAY,cANjD,cAIQiM,EAJR,yBASSnK,EAAMX,SAASD,KAAI,SAACE,EAAGuJ,GAAJ,mBAAC,eACtBvJ,GADqB,IAExB8K,WAAYD,EAAetB,SAX/B,2CAD+C,sDAe/C,CAACO,IAfaiB,EAAhB,EAAQC,OAkBR,EAAsBrN,qBAAtB,mBAAOmC,EAAP,KAAYmL,EAAZ,KACAnN,qBAAU,WACL,OAAHgC,QAAG,IAAHA,KAAKoL,YAAYC,YAAY,cAC5B,CAACrL,IAEJ,MAAuC8K,YAAQ,uCAC7C,WAAO1K,EAAcV,GAArB,SAAAgE,EAAA,yDACe,UAATtD,EADN,iEAKekJ,GAAwB5J,EAAOZ,KAAM,SAAU,CAC1D,WACA,WAPJ,mFAD6C,wDAW7C,CAACkL,EAAc5J,KAAO4J,EAAqCtK,QAX7C4L,EAAhB,EAAQJ,OAcFK,EAAmB3N,IACzB,EAAmCkN,YAAQ,uCACzC,WAAOU,EAAmB5K,GAA1B,SAAA8C,EAAA,yDACO8H,GAA2B,oBAAf5K,EAAMR,KADzB,iEAIeyG,GAAkBjG,EAAMP,kBAJvC,mFADyC,wDAOzC,CAACkL,EAAkBvB,IAPLyB,EAAhB,EAAQP,OAUR,EAA8CJ,YAAQ,uCACpD,WAAOjL,GAAP,SAAA6D,EAAA,8DACY3B,IAANlC,EADN,iEAKeyJ,GAAwBzJ,EAAG,SAAU,CAAC,WALrD,mFADoD,sDAQpD,CAAC+K,IARac,EAAhB,EAAQR,OAWRlN,qBAAU,WACR,GAAKgC,GAAQsL,EAAb,CAIA,IAAMK,EAASL,EAAmBlD,OAAOwD,QACvC,SAACD,EAAQE,GAAT,OAAmBF,EAAOG,OAAOD,KACjC,IAAIE,eACFT,EAAmBlD,OAAO,GAC1BkD,EAAmBlD,OAAO,KAI9BpI,EAAIgM,iBACJhM,EAAIiM,UAAUN,MACb,CAAC3L,EAAKsL,EAAoBT,IAE7B7M,qBAAU,WACR,GAAKgC,EAAL,CAIA,IAAM6K,EAAc3I,EAAa8H,EAAc3K,MAAMP,MAErDkB,EAAIgM,iBACJhM,EAAIkM,aAAarB,EAAYzI,aAE7B,IAAM+J,EAAUnM,EAAIoM,cAAcvB,EAAYzI,aAAa,GAC3DpC,EAAIqM,WAAWF,GAEY,UAAvBnC,EAAc5J,MAChBJ,EAAIiM,UAAUpB,EAAYxI,kBAE3B,CAACrC,EAAKgK,EAAc3K,MAAO2K,EAAc5J,OAE5C,IAAMkM,EAAmBC,mBAAsC,WAC7D,GAAKjB,GAAuBX,EAA5B,CAIA,IAAM6B,EAAalB,EAAmBnE,SAASsF,WAC7C,SAACC,GAAD,OAAOA,EAAyB,IAArB/B,KAEb,GAAK6B,EAGL,OAAOlB,EAAmBlD,OAAOoE,MAChC,CAAClB,EAAoBX,IAExB,OACE,uBAAKT,UAAWC,KAAOC,UAAvB,UACE,eAACL,GAAD,IACA,gBAAC4C,EAAA,EAAD,CAEEC,YAAa,SAAC5M,GAAD,OAASmL,EAAOnL,IAC7B2L,OAAQd,EAAYzI,YACpByK,MAAO,CAAEtK,gBAAiBsI,EAAYtI,iBACtCuK,QAAS,GACT5C,UAAWC,KAAOwC,aANpB,UAQE,eAACI,EAAA,EAAD,CACE1L,IAAKwJ,EAAYvI,MACjBqJ,OAAQd,EAAYzI,YACpB4K,YAAY,0EAGbtB,GACC,eAACuB,EAAA,EAAD,CAAMhG,KAAK,gBAAgB4F,MAAO,CAAEtC,OAAQ,KAA5C,SACE,eAAC2C,EAAA,EAAD,CACEC,UAAWzB,EAA0BtD,OACrCgF,YAAa,CAAEC,MAAO,UAAWC,OAAQ,OAK9ChC,GACC,eAAC2B,EAAA,EAAD,CAAMhG,KAAK,QAAQ4F,MAAO,CAAEtC,OAAQ,KAApC,SACE,eAAC2C,EAAA,EAAD,CACEC,UAAW7B,EAAmBlD,OAC9BgF,YAAa,CAAEC,MAAO,UAAWC,OAAQ,OAK9C7B,GACC,eAACwB,EAAA,EAAD,CAAMhG,KAAK,kBAAkB4F,MAAO,CAAEtC,OAAQ,KAA9C,SACE,eAAC2C,EAAA,EAAD,CACEC,UAAW1B,EAAezD,QAAQI,OAClCgF,YAAa,CAAEC,MAAO,UAAWC,OAAQ,OAK9CrC,GACC,eAACgC,EAAA,EAAD,CAAMhG,KAAK,WAAW4F,MAAO,CAAEtC,OAAQ,KAAvC,gBACGU,QADH,IACGA,OADH,EACGA,EAAsBjL,KAAI,SAACE,GAAD,OACzB,eAACgN,EAAA,EAAD,CAEEC,UAAWjN,EAAE8K,WACboC,YAAa,CAAEC,MAAO,UAAWC,OAAQ,IAFpCpN,EAAEpB,WAQdwN,GACC,eAACW,EAAA,EAAD,CAAMhG,KAAK,iBAAiB4F,MAAO,CAAEtC,OAAQ,KAA7C,SACE,eAACgD,EAAA,EAAD,CACEC,OAAQlB,EACRmB,OAAQ,GACRL,YAAa,CACXC,MAAO,QACPK,UAAW,QACXC,YAAa,SA5DhB3D,EAAc3K,MAAMP,S,qNClJlB,w+DCGT8O,GAAoB,WAGpBlN,GAAwB,GAE9B,SAASmN,KACP,IAAK,IAAD,MACIC,EAAW,UAAGxQ,aAAaK,QAAQiQ,WAAxB,QAA8C,KACzDG,EAA8B3K,KAAKC,MAAMyK,GAE/C,MAAO,CACLE,MAAK,UAAED,EAASC,aAAX,QAAoB,UACzBC,MAAK,UAAEF,EAASE,aAAX,QAAoB,UAE3B,SACA,MAAO,CACLD,MAAO,UACPC,MAAO,WASN,SAASC,KACd,MAAgCrQ,mBAASgQ,IAAzC,mBAAOE,EAAP,KAAiBI,EAAjB,KAEAnQ,qBAAU,WACR,IAAME,EAAqB,SAACkQ,GAAD,OAAiBD,EAAYC,IAGxD,OAFA1N,GAAUM,KAAK9C,GAER,WACLwC,GAAUO,OAAOP,GAAUQ,QAAQhD,GAAW,MAE/C,CAAC6P,IAEJ,IAAMM,EAAiBjN,uBAAY,SAACgN,GAClCD,EAAYC,GAjBhB,SAAsBL,GACpBzQ,aAAaE,QAAQoQ,GAAmBxK,KAAKI,UAAUuK,IAiBrDO,CAAaF,GACb1N,GAAUsB,SAAQ,SAAC9D,GAAD,OAAcA,EAASkQ,QACxC,IAEH,MAAO,CAACL,EAAUM,GC7CpB,IAAME,GAAe,IAAIC,KAAKC,aAAa,QAAS,CAClDC,sBAAuB,EACvBC,sBAAuB,EACvB9B,MAAO,YAGH+B,GAAiB,IAAIJ,KAAKC,aAAa,QAAS,CACpDC,sBAAuB,EACvBC,sBAAuB,EACvB9B,MAAO,YAOF,SAASgC,GAAT,GAAwC,IAApB1H,EAAmB,EAAnBA,SACzB,EAAmB+G,KACnB,OADA,oBACiBD,OACf,IAAK,WACH,IAAM5Q,EAAQ8J,EAAW,MACzB,OAAI9J,EAAQ,GACH,uCAAGuR,GAAeE,OAAe,KAARzR,GAAzB,QAEA,uCAAGkR,GAAaO,OAAOzR,GAAvB,QAGX,IAAK,SACH,OAAI8J,EAAW,EACN,uCAAGyH,GAAeE,OAAkB,IAAX3H,GAAzB,OAEA,uCAAGoH,GAAaO,OAAO3H,GAAvB,SC/Bf,IAAMyH,GAAiB,IAAIJ,KAAKC,aAAa,QAAS,CACpDC,sBAAuB,EACvBC,sBAAuB,EACvB9B,MAAO,YAOF,SAASkC,GAAT,GAA0C,IAArBnH,EAAoB,EAApBA,UAC1B,EAAmBsG,KACnB,OADA,oBACiBD,OACf,IAAK,WACH,OAAO,uCAAGW,GAAeE,OAAmB,QAAZlH,GAAzB,QACT,IAAK,SACH,OAAO,uCAAGgH,GAAeE,OAAOlH,GAAzB,Q,+FClBN,SAASoH,KACd,OACE,kCAAgBhI,GAAG,iBAAkBiI,GAAG,IAAIC,GAAG,IAAIC,GAAG,IAAIC,GAAG,IAA7D,UACE,uBAAMC,OAAO,KAAKC,UAAU,QAAQC,YAAa,KACjD,uBAAMF,OAAO,MAAMC,UAAU,QAAQC,YAAa,OC2BxD,IAAMC,GAAmB,CAAC,WAAY,YAE/B,SAASC,GAAT,GAAuE,IAA7C/P,EAA4C,EAA5CA,MAAOgQ,EAAqC,EAArCA,2BACtBvP,EAAY2K,YAE1BxB,GAAyB,CAAC5J,EAAMZ,KAAM,SAAU0Q,KAF1CtE,OAIR,EAAkCrN,wBAAgCkE,GAAlE,mBAAO4N,EAAP,KAAkBC,EAAlB,KAEMC,EAAkB,SAACpL,GACvBiL,EAA0B,OAACjL,QAAD,IAACA,OAAD,EAACA,EAAM0C,UACjCyI,EAAanL,IAGTA,EAA0B8H,mBAAQ,WACtC,QAAgBxK,IAAZ5B,EAIJ,OAAO2P,KACL3P,EAAQgH,SAASnH,KAAI,SAACmH,EAAU4I,GAAX,MAAsB,CACzC5I,SAAUwB,KAAKC,MAAMzB,EAAW,IAAM,IACtCS,UAAWzH,EAAQ8H,SAAS8H,QAE9B,SAACrM,EAAGkG,GAAJ,OAAUlG,EAAEyD,WAAayC,EAAEzC,cAE5B,CAAChH,IAEJ,YAAa4B,IAAT0C,EACK,KAIP,uBAAKoI,MAAO,CAAEmD,MAAO,OAAQC,OAAQ,IAAKC,aAAc,OAAxD,UACE,eAACC,GAAA,EAAD,CAAqBH,MAAM,OAAOC,OAAO,OAAzC,SACE,gBAACG,GAAA,EAAD,CACE3L,KAAMA,EACN4L,OAAQ,CACNC,IAAK,GACLC,MAAO,GACPC,KAAM,GACNC,OAAQ,IAGVC,UAAU,UATZ,UAWE,gCACE,eAAC1B,GAAD,MAEF,eAAC2B,GAAA,EAAD,CAAeC,UAAU,IACzB,eAACC,GAAA,EAAD,CACE5J,KAAK,WACL6J,QAAQ,WACR1Q,KAAK,SACL2Q,eAAe,EACfC,MAAM,EACNC,KAAK,KACLC,OAAQ,CAAC,EAAG,WACZC,MAAM,IAER,eAACC,GAAA,EAAD,CACEnK,KAAK,YACL7G,KAAK,SACL2Q,eAAe,EACfM,UAAW,EACXH,OAAQ,CAAC,UAAW,QACpBD,KAAK,IACLE,MAAM,IAER,eAACG,GAAA,EAAD,CACEC,QAAS,SAACC,GAAD,OACP,eAACC,GAAD,2BAAoBD,GAApB,IAA2BE,YAAa7B,MAE1C8B,mBAAmB,EACnBC,SAAU,CAAEC,EAAG,IACfC,OAAQ,CAAEC,OAAQ,WAEpB,eAACC,GAAA,EAAD,CACE5R,KAAK,WACL0Q,QAAQ,YACR7J,KAAK,YACL8K,OAAO,QACPpE,YAAa,EACbsE,KAAK,uBACLhB,KAAK,IACLU,mBAAmB,SAIzB,uBAAK9E,MAAO,CAAEqF,QAAS,OAAQC,IAAK,OAApC,UACE,gBAACC,GAAA,EAAD,CAAMhS,KAAK,SAASyM,MAAO,CAAEwF,WAAY,UAAzC,sBACY,KACA,OAAT1C,QAAS,IAATA,OAAA,EAAAA,EAAWxI,UACV,eAAC0H,GAAD,CAAU1H,SAAUwI,EAAUxI,WAE9B,UAGJ,gBAACiL,GAAA,EAAD,CAAMhS,KAAK,SAASyM,MAAO,CAAEwF,WAAY,UAAzC,sBACY,KACA,OAAT1C,QAAS,IAATA,OAAA,EAAAA,EAAW1H,UACV,eAAC8G,GAAD,CAAWnH,UAAW+H,EAAU1H,WAEhC,eAYZ,SAASwJ,GAAeD,GAYtB,OAXAxT,qBAAU,gBACc+D,IAAlByP,EAAMc,SAAkD,IAAzBd,EAAMc,QAAQ9Q,OAC/CgQ,EAAME,iBAAY3P,GAElByP,EAAME,YAAY,CAChBvK,SAAUqK,EAAMc,QAAQ,GAAGA,QAAQnL,SACnCc,SAAUuJ,EAAMc,QAAQ,GAAGA,QAAQ1K,cAGtC,CAAC4J,IAEG,K,IC5JL3M,GA2EQ0N,GAaAC,G,+BAtFL,SAAeC,KAAtB,gC,8CAAO,sBAAA/O,EAAA,6DACAmB,KACHA,GAAQlB,IACLnE,IACC,6DAEDkT,MAAK,SAAC7S,GAAD,OAAOA,EAAE4E,SANd,SASQI,GATR,oF,sBCWA,SAAS8N,GAAT,GAAwC,IAAjBjT,EAAgB,EAAhBA,MACZkT,EAAW9H,YAAS2H,GAAa,IAAzCvH,OACF2H,EAAiBtG,mBAAQ,WAC7B,GAAKqG,EAIL,OAAOA,EACJhT,QAAO,SAACkT,GACP,IAAMC,EAAa,CACjBD,EAAME,SADW,mBAEdF,EAAMG,eAAejT,KAAI,SAACkT,GAAD,OAASA,EAAIF,aAG3C,OAAOtT,EAAMsH,IAAM+L,EAAcI,SAASzT,EAAMsH,OAEjD2C,MAAK,SAACjG,EAAGkG,GAAJ,OAAUlG,EAAE0P,WAAWvJ,cAAcD,EAAEwJ,iBAC9C,CAACR,EAAQlT,IAEZ,YAAuBqC,IAAnB8Q,EAEA,eAACQ,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CACEtM,GAAG,iBACHuM,OAAK,EACLC,YAAa,CAAEzB,OAAQ,aAMD,IAA1Bc,EAAerR,OAEf,eAAC6R,GAAA,EAAD,UACE,eAACjB,GAAA,EAAD,CAAMhS,KAAK,SAAX,8CAMJ,uCACGyS,EAAetS,MAAM,EAAG,GAAGP,KAAI,SAAC8S,GAAD,aAC9B,eAACW,GAAA,EAAD,CAEEC,QAAS,kBACPpV,OAAOqV,KAAP,uCAA4Cb,EAAM9L,IAAM,WAE1D4M,WAAY,eAACC,GAAA,EAAD,IACZC,eAAe,OACfC,cACE,uCACG,IAAIvF,KAAKwF,eAAe,QAAS,CAChCC,KAAM,UACNC,OAAQ,UACRC,QAAS,UACRrF,OAAOjG,KAAKxF,MAAMyP,EAAMM,aAC3B,wBANF,UAOGgB,GAAWtB,EAAMuB,kBAPpB,QAOkCvB,EAAMuB,UAPxC,SAQ8B,IAA3BvB,EAAMwB,iBACL,eAACzF,GAAD,CAAU1H,SAAU2L,EAAMwB,iBAAmB,MAC3CxB,EAAMyB,kBAAoB,EAC5B,uCAAG3L,KAAMkK,EAAMyB,mBAAqB,GAApC,SAEA,qCAAkB,IAAfzB,EAAM0B,KAAN,kBAAgC1B,EAAM0B,KAAtC,cAITC,YAAU,EAzBZ,SA2BG3B,EAAM7L,MA1BF6L,EAAM9L,OA6Bd6L,EAAerR,OAAS,GACvB,eAAC6R,GAAA,EAAD,UACE,gBAACjB,GAAA,EAAD,CAAMhS,KAAK,SAAX,UACGyS,EAAerR,OAAS,EAD3B,QACmC,IACN,IAA1BqR,EAAerR,OAAe,QAAU,SAF3C,4B,SDZE+Q,K,sCAAAA,E,qCAAAA,E,6CAAAA,Q,cAaAC,K,yDAAAA,E,wDAAAA,Q,KCSZ,IAAM4B,GAAmD,CACvDM,WAAY,aACZC,cAAe,UACfC,KAAM,OACNC,WAAY,c,oBCnGP,SAASC,GAAT,GAAiD,IAAxBC,EAAuB,EAAhCC,QACfA,EAAUD,EAAe,GACzBE,GAAYF,EAAeC,GAAW,GAAM,GAC5CE,IAAUH,EAAeC,GAAW,GAAKC,GAAW,GAE1D,OAAc,IAAVC,EACc,IAAZD,EACK,uCAAGD,EAAH,OAGL,uCACGC,EADH,IACaD,EAAQrT,WAAWwT,SAAS,EAAG,KAD5C,SAOF,uCACGD,EADH,IACWD,EAAQtT,WAAWwT,SAAS,EAAG,KAD1C,IAEGH,EAAQrT,WAAWwT,SAAS,EAAG,KAFlC,OCDC,SAASC,GAAT,GAA0C,IAAjB1V,EAAgB,EAAhBA,MAC9B,EAA0CiB,IAA1C,mBAAOqJ,EAAP,KAAsBC,EAAtB,KACMoL,EAAkBpV,IACrBL,QAAO,SAACM,GAAD,OAAOA,EAAEb,QAAUK,EAAML,SAChCO,QAAO,SAACM,GAAD,OAAOR,EAAMO,SAASkT,SAASjT,EAAEpB,SACxC6K,MAAK,SAACjG,EAAGkG,GAAJ,OAAUlG,EAAEuD,KAAK4C,cAAcD,EAAE3C,SAEzC,GAA+B,IAA3BoO,EAAgB7T,OAClB,OACE,eAAC6R,GAAA,EAAD,UACE,eAACjB,GAAA,EAAD,CAAMhS,KAAK,SAAX,0CAKN,IAAMN,EAAoBkK,EAAqC/J,SAE/D,OACE,qCACGoV,EAAgBrV,KAAI,SAACG,GAAD,OACnB,eAACsT,GAAA,EAAD,CAEE6B,cAAsCvT,IAA5B5B,EAAQoV,gBAClBzB,eAAe,OACfF,gBAEE7R,IADA5B,EAAQoV,gBACI,KAAOzV,EAAiBqT,SAAShT,GAC3C,eAACqV,GAAA,EAAD,IAEA,eAACC,GAAA,EAAD,IAGJ1B,cAAe,eAAC2B,GAAD,CAAevV,QAASA,IACvCsU,YAAU,EACVf,QAAS,gBACyB3R,IAA5B5B,EAAQoV,kBAIRzV,EAAiBqT,SAAShT,GAC5B8J,EAAiB,2BACZD,GADW,IAEd5J,KAAM,QACNV,MAAQsK,EAAqCtK,MAC7CO,SAAUH,EAAiBF,QAAO,SAACM,GAAD,OAAOA,IAAMC,QAGjD8J,EAAiB,2BACZD,GADW,IAEd5J,KAAM,QACNV,MAAQsK,EAAqCtK,MAC7CO,SAAS,GAAD,mBAAMH,GAAN,CAAwBK,SA/BxC,SAoCGA,EAAQ8G,MAnCJ9G,EAAQrB,WA8CvB,SAAS4W,GAAT,GAAyD,IAAD,EAA/BvV,EAA+B,EAA/BA,QACjBrC,EAAaF,IACnB,EAAkCkN,YAAQ,uCACxC,WAAO6K,EAAyBnK,GAAhC,SAAA9H,EAAA,8DACc3B,IAAR4T,GAAsBnK,EAD5B,yCAEW,MAFX,uBAIe9E,GAAaiP,EAAIhU,YAJhC,mFADwC,wDAOxC,CAACxB,EAAQoV,gBAAiBzX,IAPZ8X,EAAhB,EAAQ1K,OASF2K,GACJ,iBAACD,QAAD,IAACA,OAAD,EAACA,EAAeE,sBAAsBC,oBAAtC,QAAsD,GAAK,EAA3D,OACIH,QADJ,IACIA,OADJ,EACIA,EAAeE,sBAAsBE,gBACrC,KAEN,OACE,uCACE,eAACnH,GAAD,CAAU1H,SAAUhH,EAAQgH,WAC3BhH,EAAQ8V,YACP,uCACG,IADH,IAEI,IACD,IAAIzH,KAAKC,aAAa,QAAS,CAC9BC,sBAAuB,EACvBC,sBAAuB,EACvB9B,MAAO,YACNiC,OAAO3O,EAAQ8V,WAAa,QAGnC,wBACCJ,EACC,8CACM,eAACf,GAAD,CAAME,QAASa,OAGrBK,GAAa/V,EAAQC,SAM7B,IAAM8V,GAAkD,CACtDC,MAAO,QACPC,OAAQ,SACRjW,QAAS,W,UCtHJ,SAASkW,GAAT,GAA0C,IAAjB3W,EAAgB,EAAhBA,MACxB6L,EAAmB3N,IAEzB,EAIIkN,YAAQ,uCACV,WAAOU,EAAmB7E,GAA1B,SAAAjD,EAAA,yDACO8H,QAA0BzJ,IAAd4E,EADnB,yCAEW,MAFX,uBAKeD,GAAaC,EAAUhF,YALtC,mFADU,wDAQV,CAAC4J,EAAkB7L,EAAM6V,kBAXjBpV,EADV,EACE+K,OACAoL,EAFF,EAEEA,QACApN,EAHF,EAGEA,MAYF,GAAIoN,EACF,OACE,eAACjD,GAAA,EAAD,CACEkD,UAAW,eAACC,GAAA,EAAD,IACXC,cAAc,OACd7C,WAAY,eAAC8C,GAAA,EAAD,IACZ5C,eAAe,OAJjB,SAME,eAACR,GAAA,EAAD,CACEtM,GAAE,0BAAqBtH,EAAMsH,IAC7BwM,YAAa,CAAEzB,OAAQ,SACvBwB,OAAK,MAMb,GAAIrK,GAAqB,OAAZ/I,QAAgC4B,IAAZ5B,EAC/B,OAAO,KAOT,OACE,eAACsT,GAAA,EAAD,CACE8C,UAAW,eAACC,GAAA,EAAD,IACXC,cAAc,OACd7C,WAAY,eAAC8C,GAAA,EAAD,IACZ5C,eAAe,OACfJ,QAVgB,WAClBpV,OAAOqV,KAAP,0CAA+CxT,EAAQ6G,IAAM,WAI7D,SAOkD,IAA/C7G,EAAQ2V,sBAAsBC,aAC7B,qDAEA,eAACjB,GAAD,CAAME,QAAS7U,EAAQ2V,sBAAsBE,oBCpC9C,SAASW,GAAT,GAKI,IAJTjX,EAIQ,EAJRA,MACAgQ,EAGQ,EAHRA,2BACAkH,EAEQ,EAFRA,eACAC,EACQ,EADRA,kBAEMxX,EAAQV,IAAOC,MAAK,SAACC,GAAD,OAAOA,EAAEC,OAASY,EAAML,SAElD,OACE,gBAACyX,GAAA,EAAD,WACE,eAACzD,GAAA,EAAD,UACE,eAAC0D,GAAA,EAAD,CAAQC,UAAU,UAAUtD,QAASmD,EAArC,SACE,eAACI,GAAA,EAAD,CAAiBC,KAAM,eAACC,GAAA,EAAD,IAAvB,SACGP,QAIP,eAACvD,GAAA,EAAD,UACE,eAACjB,GAAA,EAAD,CAAMhS,KAAK,aAAayM,MAAO,CAAEwD,OAAQ,GAAzC,SACG3Q,EAAMuH,SAIX,gBAACoM,GAAA,EAAD,CACE+D,WAAW,EACXb,UAAW,eAACc,GAAA,EAAD,IACXZ,cAAc,OAHhB,UAKE,eAAC5H,GAAD,CAAU1H,SAAUzH,EAAMyH,gBACApF,IAAzBrC,EAAM4X,gBACL,8CAEE,wCAEE,eAACzI,GAAD,CAAU1H,SAAUzH,EAAM4X,iBAF5B,aAQN,gBAACjE,GAAA,EAAD,CACE+D,WAAW,EACXb,UAAW,eAACgB,GAAA,EAAD,IACXd,cAAc,OAHhB,UAKE,eAAC1H,GAAD,CAAWnH,UAAWlI,EAAMkI,iBACD7F,IAA1BrC,EAAM8X,iBACL,8CAEE,wCAEE,eAACzI,GAAD,CAAWnH,UAAWlI,EAAM8X,kBAF9B,aAQL9X,EAAM+X,YACL,gBAACpE,GAAA,EAAD,CACE+D,WAAW,EACXb,UAAW,eAACmB,GAAA,EAAD,IACXjB,cAAc,OAHhB,UAKG/W,EAAM+X,WALT,QASD/X,EAAMiY,WACL,eAACtE,GAAA,EAAD,CACE+D,WAAW,EACXb,UAAW,eAAC1C,GAAA,EAAD,IACX4C,cAAc,OAHhB,8BASF,eAACpD,GAAA,EAAD,CAAgB+D,WAAW,EAAOb,UAAW,eAACqB,GAAA,EAAD,IAA7C,SACGvY,EAAM4H,OAGT,eAACoP,GAAD,CAAe3W,MAAOA,IAEtB,eAAC2T,GAAA,EAAD,UACE,eAAC5D,GAAD,CACE/P,MAAOA,EACPgQ,2BAA4BA,MAIhC,eAACmI,GAAA,EAAD,8BACA,eAAClF,GAAD,CAAajT,MAAOA,IAEpB,eAACmY,GAAA,EAAD,uBACA,eAACzC,GAAD,CAAe1V,MAAOA,IAEtB,eAACmY,GAAA,EAAD,oBACCnY,EAAMoY,iBACL,eAACrE,GAAA,EAAD,CACEC,QAAS,kBAAMpV,OAAOqV,KAAKjU,EAAMoY,gBAAiB,WAClDvB,UACE,eAACwB,GAAA,EAAD,CAAQ1K,MAAM,UAAd,SACE,sBAAK2K,ICtIJ,8lKDsI2BC,IAAI,OAGpCxB,cAAc,SACd7C,WAAY,eAAC8C,GAAA,EAAD,IACZ5C,eAAe,OATjB,0BAcDpU,EAAMwY,kBACL,eAACzE,GAAA,EAAD,CACEC,QAAS,kBAAMpV,OAAOqV,KAAKjU,EAAMwY,iBAAkB,WACnD3B,UACE,eAACwB,GAAA,EAAD,CAAQ1K,MAAM,UAAd,SACE,sBAAK2K,IAAKG,GAAYF,IAAI,OAG9BxB,cAAc,SACd7C,WAAY,eAAC8C,GAAA,EAAD,IACZ5C,eAAe,OATjB,4BAcDpU,EAAM0Y,iBACL,eAAC3E,GAAA,EAAD,CACEC,QAAS,kBAAMpV,OAAOqV,KAAKjU,EAAM0Y,gBAAiB,WAClD7B,UACE,eAACwB,GAAA,EAAD,CAAQ1K,MAAM,UAAd,SACE,sBAAK2K,IEpKJ,itEFoK2BC,IAAI,OAGpCxB,cAAc,SACd7C,WAAY,eAAC8C,GAAA,EAAD,IACZ5C,eAAe,OATjB,gCGnID,SAASuE,GAAT,GAAuD,IAAtB/R,EAAqB,EAArBA,WAGtC,OAFyB1I,IAuBlB,eAAC0a,GAAD,CAAgChS,WAAYA,IAnB/C,eAACwQ,GAAA,EAAD,UACE,eAACrD,GAAA,EAAD,CACE8C,UACE,eAACwB,GAAA,EAAD,CAAQ1K,MAAM,UAAd,SACE,sBAAK2K,IAAKG,GAAYF,IAAI,OAG9BxB,cAAc,SACd7C,WAAY,eAAC8C,GAAA,EAAD,IACZ5C,eAAe,OACfC,cAAc,gCACdL,QAAS3P,EAVX,0CAqBR,SAASuU,GAAT,GAAgE,IAAtBhS,EAAqB,EAArBA,WACxC,EAA0C3F,IAA1C,mBAAOqJ,EAAP,KAAsBC,EAAtB,KAEA,EAAsCa,YAASjE,GAAmB,CAChEP,IADcvD,EAAhB,EAAQmI,OAAkBoL,EAA1B,EAA0BA,QAI1B,OAAKvT,EAuBH,gBAAC+T,GAAA,EAAD,WACE,eAACzD,GAAA,EAAD,UACE,eAAC0D,GAAA,EAAD,CACEC,UAAU,UACVtD,QAAS,WACPzJ,EAAiB,CACf5K,MAAO2K,EAAc3K,MACrBE,MAAOyK,EAAczK,MACrBa,KAAM,uBANZ,SAUE,eAAC6W,GAAA,EAAD,CAAiBC,KAAM,eAACC,GAAA,EAAD,IAAvB,mCAMJ,eAAC9D,GAAA,EAAD,UACE,eAACjB,GAAA,EAAD,CAAMhS,KAAK,aAAayM,MAAO,CAAEwD,OAAQ,GAAzC,SACGtN,EAASkE,SAId,eAACoM,GAAA,EAAD,CACE+D,WAAW,EACXb,UAAW,eAACC,GAAA,EAAD,IACXC,cAAc,OAHhB,SAKE,eAAC3B,GAAD,CAAME,QAASjS,EAAS8E,SAE1B,eAACwL,GAAA,EAAD,CACE+D,WAAW,EACXb,UAAW,eAACc,GAAA,EAAD,IACXZ,cAAc,OAHhB,SAKE,eAAC5H,GAAD,CAAU1H,SAAUpE,EAASoE,aAE/B,eAACkM,GAAA,EAAD,CACE+D,WAAW,EACXb,UAAW,eAACgB,GAAA,EAAD,IACXd,cAAc,OAHhB,SAKE,eAAC1H,GAAD,CAAWnH,UAAW7E,EAAS6E,cAEjC,eAACyL,GAAA,EAAD,CAAgB+D,WAAW,EAAOb,UAAW,eAACqB,GAAA,EAAD,IAA7C,SACG7U,EAAS1D,MAAM4H,OAGlB,eAAC4Q,GAAA,EAAD,oBACA,eAACpE,GAAA,EAAD,CACEC,QAAS,kBACPpV,OAAOqV,KAAP,4CACuC5Q,EAASiE,IAC9C,WAGJuP,UACE,eAACwB,GAAA,EAAD,CAAQ1K,MAAM,UAAd,SACE,sBAAK2K,IAAKG,GAAYF,IAAI,OAG9BxB,cAAc,SACd7C,WAAY,eAAC8C,GAAA,EAAD,IACZ5C,eAAe,OAdjB,mCAxEEwC,EAEA,eAAChD,GAAA,EAAD,CACEtM,GAAE,0BAAqBV,GACvBkN,YAAa,CAAEzB,OAAQ,WAKzB,eAAC+E,GAAA,EAAD,UACE,eAACzD,GAAA,EAAD,CACEU,cAAc,sEACdU,YAAU,EAFZ,iCCpEH,SAAS8D,GAAT,GAAwC,EAAhBlZ,MAC3B,OAAO,KCKJ,SAASmZ,GAAT,GAII,IAHT9I,EAGQ,EAHRA,2BACAkH,EAEQ,EAFRA,eACAC,EACQ,EADRA,kBAEA,EAAwBlW,IAAjBqJ,EAAP,oBAEA,MAA2B,UAAvBA,EAAc5J,KAEd,eAACuW,GAAD,CACEjX,MAAOsK,EAActK,MACrBgQ,2BAA4BA,EAC5BkH,eAAgBA,EAChBC,kBAAmBA,IAGS,oBAAvB7M,EAAc5J,KAErB,eAACiY,GAAD,CAAuB/R,WAAY0D,EAAc3J,mBAG5C,eAACkY,GAAD,CAAclZ,MAAO2K,EAAc3K,Q,6LChBvC,SAASoZ,GAAT,GAAkD,IAA5BC,EAA2B,EAA3BA,QAASC,EAAkB,EAAlBA,QACpC,OACE,gBAACC,GAAA,EAAD,CACE5R,GAAG,cACH,kBAAgB,oBAChB0R,QAASA,EACTG,eAAgBF,EAChBzO,UAAWC,KAAOyO,OALpB,UAOE,eAACE,GAAA,EAAD,CAAcjM,MAAO,CAAEkM,cAAe,GAAtC,SACE,eAACC,GAAA,EAAD,CAAahS,GAAG,oBAAhB,yBAEF,gBAACiS,GAAA,EAAD,WACE,eAAC7G,GAAA,EAAD,oEAEA,gBAACA,GAAA,EAAD,sDAC2C,IACzC,oBACEpO,KAAK,2CACLkV,IAAI,sBACJC,OAAO,SAHT,oBAFF,OAYA,gBAAC/G,GAAA,EAAD,2EACgE,OAEhE,gCACE,8BACE,oBACEpO,KAAK,qBACLkV,IAAI,sBACJC,OAAO,SAHT,sBAQF,8BACE,oBACEnV,KAAK,2BACLkV,IAAI,sBACJC,OAAO,SAHT,+BAQF,8BACE,oBACEnV,KAAK,oBACLkV,IAAI,sBACJC,OAAO,SAHT,qBAQF,8BACE,oBACEnV,KAAK,uBACLkV,IAAI,sBACJC,OAAO,SAHT,wBAQF,8BACE,oBACEnV,KAAK,yBACLkV,IAAI,sBACJC,OAAO,SAHT,8BAUJ,gBAAC/G,GAAA,EAAD,wCAC6B,IAC3B,oBAAGpO,KAAK,oBAAoBkV,IAAI,sBAAsBC,OAAO,SAA7D,mBAFF,OAQA,eAAC/G,GAAA,EAAD,uJAKA,eAACA,GAAA,EAAD,CAAMhS,KAAK,aAAayM,MAAO,CAAEwD,OAAQ,GAAzC,qBAGA,gBAAC+B,GAAA,EAAD,6BAEE,wBACA,oBACEpO,KAAK,2BACLkV,IAAI,sBACJC,OAAO,SAHT,+BAOA,wBAVF,2BAW2B,IACzB,oBACEnV,KAAK,2DACLkV,IAAI,sBACJC,OAAO,SAHT,0BASJ,eAACC,GAAA,EAAD,UACE,eAACrC,GAAA,EAAD,CAAQ/P,GAAG,eAAe0M,QAASiF,EAAnC,wB,wBClHD,SAASU,GAAT,GAAsD,IAA5BX,EAA2B,EAA3BA,QAASC,EAAkB,EAAlBA,QACxC,EAAgCzK,KAAhC,mBAAOH,EAAP,KAAiBI,EAAjB,KAEMmL,EAAoB,SAAC9a,GACrBA,EAAE2a,OAAOI,SACXpL,EAAY,2BAAKJ,GAAN,IAAgBC,MAAOxP,EAAE2a,OAAO9b,UAIzCmc,EAAoB,SAAChb,GACrBA,EAAE2a,OAAOI,SACXpL,EAAY,2BAAKJ,GAAN,IAAgBE,MAAOzP,EAAE2a,OAAO9b,UAI/C,OACE,gBAACub,GAAA,EAAD,CACE5R,GAAG,kBACH,kBAAgB,wBAChB0R,QAASA,EACTG,eAAgBF,EAJlB,UAME,eAACG,GAAA,EAAD,CAAcjM,MAAO,CAAEkM,cAAe,GAAtC,SACE,eAACC,GAAA,EAAD,CAAahS,GAAG,wBAAhB,wBAEF,gBAACiS,GAAA,EAAD,WACE,gBAACQ,GAAA,EAAD,CAAUC,OAAO,QAAjB,UACE,eAACC,GAAA,EAAD,CACE3S,GAAG,0BACHC,KAAK,wBACL6C,MAAM,UACNzM,MAAM,UACNkc,QAA4B,YAAnBxL,EAASC,MAClBxD,SAAU8O,IAEZ,eAACK,GAAA,EAAD,CACE3S,GAAG,0BACHC,KAAK,wBACL6C,MAAM,UACNzM,MAAM,UACNkc,QAA4B,YAAnBxL,EAASC,MAClBxD,SAAU8O,OAId,gBAACG,GAAA,EAAD,CAAUC,OAAO,QAAjB,UACE,eAACC,GAAA,EAAD,CACE3S,GAAG,yBACHC,KAAK,wBACL6C,MAAM,SACNzM,MAAM,SACNkc,QAA4B,WAAnBxL,EAASE,MAClBzD,SAAUgP,IAEZ,eAACG,GAAA,EAAD,CACE3S,GAAG,2BACHC,KAAK,wBACL6C,MAAM,WACNzM,MAAM,WACNkc,QAA4B,aAAnBxL,EAASE,MAClBzD,SAAUgP,UAIhB,eAACJ,GAAA,EAAD,UACE,eAACrC,GAAA,EAAD,CAAQ/P,GAAG,eAAe0M,QAASiF,EAAnC,wBC9DD,SAASiB,GAAT,GAAoD,IAA9BC,EAA6B,EAA7BA,mBACrBC,EAAYC,iBAA6B,MAC/C,EAAsClc,oBAAS,GAA/C,mBAAOmc,EAAP,KAAoBC,EAApB,KACA,EACEC,cAAU,GADZ,mBAAOC,EAAP,KAA8BC,EAA9B,KAAkDC,EAAlD,KAEA,EAA4DH,cAAU,GAAtE,mBAAOI,EAAP,KAA0BC,EAA1B,KAA0CC,EAA1C,KAEMC,EC1BCC,yBAAc,CACnBnb,MAAO,uBD0BHob,EAAmB/c,IAEzB,OACE,uCACE,eAAC6V,GAAA,EAAD,CACEC,QAAS,SAAClV,GACRA,EAAEoc,kBACFX,GAAgBD,IAElBpG,WAAY6G,EAAW,eAACI,GAAA,EAAD,IAAmB,eAACC,GAAA,EAAD,IAC1ChH,eAAe,OACf9M,GAAG,eACH+T,IAAKjB,EARP,kBAaA,eAACkB,GAAA,EAAD,CACEhU,GAAG,eACHiU,UAAU,eACVvC,QAASsB,EACTnB,eAAgB,kBAAMoB,GAAe,IACrC,kBAAgB,eAChBiB,OAAQC,KACRC,QAAM,EAPR,SASE,gBAACtE,GAAA,EAAD,WACE,eAACuE,GAAA,EAAD,CACE3H,QAAS,WACP6G,IACAV,KAEFtD,UAAW,eAAC+E,GAAA,EAAD,IACX7E,cAAc,OANhB,kBAUA,eAAC4E,GAAA,EAAD,CACE3H,QAAS,WACP0G,IACAP,KAEFtD,UAAW,eAACgF,GAAA,EAAD,IACX9E,cAAc,OANhB,sBAUA,eAAC+E,GAAA,EAAD,IACCb,EACC,eAACU,GAAA,EAAD,CACE3H,QAAS,WACPjQ,KAFJ,gCAQA,eAAC4X,GAAA,EAAD,CAAU3H,QAAS3P,EAAnB,kCAKN,eAACsV,GAAD,CACEX,QAASyB,EACTxB,QAAS0B,IAGX,eAAC5B,GAAD,CAAYC,QAAS4B,EAAmB3B,QAAS6B,OEnFvD,IAAMhL,GAAmB,CAAC,WAAY,YAE/B,SAASiM,GAAT,GAAkD,IAAjB/b,EAAgB,EAAhBA,MACtBS,EAAY2K,YAE1BxB,GAAyB,CAAC5J,EAAMZ,KAAM,SAAU0Q,KAF1CtE,OAIFzG,EAA0B8H,mBAAQ,WACtC,QAAgBxK,IAAZ5B,EAAJ,CAIA,IAAMub,EAAe5L,KACnB3P,EAAQgH,SAASnH,KAAI,SAACmH,EAAU4I,GAAX,MAAsB,CACzC5I,SAAUwB,KAAKC,MAAMzB,EAAW,KAAO,GACvCS,UAAWzH,EAAQ8H,SAAS8H,QAE9B,SAACrM,EAAGkG,GAAJ,OAAUlG,EAAEyD,WAAayC,EAAEzC,YAIvBwU,EAAkBhT,KAAKiT,IAAL,MAAAjT,KAAI,YAAQ+S,EAAa1b,KAAI,SAAC0M,GAAD,OAAOA,EAAE9E,eAC9D,OAAO8T,EAAa1b,KAAI,SAAC0M,GAAD,mBAAC,eACpBA,GADmB,IAEtB9E,UAAW8E,EAAE9E,UAAY+T,UAE1B,CAACxb,IAEJ,OAAKsE,EAWH,gBAAC2L,GAAA,EAAD,CACEH,OAAQ,GACRD,MAAO,IACPvL,KAAMA,EAENiM,UAAU,UALZ,UAOE,gCACE,eAAC1B,GAAD,MAGF,eAAC6B,GAAA,EAAD,CACEC,QAAQ,WACR1Q,KAAK,SACL8Q,OAAQ,CAAC,EAAG,WACZD,KAAK,KACLE,MAAM,IAGR,eAACC,GAAA,EAAD,CACEN,QAAQ,YACR1Q,KAAK,SACL2Q,eAAe,EACfG,OAAQ,CAAC,EAAG,KACZD,KAAK,IACLE,MAAM,IAGR,eAACa,GAAA,EAAD,CACE5R,KAAK,WACL0Q,QAAQ,YACR7J,KAAK,YACL8K,OAAO,QACPpE,YAAa,EACbsE,KAAK,uBACLhB,KAAK,IACLU,mBAAmB,OA7CrB,eAAC2B,GAAA,EAAD,CACEtM,GAAE,4BAAuBtH,EAAMZ,MAC/ByU,OAAK,EACLC,YAAa,CAAEzB,OAAQ,WChCxB,SAAS8J,GAAT,GAAuE,IAA9Cnc,EAA6C,EAA7CA,MAAOoc,EAAsC,EAAtCA,aAAcC,EAAwB,EAAxBA,cACnD,EAA0Cpb,IAA1C,mBAAOqJ,EAAP,KAAsBC,EAAtB,KAYA,OACE,eAACwJ,GAAA,EAAD,CACEM,cAAe,eAACiI,GAAD,CAAWtc,MAAOA,EAAOqc,cAAeA,IACvDtH,WAAYsH,EACZrI,QAfgB,WAClBzJ,EAAiB,CACf5K,MAAOV,IAAOC,MAAK,SAACC,GAAD,OAAOA,EAAEC,OAASY,EAAML,SAC3CK,QACAO,SAAU,GACVV,MAAOyK,EAAczK,MACrBa,KAAM,UAER0b,OAAa/Z,IAQX+R,eAAe,cACfF,WAAY,eAACqI,GAAD,CAAgBvc,MAAOA,IACnCwc,aAAc,kBAAMJ,EAAapc,EAAMZ,OACvCqd,aAAc,kBAAML,OAAa/Z,IAPnC,SASGrC,EAAMuH,OAUb,SAAS+U,GAAT,GAA8D,IAAzCtc,EAAwC,EAAxCA,MAAOqc,EAAiC,EAAjCA,cAC1B,OACE,uCACGA,GACC,uCACGpd,IAAOC,MAAK,SAACC,GAAD,OAAOA,EAAEC,OAASY,EAAML,SAAQ4H,KAC7C,2BAGJ,eAAC4H,GAAD,CAAU1H,SAAUzH,EAAMyH,WAP5B,KAO2C,IACzC,eAAC4H,GAAD,CAAWnH,UAAWlI,EAAMkI,eASlC,SAASqU,GAAT,GAAgD,IAAtBvc,EAAqB,EAArBA,MAClBqb,EAAMhB,iBAA8B,MAEpCqC,ECjED,SAAqBrB,GAC1B,MAA0Cld,oBAAS,GAAnD,mBAAOwe,EAAP,KAAuBC,EAAvB,KAiBA,OAhBAte,qBAAU,WACR,IAAMue,EAAUxB,EAAIwB,QAEdC,EAAW,IAAIC,sBAAqB,YAAc,IAAZC,EAAW,oBACrDJ,EAAgBI,EAAML,mBAKxB,OAHIE,GACFC,EAASG,QAAQJ,GAEZ,WACDA,GACFC,EAASI,UAAUL,MAItB,IACIF,ED+CUQ,CAAY9B,GAE7B,OACE,sBAAKA,IAAKA,EAAKlO,MAAO,CAAEmD,MAAO,OAAQ8M,cAAe,QAAtD,SACGV,EAAW,eAACX,GAAD,CAAuB/b,MAAOA,IAAY,OE9DrD,SAASqd,GAAT,GAA6C,IAAxBjB,EAAuB,EAAvBA,aAC1B,EAAmB5N,KAAZH,EAAP,oBACA,EAA0CpN,IAA1C,mBAAOqJ,EAAP,KAAsBC,EAAtB,KACMnM,EAAaF,IAUnB,OACE,uCACGE,GACC,uCACE,eAAC2V,GAAA,EAAD,CAAUM,cAAc,eAAeL,QAZrB,WACxBzJ,EAAiB,CACf5K,MAAO2K,EAAc3K,MACrBE,MAAO,GACPa,KAAM,uBAQF,sCAGA,eAACob,GAAA,EAAD,OAGH7b,IACEC,QAAO,SAACF,GAAD,OAAWA,EAAML,QAAU2K,EAAc3K,MAAMP,QACtDc,QAAO,SAACF,GAAD,OAAWA,EAAMsd,OAAO7J,SAASpF,EAASC,UACjDpO,QAAO,SAACF,GAAD,YAAqCqC,IAA1BrC,EAAM6V,mBACxB5L,MAAK,SAACjG,EAAGkG,GAAJ,OAAUlG,EAAEuD,KAAK4C,cAAcD,EAAE3C,SACtCjH,KAAI,SAACN,GAAD,OACH,eAACmc,GAAD,CACEnc,MAAOA,EAEPoc,aAAcA,EACdC,eAAe,GAFVrc,EAAMZ,Y,uBCrChB,SAASme,KACd,MAA0Ctc,IAA1C,mBAAOqJ,EAAP,KAAsBC,EAAtB,KACA,OACE,eAACiT,GAAA,EAAD,CACElW,GAAG,eACH6F,MAAO,CAAEmD,MAAO,QAChBmN,YAAY,qCACZ9f,MAAO2M,EAAczK,MACrBiL,SAAU,SAAChM,GACTyL,EAAiB,CACf5K,MAAO2K,EAAc3K,MACrBe,KAAM,UACNb,MAAOf,EAAE2a,OAAO9b,SAGpB+f,cAAc,EACdC,cAC0B,KAAxBrT,EAAczK,OACZ,eAACwX,GAAA,EAAD,CACEuG,WAAW,OACXzQ,MAAO,CAAE0D,MAAO,EAAGqB,SAAU,YAC7B8B,QAAS,WACPzJ,EAAiB,2BAAKD,GAAN,IAAqBzK,MAAO,OAE9C,aAAW,qBANb,SAQE,eAACge,GAAA,EAAD,wBC9BZ,IAAMC,GAAwB,oCAkCxBC,GAIH,sBACE,YAAI9e,KACJgL,MAAK,SAACjG,EAAGkG,GAAJ,OAAUlG,EAAEuD,KAAK4C,cAAcD,EAAE3C,SACtCjH,KAAI,SAACX,GAAD,MAAY,CACfe,KAAM,QACNsd,MAAO,CAACre,EAAM4H,MAAMjH,KAAI,SAAC2d,GAAD,OAAOA,EAAEnY,uBACjCf,KAAMpF,OANT,YAQE,YAAIM,KACJgK,MAAK,SAACjG,EAAGkG,GAAJ,OAAUlG,EAAEuD,KAAK4C,cAAcD,EAAE3C,SACtCrH,QAAO,SAACF,GAAD,YAAqCqC,IAA1BrC,EAAM6V,mBACxBvV,KAAI,SAACN,GAAD,MAAY,CACfU,KAAM,QACNsd,MAAO,CAAC/e,IAAOC,MAAK,SAACC,GAAD,OAAOA,EAAEC,OAASY,EAAML,SAAQ4H,KAAMvH,EAAMuH,MAAMjH,KACpE,SAAC2d,GAAD,OAAOA,EAAEnY,uBAEXf,KAAM/E,QA+CL,IAAMke,GAAoB,CAC/Bve,MAAO,CACLwe,MAAO,UAETne,MAAO,CACLme,MAAO,UAET1d,QAAS,CACP0d,MAAO,YAET,kBAAmB,CACjBA,MAAO,oBC9FJ,SAASC,GAAT,GAAoE,IAAlC/a,EAAiC,EAAjCA,SAAU+Y,EAAuB,EAAvBA,aAGjD,OAFyBle,IAsBvB,eAACmgB,GAAD,CACEhb,SAAUA,EACV+Y,aAAcA,IApBd,eAACrI,GAAA,EAAD,CACE8C,UACE,eAACwB,GAAA,EAAD,CAAQ1K,MAAM,UAAd,SACE,sBAAK2K,IAAKG,GAAYF,IAAI,OAG9BxB,cAAc,SACd7C,WAAY,eAAC8C,GAAA,EAAD,IACZ5C,eAAe,OACfC,cAAc,gCACdL,QAAS3P,EAVX,wCAyBN,SAASga,GAAT,GAGW,IAFGzX,EAEJ,EAFRvD,SAAYuD,WAGZ,GADQ,EADRwV,aAEsChR,YAASjE,GAAmB,CAChEP,KADcvD,EAAhB,EAAQmI,OAAkBoL,EAA1B,EAA0BA,QAG1B,EAA6B3V,IAApBsJ,EAAT,oBAEA,IAAKlH,EACH,OAAIuT,EAEA,eAAChD,GAAA,EAAD,CACEtM,GAAE,0BAAqBV,GACvBkN,YAAa,CAAEzB,OAAQ,WAKzB,eAACsB,GAAA,EAAD,CACEU,cAAc,sEACdU,YAAU,EAFZ,+BAmBN,OACE,eAAChB,GAAA,EAAD,CACEC,QAXgB,WAClBzJ,EAAiB,CACf5K,MAAO0D,EAAS1D,MAChBgB,iBAAkB0C,EAASiE,GAC3BzH,MAAO,GACPa,KAAM,qBAON2T,cACE,uCACE,eAAClF,GAAD,CAAU1H,SAAUpE,EAASoE,WAD/B,KAC8C,IAC5C,eAAC4H,GAAD,CAAWnH,UAAW7E,EAAS6E,YAC/B,wBACC7E,EAAS+E,UAAY,uCAAGa,KAAKC,MAAM7F,EAAS+E,UAAvB,UACtB,eAACgN,GAAD,CAAME,QAASjS,EAAS8E,UAG5B4M,YAAU,EACVX,eAAgB/Q,EAASgF,SAAW,mBAAgBhG,EACpD6R,WACE7Q,EAASgF,SACP,sBAAKiQ,IAAKjV,EAASgF,SAAUkQ,IAAI,GAAGjI,MAAM,aACxCjO,EAhBR,SAmBGgB,EAASkE,OCnGT,SAAS+W,GAAT,GAA0C,IAAjB3e,EAAgB,EAAhBA,MAC9B,EAA6BsB,IAApBsJ,EAAT,oBAEA,EAAmBiE,KAAZH,EAAP,oBACMgG,EAAa,UACjBpU,IACGC,QAAO,SAACC,GAAD,OAAOA,EAAEmd,OAAO7J,SAASpF,EAASC,UACzCpO,QAAO,SAACC,GAAD,OAAOA,EAAER,QAAUA,EAAMP,QAAM0C,OAHxB,qBAINvB,IAASL,QAAO,SAACM,GAAD,OAAOA,EAAEb,QAAUA,EAAMP,QAAM0C,OAJzC,aAcnB,OACE,eAACiS,GAAA,EAAD,CAAUM,cAAeA,EAAeL,QATtB,WAClBzJ,EAAiB,CACf5K,QACAE,MAAO,GACPa,KAAM,aAKR,SACGf,EAAM4H,OCfN,SAASgX,GAAT,GAAoD,IAAxBnC,EAAuB,EAAvBA,aACjC,EAAwBnb,IAAjBqJ,EAAP,oBACA,EAAmBkE,KAAZH,EAAP,oBACM0P,EHqDD,SAAgBS,EAAclQ,GACnC,GAAIwP,GAAsBW,KAAKD,GAAO,CACpC,MAA6BV,GAAsBY,KAAKF,GAA/C7d,EAAT,oBACA,MAAO,CACL,CACED,KAAM,kBACNqE,KAAM,CACJ6B,WAAYjG,EACZvB,KAAK,mBAAD,OAAqBuB,MAMjC,IAAMqd,EAAQQ,EACX1Y,oBACAzF,MAAM,KACNH,QAAO,SAAC+d,GAAD,OAAOA,EAAEnc,OAAS,KAE5B,OAAOic,GACJ7d,QAAO,SAACye,GACP,MAAgB,UAAZA,EAAGje,MAAgC,YAAZie,EAAGje,MAGrBie,EAAG5Z,KAAKuY,OAAO7J,SAASnF,MAIlCpO,QAAO,SAACye,GAAD,OACNX,EAAMY,OAAM,SAACX,GAAD,OAAOU,EAAGX,MAAMa,MAAK,SAACC,GAAD,OAASA,EAAIrL,SAASwK,YGlFrC1e,CAAO+K,EAAczK,MAAOwO,EAASC,OAE3D,OAA6B,IAAzByP,EAAcjc,OACT,eAAC6R,GAAA,EAAD,wCAIP,qCACGoK,EAAczd,KAAI,SAACye,EAAchV,GAAf,aACjB,gBAAC,WAAD,YACG,UAAAgU,EAAchU,EAAI,UAAlB,eAAsBrJ,QAASqe,EAAare,MAC3C,uCACGqd,EAAchU,EAAI,IAAM,eAAC+R,GAAA,EAAD,IACzB,eAAC3D,GAAA,EAAD,UACG+F,GAAkBa,EAAare,MAAMyd,WAI5C,eAACa,GAAD,CACED,aAAcA,EACd3C,aAAcA,MAXH2C,EAAaha,KAAK3F,WAwBzC,SAAS4f,GAAT,GAG2B,IAFzBD,EAEwB,EAFxBA,aACA3C,EACwB,EADxBA,aAEA,OAAQ2C,EAAare,MACnB,IAAK,QACH,OAAO,eAAC4d,GAAD,CAAe3e,MAAOof,EAAaha,OAC5C,IAAK,QACH,OACE,eAACoX,GAAD,CACEnc,MAAO+e,EAAaha,KACpBqX,aAAcA,EACdC,eAAe,IAGrB,IAAK,kBACH,OACE,eAAC+B,GAAD,CACE/a,SAAU0b,EAAaha,KACvBqX,aAAcA,IAGpB,QACE,OAAO,MC1Db,IAGMhT,IAAM,IAAID,MAAO8V,UAAY,IAE5B,SAASC,KACd,MAA0Cje,IAA1C,mBAAOqJ,EAAP,KAAsBC,EAAtB,KAEgB4U,EAAe/T,YAAQ,sBAAC,gCAAApH,EAAA,sDAChCwH,EAA4B,GAE9B4T,EAAO,EACPC,EAAa,GAJqB,uBAMjBnY,GAA6B,CAC9CoY,MAAOlW,GAbQ,OAcfmW,SAhBS,GAiBTH,SATkC,OAMpCC,EANoC,OAWpC7T,EAAOlK,KAAP,MAAAkK,EAAM,YAAS6T,MACbD,EAZkC,UARzB,KAqBJC,EAAWvd,OAbkB,gDAc/B0J,GAd+B,4CAerC,IAfKA,OAiBR,OACE,gBAAC4L,GAAA,EAAD,WACE,eAACzD,GAAA,EAAD,UACE,eAAC0D,GAAA,EAAD,CACEC,UAAU,UACVtD,QAAS,WACPzJ,EAAiB,CACf5K,MAAO2K,EAAc3K,MACrBE,MAAO,GACPa,KAAM,aANZ,SAUE,eAAC6W,GAAA,EAAD,CAAiBC,KAAM,eAACC,GAAA,EAAD,IAAvB,4BAIJ,eAACU,GAAA,EAAD,4CAEgB9V,IAAf8c,GACC,eAACxL,GAAA,EAAD,UACE,eAACC,GAAA,EAAD,CACEtM,GAAG,oBACHwM,YAAa,CAAEzB,OAAQ,kBAKbhQ,IAAf8c,GACC,YAAIA,GACHlV,MAAK,SAACjG,EAAGkG,GAAJ,OAAWlG,EAAEwb,WAAWrV,cAAcD,EAAEsV,eAC3Clf,KAAI,SAAC+C,GAEJ,MAAO,CAAE1D,MADKC,EAASyD,GACPA,eAEjBnD,QAAO,wBAAyBmC,IAAzB,EAAG1C,SACVW,KAAI,gBAAGX,EAAH,EAAGA,MAAO0D,EAAV,EAAUA,SAAV,OACH,eAAC0Q,GAAA,EAAD,CAEEC,QAAS,WACPzJ,EAAiB,CACf5K,MAAOA,EACPE,MAAO,GACPa,KAAM,kBACNC,iBAAkB0C,EAASiE,GAAGrF,cAGlCoS,cACE,uCACE,eAAClF,GAAD,CAAU1H,SAAUpE,EAASoE,SAAW,MAD1C,KACsD,IACpD,eAAC4H,GAAD,CAAWnH,UAAW7E,EAASqE,uBAC/B,wBACCrE,EAASuE,eACR,uCAAGqB,KAAKC,MAAM7F,EAASuE,eAAvB,UAEF,eAACwN,GAAD,CAAME,QAASjS,EAASsE,iBAG5BoN,YAAU,EArBZ,SAuBG1R,EAASkE,MAtBLlE,EAASiE,UCxDrB,SAASmY,GAAT,GAAuE,IAApDzP,EAAmD,EAAnDA,2BAA4BoM,EAAuB,EAAvBA,aACpD,EAA8Cje,oBAAS,GAAvD,mBAAOuhB,EAAP,KAAwBC,EAAxB,KACA,EAA0C1e,IAA1C,mBAAOqJ,EAAP,KAAsBC,EAAtB,KACMqV,EAAevF,iBAA8B,MAEnD,OACE,uCACE,uBACE7P,UAAWqV,KAAEpV,KAAOC,UAAR,gBACTD,KAAOqV,gBAAkBJ,IAE5BrE,IAAKuE,EAJP,UAME,yBACEpV,UAAWC,KAAOsV,WAClB/L,QAAS,kBAAM2L,GAAmB,IAFpC,SAIE,eAACK,GAAA,EAAD,MAEF,gBAAC5I,GAAA,EAAD,CAAM5M,UAAWC,KAAOwV,UAAxB,UACE,eAACtM,GAAA,EAAD,UACE,eAAC4J,GAAD,MAEF,eAACzB,GAAA,EAAD,CAAStR,UAAWC,KAAOyV,kBAE7B,sBAAK1V,UAAWC,KAAO0V,QAAvB,SAC0B,UAAvB7V,EAAc5J,MACQ,oBAAvB4J,EAAc5J,KACZ,eAACoY,GAAD,CACE9I,2BAA4BA,EAC5BkH,eAC0B,KAAxB5M,EAAczK,MACV,aACA,iBAENsX,kBAAmB,WACjB5M,EAAiB,CACf5K,MAAO2K,EAAc3K,MACrBE,MAAOyK,EAAczK,MACrBa,KAAM,eAIa,sBAAvB4J,EAAc5J,KAChB,eAACwe,GAAD,IAEA,eAAC9H,GAAA,EAAD,UAC2B,KAAxB9M,EAAczK,MACb,eAACwd,GAAD,CAAWjB,aAAcA,IAEzB,eAACmC,GAAD,CAAkBnC,aAAcA,QAKxC,gBAAChF,GAAA,EAAD,CAAM5M,UAAWC,KAAO2V,WAAxB,UACE,eAACtE,GAAA,EAAD,CAAStR,UAAWC,KAAOyV,eAE3B,eAAChG,GAAD,CAAYC,mBAAoB,kBAAMwF,GAAmB,YAI7D,yBACEnV,UAAWqV,KAAEpV,KAAOsV,WAAYtV,KAAO4V,iBAA3B,gBACT5V,KAAOqV,gBAAkBJ,IAE5B1L,QAAS,kBAAM2L,GAAmB,IAJpC,SAME,eAACW,GAAA,EAAD,SCnFO,SAASC,KCHtBjiB,qBAAU,WACR,IACE2F,IAAMnE,IAAN,UAGQ,2BAHR,UAOA,aACD,ICXE,WACL,IAAM0gB,EAAoB9e,uBAAY,WACpC,IAAMyC,EAAS,IAAIzE,gBAAgBd,OAAOU,SAASC,QAE/C4E,EAAOpE,IAAI,iBACb6D,EAAiBF,KAAKC,MAAMQ,EAAOrE,IAAI,iBAEvCqE,EAAOsc,OAAO,eACd7hB,OAAOuD,QAAQue,kBACbre,EACA,GAFF,UAGKzD,OAAOU,SAASqhB,QAHrB,OAII/hB,OAAOU,SAASE,SAJpB,YAKM2E,EAAOlC,gBAGd,IAEH3D,qBAAU,WACRkiB,MACC,CAACA,IAEJliB,qBAAU,WAER,OADAM,OAAOC,iBAAiB,WAAY2hB,GAC7B,kBAAM5hB,OAAOwC,oBAAoB,WAAYof,MACnD,CAACA,IFnBJI,GAGA,MACEziB,wBAA6BkE,GAD/B,mBAAO4I,EAAP,KAA2B4V,EAA3B,KAGA,EAAwC1iB,qBAAxC,mBAAO+M,EAAP,KAAqB4V,EAArB,KAEA,OACE,uBAAKtW,UAAWC,IAAOsW,QAAvB,UACE,eAACtB,GAAD,CACEzP,2BAA4B6Q,EAC5BzE,aAAc0E,IAEhB,eAAC9V,GAAD,CACEC,mBAAoBA,EACpBC,aAAcA,O,cGlBtB8V,IAAY,CACVC,SAAS,WAACC,6EAAD,GAAqC,IAAIpf,OAAS,EAC3Dqf,IAAKD,4EACLE,aAAc,CAAC,IAAIC,IAAaC,gBAChCC,iBAAkB,IAGpBC,IAASC,OACP,eAAC,IAAMC,WAAP,UACE,eAACnB,GAAD,MAEFoB,SAASC,eAAe,S,mBCjB1BxkB,EAAOC,QAAU,CAAC,UAAY,2BAA2B,gBAAkB,iCAAiC,UAAY,2BAA2B,QAAU,yBAAyB,WAAa,4BAA4B,aAAe,8BAA8B,WAAa,4BAA4B,iBAAmB,qC","file":"static/js/main.3db5c05c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"RouteMap_Container__1kS2N\",\"MapContainer\":\"RouteMap_MapContainer__1oyLk\",\"navigationControl\":\"RouteMap_navigationControl__2RyF3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Wrapper\":\"App_Wrapper__2vPXK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"WorldSelect_Container__3BQ6b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Dialog\":\"InfoDialog_Dialog__3j2NL\"};","import mitt from \"mitt\";\n\nexport const STRAVA_AUTH_KEY = \"strava-auth\";\n\nconst emitter = mitt<Record<string, string | null>>();\n\nwindow.addEventListener(\"storage\", (e) => {\n  if (e.key) {\n    emitter.emit(e.key, e.newValue);\n  }\n});\n\nexport function setLocalStorageItem(key: string, value: string | null): void {\n  if (value === null) {\n    localStorage.removeItem(key);\n  } else {\n    localStorage.setItem(key, value);\n  }\n  emitter.emit(key, value);\n}\n\nexport function getLocalStorageItem(key: string): string | null {\n  return localStorage.getItem(key);\n}\n\nexport function addLocalStorageListener(\n  key: string,\n  callback: (value: string | null) => void\n): () => void {\n  const listener = (v: string | null | undefined) =>\n    callback(v as string | null);\n  emitter.on(key, listener);\n  return () => emitter.off(key, listener);\n}\n","import { useEffect, useState } from \"react\";\nimport {\n  addLocalStorageListener,\n  getLocalStorageItem,\n  STRAVA_AUTH_KEY,\n} from \"../services/local-storage\";\n\nexport function useIsLoggedInStrava() {\n  const [isLoggedIn, setIsLoggedIn] = useState(\n    () => getLocalStorageItem(STRAVA_AUTH_KEY) !== null\n  );\n\n  useEffect(() => {\n    addLocalStorageListener(STRAVA_AUTH_KEY, (v) => setIsLoggedIn(v !== null));\n  }, []);\n\n  return isLoggedIn;\n}\n","import { worlds } from \"zwift-data\";\n\nexport const DEFAULT_WORLD = worlds.find((w) => w.slug === \"watopia\")!;\n","import { routes, Segment, segments, World, worlds } from \"zwift-data\";\nimport { LocationState } from \"../../types\";\nimport { DEFAULT_WORLD } from \"./constants\";\n\nexport function getLocationState(\n  { search, pathname }: Pick<Location, \"pathname\" | \"search\"> = window.location\n): LocationState {\n  const searchParams = new URLSearchParams(search);\n\n  const world = getWorld({ searchParams, pathname });\n  const query = searchParams.get(\"q\") ?? \"\";\n\n  if (searchParams.has(\"route\")) {\n    const route = routes\n      .filter((r) => r.world === world?.slug)\n      .find((r) => r.slug === searchParams.get(\"route\"));\n    const selectedSegments = (searchParams.get(\"segments\") ?? \"\")\n      .split(\",\")\n      .map((slug) => segments.find((s) => s.slug === slug))\n      .filter((segment): segment is Segment => !!segment);\n\n    if (!route) {\n      return { world, query, type: \"default\" };\n    } else {\n      return {\n        world,\n        query,\n        type: \"route\",\n        route,\n        segments: selectedSegments,\n      };\n    }\n  } else if (searchParams.has(\"strava-activities\")) {\n    return { world, query, type: \"strava-activities\" };\n  } else if (searchParams.has(\"strava-activity\")) {\n    return {\n      world,\n      query,\n\n      type: \"strava-activity\",\n      stravaActivityId: searchParams.get(\"strava-activity\")!,\n    };\n  } else {\n    return { world, query, type: \"default\" };\n  }\n}\n\nfunction getWorld({\n  searchParams,\n  pathname,\n}: {\n  searchParams: URLSearchParams;\n  pathname: string;\n}): World {\n  const pathParts = pathname.split(\"/\").slice(1);\n\n  const worldFromPath = worlds.find((w) => w.slug === pathParts[0]);\n  const worldFromSearch = worlds.find(\n    (w) => w.slug === searchParams.get(\"world\")\n  );\n\n  return worldFromPath ?? worldFromSearch ?? DEFAULT_WORLD;\n}\n","import { useCallback, useEffect, useState } from \"react\";\nimport { LocationState } from \"../../types\";\nimport { createUrl } from \"./createUrl\";\nimport { getLocationState } from \"./getLocationState\";\n\ntype Listener = (state: LocationState) => void;\nconst listeners: Listener[] = [];\n\nexport function useLocationState(): [\n  LocationState,\n  (s: LocationState) => void\n] {\n  const [state, setState] = useState(getLocationState);\n\n  useEffect(() => {\n    const listener = () => setState(getLocationState());\n    window.addEventListener(\"popstate\", listener);\n    return () => window.removeEventListener(\"popstate\", listener);\n  }, []);\n\n  useEffect(() => {\n    const listener: Listener = (newState) => setState(newState);\n    listeners.push(listener);\n\n    return () => {\n      listeners.splice(listeners.indexOf(listener), 1);\n    };\n  }, []);\n\n  const updateLocationState = useCallback((newState: LocationState) => {\n    const url = createUrl(newState);\n    window.history.pushState(undefined, \"\", url);\n    setState(newState);\n    listeners.forEach((l) => l(newState));\n  }, []);\n\n  return [state, updateLocationState];\n}\n","import { LocationState } from \"../../types\";\n\nexport function createUrl(state: LocationState): string {\n  const path = `/${state.world.slug}`;\n\n  const searchParams = new URLSearchParams();\n\n  switch (state.type) {\n    case \"default\":\n      break;\n    case \"route\":\n      searchParams.set(\"route\", state.route.slug);\n      if (state.segments.length > 0) {\n        searchParams.set(\n          \"segments\",\n          state.segments.map((s) => s.slug).join(\",\")\n        );\n      }\n      break;\n\n    case \"strava-activities\":\n      searchParams.set(\"strava-activities\", \"\");\n      break;\n\n    case \"strava-activity\":\n      searchParams.set(\"strava-activity\", state.stravaActivityId);\n      break;\n  }\n\n  if (state.query.length > 0) {\n    searchParams.set(\"q\", state.query);\n  }\n\n  const searchParamsString = searchParams.toString();\n\n  if (searchParamsString === \"\") {\n    return path;\n  } else {\n    return `${path}?${searchParamsString}`;\n  }\n}\n","export default __webpack_public_path__ + \"static/media/bologna.6f13d4d4.png\";","import { LatLngTuple } from \"leaflet\";\nimport { WorldSlug } from \"zwift-data\";\nimport bolognaMap from \"./maps/bologna.png\";\nimport critCityMap from \"./maps/crit-city.png\";\nimport franceMap from \"./maps/france.png\";\nimport innsbruckMap from \"./maps/innsbruck.png\";\nimport londonMap from \"./maps/london.png\";\nimport makuriIslandsMap from \"./maps/makuri-islands.png\";\nimport newYorkMap from \"./maps/new-york.png\";\nimport parisMap from \"./maps/paris.png\";\nimport richmondMap from \"./maps/richmond.png\";\nimport watopiaMap from \"./maps/watopia.png\";\nimport yorkshireMap from \"./maps/yorkshire.png\";\n\nexport type WorldConfig = {\n  imageBounds: [LatLngTuple, LatLngTuple];\n  initialBounds: [LatLngTuple, LatLngTuple];\n  image: string;\n  backgroundColor: string;\n};\n\nexport const worldConfigs: Record<WorldSlug, WorldConfig> = {\n  bologna: {\n    imageBounds: [\n      [44.5308037, 11.26261748],\n      [44.45463821, 11.36991729102076],\n    ],\n    initialBounds: [\n      [44.501423, 11.294653],\n      [44.478222, 11.341099],\n    ],\n    image: bolognaMap,\n    backgroundColor: \"#b9b9b8\",\n  },\n  \"crit-city\": {\n    imageBounds: [\n      [-10.3657, 165.7824],\n      [-10.4038, 165.8207],\n    ],\n    initialBounds: [\n      [-10.382352, 165.798758],\n      [-10.386016, 165.803496],\n    ],\n    image: critCityMap,\n    backgroundColor: \"#7c9938\",\n  },\n  france: {\n    imageBounds: [\n      [-21.64155, 166.1384],\n      [-21.7564, 166.26125],\n    ],\n    initialBounds: [\n      [-21.697812, 166.148225],\n      [-21.744906, 166.202642],\n    ],\n    image: franceMap,\n    backgroundColor: \"#6f992d\",\n  },\n  innsbruck: {\n    imageBounds: [\n      [47.2947, 11.3501],\n      [47.2055, 11.4822],\n    ],\n    initialBounds: [\n      [47.280902, 11.386414],\n      [47.214544, 11.445934],\n    ],\n    image: innsbruckMap,\n    backgroundColor: \"#7c9938\",\n  },\n  london: {\n    imageBounds: [\n      [51.5362, -0.1776],\n      [51.4601, -0.0555],\n    ],\n    initialBounds: [\n      [51.511261, -0.134875],\n      [51.489256, -0.072996],\n    ],\n    image: londonMap,\n    backgroundColor: \"#6f992d\",\n  },\n  \"makuri-islands\": {\n    imageBounds: [\n      [-10.73746, 165.80468],\n      [-10.81405, 165.88222],\n    ],\n    initialBounds: [\n      [-10.743702, 165.830083],\n      [-10.775156, 165.859212],\n    ],\n    image: makuriIslandsMap,\n    backgroundColor: \"#7c9938\",\n  },\n  \"new-york\": {\n    imageBounds: [\n      [40.81725, -74.0227],\n      [40.74085, -73.9222],\n    ],\n    initialBounds: [\n      [40.799618, -73.982068],\n      [40.763547, -73.949602],\n    ],\n    image: newYorkMap,\n    backgroundColor: \"#bbbbb7\",\n  },\n  paris: {\n    imageBounds: [\n      [48.9058, 2.2561],\n      [48.82945, 2.3722],\n    ],\n    initialBounds: [\n      [48.874328, 2.294207],\n      [48.860895, 2.331992],\n    ],\n    image: parisMap,\n    backgroundColor: \"#b9b9b9\",\n  },\n  richmond: {\n    imageBounds: [\n      [37.5774, -77.48954],\n      [37.5014, -77.394],\n    ],\n    initialBounds: [\n      [37.558393, -77.467668],\n      [37.520429, -77.415864],\n    ],\n    image: richmondMap,\n    backgroundColor: \"#7c9938\",\n  },\n  watopia: {\n    imageBounds: [\n      [-11.62597, 166.87747],\n      [-11.70255, 167.03255],\n    ],\n    initialBounds: [\n      [-11.635444, 166.93555],\n      [-11.673613, 166.972511],\n    ],\n    image: watopiaMap,\n    backgroundColor: \"#0884e2\",\n  },\n  yorkshire: {\n    imageBounds: [\n      [54.0254, -1.632],\n      [53.9491, -1.5022],\n    ],\n    initialBounds: [\n      [53.999691, -1.592961],\n      [53.974875, -1.539474],\n    ],\n    image: yorkshireMap,\n    backgroundColor: \"#7c9938\",\n  },\n};\n","export default __webpack_public_path__ + \"static/media/crit-city.3bab2d0f.png\";","export default __webpack_public_path__ + \"static/media/france.aded90ff.png\";","export default __webpack_public_path__ + \"static/media/innsbruck.9821ed90.png\";","export default __webpack_public_path__ + \"static/media/london.54ae112e.png\";","export default __webpack_public_path__ + \"static/media/makuri-islands.5fe6bee4.png\";","export default __webpack_public_path__ + \"static/media/new-york.5bf9b5e8.png\";","export default __webpack_public_path__ + \"static/media/paris.d1eaa520.png\";","export default __webpack_public_path__ + \"static/media/richmond.72df812b.png\";","export default __webpack_public_path__ + \"static/media/watopia.0901a23e.png\";","export default __webpack_public_path__ + \"static/media/yorkshire.b83235cf.png\";","import { World, worlds } from \"zwift-data\";\nimport { DetailedActivity, SummaryActivity } from \"../services/strava/types\";\nimport { worldConfigs } from \"../worldConfig\";\n\nexport function getWorld(\n  activity: DetailedActivity | SummaryActivity\n): World | undefined {\n  if (activity.start_latlng === null) {\n    return;\n  }\n\n  return worlds.find((world) => {\n    const worldConfig = worldConfigs[world.slug];\n    const bb = worldConfig.imageBounds;\n    return (\n      bb[0][0] >= activity.start_latlng![0] &&\n      activity.start_latlng![0] >= bb[1][0] &&\n      bb[0][1] <= activity.start_latlng![1] &&\n      activity.start_latlng![1] <= bb[1][1]\n    );\n  });\n}\n","import axios from \"axios\";\nimport {\n  getLocalStorageItem,\n  setLocalStorageItem,\n  STRAVA_AUTH_KEY,\n} from \"../local-storage\";\nimport { Token } from \"./types\";\n\nexport function getStravaToken(): Token | null {\n  const tokenString = getLocalStorageItem(STRAVA_AUTH_KEY);\n  if (tokenString === null) {\n    return null;\n  }\n  return JSON.parse(tokenString);\n}\n\nexport function writeStravaToken(token: Token): void {\n  setLocalStorageItem(STRAVA_AUTH_KEY, JSON.stringify(token));\n}\n\nexport async function removeStravaToken(): Promise<void> {\n  const token = getStravaToken();\n  if (!token) {\n    return;\n  }\n\n  setLocalStorageItem(STRAVA_AUTH_KEY, null);\n\n  try {\n    await axios.post(`https://www.strava.com/oauth/deauthorize`, undefined, {\n      params: { access_token: token.access_token },\n    });\n  } catch {}\n}\n","import axios from \"axios\";\nimport { Token } from \"./types\";\n\nfunction getStravaAuthUrl() {\n  const params = new URLSearchParams();\n  params.set(\n    \"state\",\n    JSON.stringify({\n      path: window.location.pathname,\n      search: Object.fromEntries(\n        new URLSearchParams(window.location.search).entries()\n      ),\n    })\n  );\n\n  return `${\n    process.env.NODE_ENV === \"production\"\n      ? \"https://api.zwiftmap.com\"\n      : \"http://localhost:3001\"\n  }/strava/authorize?${params.toString()}`;\n}\n\nexport function openStravaAuthUrl() {\n  window.location.href = getStravaAuthUrl();\n}\n\nexport async function getRefreshedToken(refreshToken: string): Promise<Token> {\n  const url = `${\n    process.env.NODE_ENV === \"production\"\n      ? \"https://api.zwiftmap.com\"\n      : \"http://localhost:3001\"\n  }/strava/refresh`;\n\n  const response = await axios.post<Token>(url, {\n    refresh_token: refreshToken,\n  });\n\n  return response.data;\n}\n","import { AxiosRequestConfig, AxiosResponse } from \"axios\";\nimport mitt from \"mitt\";\n\nfunction getCacheKey(config: AxiosRequestConfig): string {\n  return JSON.stringify({\n    url: config.url,\n    params: config.params,\n  });\n}\n\nexport function axiosCache(): {\n  request: (config: AxiosRequestConfig) => Promise<AxiosRequestConfig>;\n  response: [(value: AxiosResponse) => AxiosResponse, (error: any) => void];\n} {\n  const cache = new Cache();\n\n  const requestHandler = async (\n    request: AxiosRequestConfig\n  ): Promise<AxiosRequestConfig> => {\n    const cacheKey = getCacheKey(request);\n    if (request.method === \"get\") {\n      if (cache.hasResponse(cacheKey)) {\n        request.headers = { ...request.headers, cached: \"true\" };\n        request.data = await cache.getResponse(cacheKey);\n        throw request;\n      } else {\n        cache.prepareResponse(cacheKey);\n      }\n    }\n    return request;\n  };\n\n  const responseHandler = (response: AxiosResponse): AxiosResponse => {\n    if (response.config.method?.toLocaleLowerCase() === \"get\") {\n      cache.storeResponse(getCacheKey(response.config), response.data);\n    }\n    return response;\n  };\n  const responseErrorHandler = (errorOrData: any) => {\n    if (errorOrData.headers.cached === \"true\") {\n      return Promise.resolve(errorOrData);\n    }\n    return Promise.reject(errorOrData);\n  };\n\n  return {\n    request: requestHandler,\n    response: [responseHandler, responseErrorHandler],\n  };\n}\n\nclass Cache {\n  private store: Record<string, Promise<any>> = {};\n\n  private emitter = mitt<Record<string, any>>();\n\n  public prepareResponse(url: string) {\n    this.store[url] = new Promise((resolve) => {\n      const handler = (response: any) => {\n        this.emitter.off(url, handler);\n\n        resolve(response);\n      };\n\n      this.emitter.on(url, handler);\n    });\n  }\n\n  public storeResponse(url: string, response: any) {\n    this.emitter.emit(url, response);\n  }\n\n  public hasResponse(url: string): boolean {\n    return this.store[url] !== undefined;\n  }\n\n  public getResponse(url: string): Promise<any> {\n    if (this.hasResponse(url)) {\n      return this.store[url];\n    }\n\n    return Promise.reject();\n  }\n}\n","import {\n  DetailedActivity,\n  StreamSet,\n  DetailedSegment,\n  SummaryActivity,\n} from \"./types\";\nimport axios from \"axios\";\nimport { getStravaToken, removeStravaToken, writeStravaToken } from \"./token\";\nimport { getRefreshedToken } from \"./auth\";\nimport { axiosCache } from \"../axios-cache\";\nimport identity from \"lodash/identity\";\n\nconst cache = axiosCache();\n\nconst api = axios.create({\n  baseURL: \"https://www.strava.com/api/v3\",\n});\n\napi.interceptors.request.use(cache.request);\napi.interceptors.response.use(...cache.response);\n\napi.interceptors.request.use(async (config) => {\n  let token = getStravaToken();\n\n  if (token) {\n    if (token.expires_at < Math.round(Date.now() / 1_000)) {\n      try {\n        token = await getRefreshedToken(token.refresh_token);\n        writeStravaToken(token);\n      } catch {\n        await removeStravaToken();\n        return config;\n      }\n    }\n\n    config.headers = {\n      ...config.headers,\n      Authorization: `${token.token_type} ${token.access_token}`,\n    };\n  }\n\n  return config;\n});\n\napi.interceptors.response.use(identity, async (error) => {\n  await removeStravaToken();\n  return error;\n});\n\nexport async function fetchActivity(activityId: string) {\n  const response = await api.get<DetailedActivity>(`/activities/${activityId}`);\n  return response.data;\n}\n\nexport async function fetchActivityStreams(activityId: string) {\n  const response = await api.get<\n    Pick<\n      StreamSet,\n      | \"distance\"\n      | \"latlng\"\n      | \"time\"\n      | \"altitude\"\n      | \"watts\"\n      | \"velocity_smooth\"\n      | \"cadence\"\n      | \"heartrate\"\n    >\n  >(`/activities/${activityId}/streams`, {\n    params: {\n      keys: [\n        \"distance\",\n        \"latlng\",\n        \"time\",\n        \"altitude\",\n        \"wattage\",\n        \"velocity_smooth\",\n        \"watts\",\n        \"cadence\",\n        \"heartrate\",\n      ].join(\",\"),\n      key_by_type: true,\n    },\n  });\n  return response.data;\n}\n\nexport async function fetchSegment(segmentId: string) {\n  const response = await api.get<DetailedSegment>(`/segments/${segmentId}`);\n  return response.data;\n}\n\ninterface GetLoggedInAthleteActivitiesParams {\n  before?: number;\n  after?: number;\n  page?: number;\n  per_page?: number;\n}\n\nexport async function getLoggedInAthleteActivities(\n  params: GetLoggedInAthleteActivitiesParams = {}\n): Promise<Array<SummaryActivity>> {\n  const response = await api.get<SummaryActivity[]>(`/athlete/activities`, { params });\n  return response.data;\n}\n","import { World } from \"zwift-data\";\nimport { getWorld } from \"../util/strava\";\nimport { fetchActivity, fetchActivityStreams } from \"./strava/api\";\n\nexport async function getStravaActivity(\n  activityId: string\n): Promise<StravaActivity> {\n  const esa = await fetchActivity(activityId);\n\n  const world = getWorld(esa);\n\n  if (!world) {\n    throw new Error(\"Activity was not recorded in Zwift\");\n  }\n\n  return {\n    id: esa.id.toString(),\n    name: esa.name,\n    athleteId: esa.athlete.id.toString(),\n    distance: esa.distance / 1_000,\n    elevation: esa.total_elevation_gain,\n    time: esa.moving_time,\n    world: world,\n    avgWatts: esa.average_watts,\n    photoUrl: esa.photos.primary?.urls[\"100\"],\n    streams: await fetchStravaActivityStreams(activityId),\n  };\n}\n\nasync function fetchStravaActivityStreams(\n  activityId: string\n): Promise<StravaActivityStreams> {\n  const streams = await fetchActivityStreams(activityId);\n\n  return {\n    altitude: streams.altitude.data,\n    cadence: streams.cadence?.data,\n    distance: streams.distance.data,\n    heartrate: streams.heartrate?.data,\n    latlng: streams.latlng.data,\n    time: streams.time.data,\n    velocity: streams.velocity_smooth.data,\n    watts: streams.watts?.data,\n  };\n}\n\nexport interface StravaActivity {\n  id: string;\n  athleteId: string;\n  name: string;\n  distance: number;\n  time: number;\n  elevation: number;\n  world: World;\n  avgWatts?: number;\n  photoUrl?: string;\n  streams: StravaActivityStreams;\n}\n\nexport interface StravaActivityStreams {\n  altitude: number[];\n  cadence?: number[];\n  distance: number[];\n  heartrate?: number[];\n  latlng: [number, number][];\n  time: number[];\n  velocity: number[];\n  watts?: number[];\n}\n","import axios from \"axios\";\nimport { StravaSegment } from \"../types\";\nimport { axiosCache } from \"./axios-cache\";\n\nconst cache = axiosCache();\nconst api = axios.create();\napi.interceptors.request.use(cache.request);\napi.interceptors.response.use(...cache.response);\n\nexport async function getStravaSegmentStream<\n  Stream extends \"altitude\" | \"distance\" | \"latlng\"\n>(\n  segmentSlug: string,\n  type: \"segments\" | \"routes\",\n  stream: Stream\n): Promise<StravaSegment[Stream]> {\n  const response = await api.get<StravaSegment[Stream]>(`${type}/${segmentSlug}/${stream}.json`);\n  return response.data;\n}\n\nexport async function getStravaSegmentStreams<\n  Stream extends \"altitude\" | \"distance\" | \"latlng\"\n>(\n  segmentSlug: string,\n  type: \"segments\" | \"routes\",\n  streams: ReadonlyArray<Stream>\n): Promise<Pick<StravaSegment, Stream>> {\n  const streamData = await Promise.all(\n    streams.map((stream) => getStravaSegmentStream(segmentSlug, type, stream))\n  );\n\n  // @ts-ignore\n  return Object.fromEntries(\n    streams.map((stream, i) => [stream, streamData[i]])\n  );\n}\n","import { Select } from \"@react-md/form\";\nimport React from \"react\";\nimport { worlds } from \"zwift-data\";\nimport { useLocationState } from \"../../hooks/useLocationState\";\nimport styles from \"./WorldSelect.module.scss\";\n\nconst options = [...worlds]\n  .sort((a, b) => a.name.localeCompare(b.name))\n  .map((world) => ({\n    label: world.name,\n    value: world.slug,\n  }));\n\nexport function WorldSelect() {\n  const [locationState, setLocationState] = useLocationState();\n\n  return (\n    <div className={styles.Container}>\n      <Select\n        id=\"world-select\"\n        options={options}\n        value={locationState.world.slug}\n        listboxStyle={{ zIndex: 3000 }}\n        onChange={(newWorldSlug) => {\n          setLocationState({\n            world: worlds.find((w) => w.slug === newWorldSlug)!,\n            query: \"\",\n            type: \"default\",\n          });\n        }}\n      />\n    </div>\n  );\n}\n","import { LatLngBounds, LatLngExpression, Map } from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { useAsync } from \"react-async-hook\";\nimport {\n  Circle,\n  ImageOverlay,\n  MapContainer,\n  Pane,\n  Polyline,\n} from \"react-leaflet\";\nimport { Route } from \"zwift-data\";\nimport { useIsLoggedInStrava } from \"../../hooks/useIsLoggedInStrava\";\nimport { useLocationState } from \"../../hooks/useLocationState\";\nimport { getStravaActivity } from \"../../services/StravaActivityRepository\";\nimport {\n  getStravaSegmentStream,\n  getStravaSegmentStreams,\n} from \"../../services/StravaSegmentRepository\";\nimport { LocationState, LocationStateRoute } from \"../../types\";\nimport { worldConfigs } from \"../../worldConfig\";\nimport styles from \"./index.module.css\";\nimport { WorldSelect } from \"./WorldSelect\";\n\ninterface Props {\n  mouseHoverDistance: number | undefined;\n  previewRoute?: string;\n}\n\nexport default function RouteMap({ mouseHoverDistance, previewRoute }: Props) {\n  const [locationState] = useLocationState();\n  const world = locationState.world;\n  const worldConfig = worldConfigs[world.slug];\n\n  const { result: stravaSegmentsToShow } = useAsync(\n    async (state: LocationState) => {\n      if (state.type !== \"route\") {\n        return [];\n      }\n      const stravaSegments = await Promise.all(\n        state.segments.map((s) =>\n          getStravaSegmentStream(s.slug, \"segments\", \"latlng\")\n        )\n      );\n      return state.segments.map((s, i) => ({\n        ...s,\n        stravaData: stravaSegments[i],\n      }));\n    },\n    [locationState]\n  );\n\n  const [map, setMap] = useState<Map | undefined>();\n  useEffect(() => {\n    map?.zoomControl.setPosition(\"topright\");\n  }, [map]);\n\n  const { result: routeStravaSegment } = useAsync(\n    async (type: string, route?: Route) => {\n      if (type !== \"route\") {\n        return;\n      }\n\n      return await getStravaSegmentStreams(route!.slug, \"routes\", [\n        \"distance\",\n        \"latlng\",\n      ]);\n    },\n    [locationState.type, (locationState as LocationStateRoute).route]\n  );\n\n  const isLoggedInStrava = useIsLoggedInStrava();\n  const { result: stravaActivity } = useAsync(\n    async (loggedIn: boolean, state: LocationState) => {\n      if (!loggedIn || state.type !== \"strava-activity\") {\n        return;\n      }\n      return await getStravaActivity(state.stravaActivityId);\n    },\n    [isLoggedInStrava, locationState]\n  );\n\n  const { result: previewRouteStravaSegment } = useAsync(\n    async (r: string | undefined) => {\n      if (r === undefined) {\n        return;\n      }\n\n      return await getStravaSegmentStreams(r, \"routes\", [\"latlng\"]);\n    },\n    [previewRoute]\n  );\n\n  useEffect(() => {\n    if (!map || !routeStravaSegment) {\n      return;\n    }\n\n    const bounds = routeStravaSegment.latlng.reduce(\n      (bounds, coord) => bounds.extend(coord),\n      new LatLngBounds(\n        routeStravaSegment.latlng[0],\n        routeStravaSegment.latlng[0]\n      )\n    );\n\n    map.invalidateSize();\n    map.fitBounds(bounds);\n  }, [map, routeStravaSegment, worldConfig]);\n\n  useEffect(() => {\n    if (!map) {\n      return;\n    }\n\n    const worldConfig = worldConfigs[locationState.world.slug];\n\n    map.invalidateSize();\n    map.setMaxBounds(worldConfig.imageBounds);\n\n    const minZoom = map.getBoundsZoom(worldConfig.imageBounds, false);\n    map.setMinZoom(minZoom);\n\n    if (locationState.type !== \"route\") {\n      map.fitBounds(worldConfig.initialBounds);\n    }\n  }, [map, locationState.world, locationState.type]);\n\n  const pointCoordinates = useMemo<LatLngExpression | undefined>(() => {\n    if (!routeStravaSegment || !mouseHoverDistance) {\n      return;\n    }\n\n    const pointIndex = routeStravaSegment.distance.findIndex(\n      (d) => d > mouseHoverDistance * 1_000\n    );\n    if (!pointIndex) {\n      return;\n    }\n    return routeStravaSegment.latlng[pointIndex];\n  }, [routeStravaSegment, mouseHoverDistance]);\n\n  return (\n    <div className={styles.Container}>\n      <WorldSelect />\n      <MapContainer\n        key={locationState.world.slug}\n        whenCreated={(map) => setMap(map)}\n        bounds={worldConfig.imageBounds}\n        style={{ backgroundColor: worldConfig.backgroundColor }}\n        maxZoom={19}\n        className={styles.MapContainer}\n      >\n        <ImageOverlay\n          url={worldConfig.image}\n          bounds={worldConfig.imageBounds}\n          attribution='&amp;copy <a href=\"https://zwift.com\" rel=\"noreferrer noopener\">Zwift</a>'\n        />\n\n        {previewRouteStravaSegment && (\n          <Pane name=\"preview-route\" style={{ zIndex: 506 }}>\n            <Polyline\n              positions={previewRouteStravaSegment.latlng}\n              pathOptions={{ color: \"#D3D3D3\", weight: 5 }}\n            />\n          </Pane>\n        )}\n\n        {routeStravaSegment && (\n          <Pane name=\"route\" style={{ zIndex: 504 }}>\n            <Polyline\n              positions={routeStravaSegment.latlng}\n              pathOptions={{ color: \"#fc6719\", weight: 5 }}\n            />\n          </Pane>\n        )}\n\n        {stravaActivity && (\n          <Pane name=\"strava-activity\" style={{ zIndex: 504 }}>\n            <Polyline\n              positions={stravaActivity.streams.latlng}\n              pathOptions={{ color: \"#fc6719\", weight: 5 }}\n            />\n          </Pane>\n        )}\n\n        {stravaSegmentsToShow && (\n          <Pane name=\"segments\" style={{ zIndex: 505 }}>\n            {stravaSegmentsToShow?.map((s) => (\n              <Polyline\n                key={s.slug}\n                positions={s.stravaData}\n                pathOptions={{ color: \"#64ac39\", weight: 8 }}\n              />\n            ))}\n          </Pane>\n        )}\n\n        {pointCoordinates && (\n          <Pane name=\"mouse-position\" style={{ zIndex: 507 }}>\n            <Circle\n              center={pointCoordinates}\n              radius={15}\n              pathOptions={{\n                color: \"black\",\n                fillColor: \"black\",\n                fillOpacity: 1,\n              }}\n            />\n          </Pane>\n        )}\n      </MapContainer>\n    </div>\n  );\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACXlBMVEX/awD/agD/aQD/aAD/ZwD/ZQD/ZAD/YgD/YQD/YAD/XwD/XQD/XAD/WgD/WQD/VwD/VgD/VAD/UwD/UQD/WwD/UgD/UAD/XgD/gjj/eCr/TwD/TgD/Zgv/z7T/vJb/XgL/j07/+vf/8Oj/fTT/z7P/////vJj/XAP/TQD/TAD/kVD/+fb/8en/fTf/ZQz/0bb/vZr/WgT/kFD/8uv/fjr/VQD/waD/WQX/SwD/klP/9O3/fz3/ZQ7/0rn/w6T/WAb/SgD/klb//f3//v3/9O//gEL/0rr/y7H/1L//xan/Vgj/SQD/fj3/ilD/9vH/gEX/ZA//07z/WAX/Wwv/zbX/x63/Vgn/WAD/k1r/+/n/f0D/iE//+PX/9/P/gkr/ZBD/1b7/waL/WQr/yrD/ya//VQr/lFr/8+3/fT7/hEn/hE3/ZBH/1L3/vp7/VwX/UgH/Vwn/xqr//fz/yrH/VQz/TAH/SwH/ZBP/kVj/lV7/k17/kl3/bCP/Yxj/jlf/kFr/j1r/nGz/kF//i1j/iVb/iFT/jln/jVn/jVr/h1H/Vg//Wgv/nm7/tpH/tZD/rYX/aCT/SAD/dDb/sIr/so7/s4//j13/TQT/dTT/sYv/sYz/sY3/k2D/UAX/Vg3/nXD/sIz/qoL/ZSP/Vgr/mmr/sIv/rIX/ayj/dzv/jFj/TAP/cS//rof/kl//WxP/qoH/ZCL/Ugj/l2b/q4T/lGH/roj/by//qYD/YyD/Ugf/lmX/ilT/SwL/bCv/qH//YR3/TwX/iVP/aSj/TQX/kV//aSn/pHn/YR7/Tgf/ayv0qRl1AAAAAWJLR0QlwwHJDwAAAAd0SU1FB+UECw4ZCUCePeYAAAJ3SURBVDjLjdTnX9NAGMDxsypim66kabXFgXraiFvRqijR4jz3qgPce6EoOHDj3hFxEEcdVxXBvTdu/yvvujIuH/FetHnx/fyaNs9TAOhpZbPZWrchp21OTrvc3PZ2u8Ph4JxOl9vt9ni9Xl4Q/uF8WecVU7ClHnUC6+yWzs+4QIeOHOuCIaaX16lzFwsXAqb7c3TN79bd6TN9bigJ9S6Q1wPCnr2YXlgCxu/L9S6AsE9ft6kXliRgcIF+/SE5AwaaewQafj/foAIKBw8pNPVSUPudU0EIhw4z9aQI0Dvf8PwUHDFSNPYiBGqOKxoF02d0MW/oRWSge76+MTQ4NkpeSsYFDT1ZBprjisbT2ISJ9HXSZENPRkCbF2cyWDJlKv3m06YH9T2EgDZXM2Ym727W7Dn0fe48g0Mg62LzF9DgQlFcVEouyhZLekdgZk6XLKWhZcVefvkKerVyld4hkJn72GoaXLNW5MXgujJyWbpeJizjEEj3XBs2wmgUbtrMl5cLW7bCigq4bbtUWVmVdgSm5j62Y+eu3dXVe0Rh7779Bw4eqjl8pOboseMnTqIMzOyHp5A+C1H0nzp95uy58wpSLtRerLt0WQdNc++/crVevXY9cuOmGr91W9Egsx937qo4cQ/dr8XqgwaUhRyzH+GHjVhtekSCj58oGmT3Lfz0mYqfv3hpCBLoYvYj8qoR4ziOv36j6CC7b5L09p2KMVbff0A6yO6bJMkfExjXf/qsGKGH2Q/5S5OK1eYqZIBMjzxf9DVhCiLA9ugcfPte16y/QwItemQOlB8/fykMZHrk/P7TgMyQ7VkdwFv1rKDwfy4J6f9kSw79BReDIgKN7zeEAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIxLTA0LTExVDE0OjI0OjUyKzAwOjAwCFzYFAAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMS0wNC0xMVQxNDoyNDozMiswMDowML9uaS8AAAAASUVORK5CYII=\"","import { useCallback, useEffect, useState } from \"react\";\nimport { Settings } from \"../types\";\n\nconst LOCAL_STORAGE_KEY = \"settings\";\n\ntype Listener = (settings: Settings) => void;\nconst listeners: Listener[] = [];\n\nfunction loadSettings(): Settings {\n  try {\n    const rawSettings = localStorage.getItem(LOCAL_STORAGE_KEY) ?? \"{}\";\n    const settings: Partial<Settings> = JSON.parse(rawSettings);\n\n    return {\n      sport: settings.sport ?? \"cycling\",\n      units: settings.units ?? \"metric\",\n    };\n  } catch {\n    return {\n      sport: \"cycling\",\n      units: \"metric\",\n    };\n  }\n}\n\nfunction saveSettings(settings: Settings) {\n  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(settings));\n}\n\nexport function useSettings(): [Settings, (settings: Settings) => void] {\n  const [settings, setSettings] = useState(loadSettings);\n\n  useEffect(() => {\n    const listener: Listener = (newSettings) => setSettings(newSettings);\n    listeners.push(listener);\n\n    return () => {\n      listeners.splice(listeners.indexOf(listener), 1);\n    };\n  }, [settings]);\n\n  const updateSettings = useCallback((newSettings: Settings) => {\n    setSettings(newSettings);\n    saveSettings(newSettings);\n    listeners.forEach((listener) => listener(newSettings));\n  }, []);\n\n  return [settings, updateSettings];\n}\n","import { useSettings } from \"../../hooks/useSettings\";\n\nconst formatDigits = new Intl.NumberFormat(\"en-US\", {\n  minimumFractionDigits: 1,\n  maximumFractionDigits: 1,\n  style: \"decimal\",\n});\n\nconst formatNoDigits = new Intl.NumberFormat(\"en-US\", {\n  minimumFractionDigits: 0,\n  maximumFractionDigits: 0,\n  style: \"decimal\",\n});\n\ninterface Props {\n  distance: number;\n}\n\nexport function Distance({ distance }: Props) {\n  const [settings] = useSettings();\n  switch (settings.units) {\n    case \"imperial\": {\n      const value = distance / 1.609;\n      if (value < 0.3) {\n        return <>{formatNoDigits.format(value * 5280)}ft</>;\n      } else {\n        return <>{formatDigits.format(value)}mi</>;\n      }\n    }\n    case \"metric\": {\n      if (distance < 1) {\n        return <>{formatNoDigits.format(distance * 1000)}m</>;\n      } else {\n        return <>{formatDigits.format(distance)}km</>;\n      }\n    }\n  }\n}\n","import { useSettings } from \"../../hooks/useSettings\";\n\nconst formatNoDigits = new Intl.NumberFormat(\"en-US\", {\n  minimumFractionDigits: 0,\n  maximumFractionDigits: 0,\n  style: \"decimal\",\n});\n\ninterface Props {\n  elevation: number;\n}\n\nexport function Elevation({ elevation }: Props) {\n  const [settings] = useSettings();\n  switch (settings.units) {\n    case \"imperial\":\n      return <>{formatNoDigits.format(elevation * 3.28084)}ft</>;\n    case \"metric\":\n      return <>{formatNoDigits.format(elevation)}m</>;\n  }\n}\n","export function ElevationGradient() {\n  return (\n    <linearGradient id=\"colorElevation\"  x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n      <stop offset=\"5%\" stopColor=\"black\" stopOpacity={0.8} />\n      <stop offset=\"95%\" stopColor=\"black\" stopOpacity={0} />\n    </linearGradient>\n  );\n}\n","import uniqWith from \"lodash/uniqWith\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { useAsync } from \"react-async-hook\";\nimport {\n  Area,\n  AreaChart,\n  CartesianGrid,\n  ResponsiveContainer,\n  Tooltip,\n  TooltipProps,\n  XAxis,\n  YAxis,\n} from \"recharts\";\nimport { getStravaSegmentStreams } from \"../../services/StravaSegmentRepository\";\nimport { StravaSegment } from \"../../types\";\nimport { ElevationGradient } from \"../ElevationGradient\";\nimport { Text } from \"@react-md/typography\";\nimport { Distance } from \"../Distance\";\nimport { Elevation } from \"../Elevation\";\nimport { Route } from \"zwift-data\";\n\ninterface HoverData {\n  distance: number;\n  altitude: number;\n}\n\ninterface Props {\n  route: Route;\n  onMouseHoverDistanceChange: (distance: number | undefined) => void;\n}\n\nconst REQUIRED_STREAMS = [\"altitude\", \"distance\"] as const;\n\nexport function ElevationChart({ route, onMouseHoverDistanceChange }: Props) {\n  const { result: segment } = useAsync<\n    Pick<StravaSegment, \"altitude\" | \"distance\">\n  >(getStravaSegmentStreams, [route.slug, \"routes\", REQUIRED_STREAMS]);\n\n  const [hoverData, setHoverData] = useState<HoverData | undefined>(undefined);\n\n  const handleMouseMove = (data?: HoverData) => {\n    onMouseHoverDistanceChange(data?.distance);\n    setHoverData(data);\n  };\n\n  const data: any[] | undefined = useMemo(() => {\n    if (segment === undefined) {\n      return;\n    }\n\n    return uniqWith(\n      segment.distance.map((distance, index) => ({\n        distance: Math.round(distance / 10) / 100,\n        elevation: segment.altitude[index],\n      })),\n      (a, b) => a.distance === b.distance\n    );\n  }, [segment]);\n\n  if (data === undefined) {\n    return null;\n  }\n\n  return (\n    <div style={{ width: \"100%\", height: 100, marginBottom: \"1em\" }}>\n      <ResponsiveContainer width=\"100%\" height=\"100%\">\n        <AreaChart\n          data={data}\n          margin={{\n            top: 25,\n            right: 15,\n            left: 15,\n            bottom: 15,\n          }}\n          // @ts-ignore\n          baseValue=\"dataMin\"\n        >\n          <defs>\n            <ElevationGradient />\n          </defs>\n          <CartesianGrid vertical={false} />\n          <XAxis\n            name=\"Distance\"\n            dataKey=\"distance\"\n            type=\"number\"\n            allowDecimals={false}\n            tick={false}\n            unit=\"km\"\n            domain={[0, \"dataMax\"]}\n            hide={true}\n          />\n          <YAxis\n            name=\"Elevation\"\n            type=\"number\"\n            allowDecimals={false}\n            tickCount={5}\n            domain={[\"dataMin\", \"auto\"]}\n            unit=\"m\"\n            hide={true}\n          />\n          <Tooltip\n            content={(props) => (\n              <TooltipContent {...props} onMouseMove={handleMouseMove} />\n            )}\n            isAnimationActive={false}\n            position={{ y: 10 }}\n            cursor={{ stroke: \"black\" }}\n          />\n          <Area\n            type=\"monotone\"\n            dataKey=\"elevation\"\n            name=\"Elevation\"\n            stroke=\"black\"\n            fillOpacity={1}\n            fill=\"url(#colorElevation)\"\n            unit=\"m\"\n            isAnimationActive={false}\n          />\n        </AreaChart>\n      </ResponsiveContainer>\n      <div style={{ display: \"flex\", gap: \"1em\" }}>\n        <Text type=\"body-2\" style={{ whiteSpace: \"nowrap\" }}>\n          Distance:{\" \"}\n          {hoverData?.distance ? (\n            <Distance distance={hoverData.distance} />\n          ) : (\n            \"- km\"\n          )}\n        </Text>\n        <Text type=\"body-2\" style={{ whiteSpace: \"nowrap\" }}>\n          Altitude:{\" \"}\n          {hoverData?.altitude ? (\n            <Elevation elevation={hoverData.altitude} />\n          ) : (\n            \"- m\"\n          )}\n        </Text>\n      </div>\n    </div>\n  );\n}\n\ninterface TooltipContentProps extends TooltipProps<any, any> {\n  onMouseMove: (distance: HoverData | undefined) => void;\n}\n\nfunction TooltipContent(props: TooltipContentProps) {\n  useEffect(() => {\n    if (props.payload === undefined || props.payload.length === 0) {\n      props.onMouseMove(undefined);\n    } else {\n      props.onMouseMove({\n        distance: props.payload[0].payload.distance,\n        altitude: props.payload[0].payload.elevation,\n      });\n    }\n  }, [props]);\n\n  return null;\n}\n","import axios from \"axios\";\n\nlet cache: Promise<ZwiftEvent[]>;\n\nexport async function fetchEvents(): Promise<ZwiftEvent[]> {\n  if (!cache) {\n    cache = axios\n      .get<ZwiftEvent[]>(\n        \"https://us-or-rly101.zwift.com/api/public/events/upcoming\"\n      )\n      .then((r) => r.data);\n  }\n\n  return await cache;\n}\n\nexport interface ZwiftEvent {\n  id: number;\n  worldId: number;\n  name: string;\n  description: string;\n  shortName: null | string;\n  shortDescription: null | string;\n  imageUrl: string;\n  rulesId: number;\n  mapId: number;\n  routeId: number;\n  routeUrl: null | string;\n  jerseyHash: number | null;\n  bikeHash: number | null;\n  visible: boolean;\n  overrideMapPreferences: boolean;\n  eventStart: string;\n  durationInSeconds: number;\n  distanceInMeters: number;\n  laps: number;\n  privateEvent: boolean;\n  invisibleToNonParticipants: boolean;\n  followeeEntrantCount: number;\n  totalEntrantCount: number;\n  followeeSignedUpCount: number;\n  totalSignedUpCount: number;\n  followeeJoinedCount: number;\n  totalJoinedCount: number;\n  eventSubgroups: EventSubgroup[];\n  eventSeries: EventSeries | null;\n  auxiliaryUrl: null | string;\n  imageS3Name: null;\n  imageS3Bucket: null;\n  sport: Sport;\n  cullingType: CullingType;\n  rulesSet: RulesSet[];\n  recurring: boolean;\n  recurringOffset: number | null;\n  publishRecurring: boolean;\n  parentId: number | null;\n  type: Type;\n  workoutHash: null;\n  customUrl: null | string;\n  restricted: boolean;\n  unlisted: boolean;\n  eventSecret: null | string;\n  accessExpression: null;\n  tags: string[];\n  qualificationRuleIds: null;\n  lateJoinInMinutes: number | null;\n  timeTrialOptions: TimeTrialOptions | null;\n  microserviceName: string | null;\n  microserviceExternalResourceId: null | string;\n  microserviceEventVisibility: string | null;\n  minGameVersion: null;\n  recordable: boolean;\n  imported: boolean;\n  eventTemplateId: null;\n  eventType: ZwiftEventType;\n}\n\nexport enum CullingType {\n  CullingEventOnly = \"CULLING_EVENT_ONLY\",\n  CullingEverybody = \"CULLING_EVERYBODY\",\n  CullingSubgroupOnly = \"CULLING_SUBGROUP_ONLY\",\n}\n\nexport interface EventSeries {\n  id: number;\n  name: string;\n  description: Description | null;\n  imported: boolean;\n}\n\nexport enum Description {\n  TourOfWatopiaRideStage5 = \"Tour of Watopia - Ride Stage 5\",\n  TourOfWatopiaRunStage5 = \"Tour of Watopia - Run Stage 5\",\n}\n\nexport interface EventSubgroup {\n  id: number;\n  name: string;\n  description: string;\n  label: number;\n  subgroupLabel: SubgroupLabel;\n  rulesId: number;\n  mapId: number;\n  routeId: number;\n  routeUrl: null | string;\n  jerseyHash: number | null;\n  bikeHash: number | null;\n  startLocation: number;\n  invitedLeaders: number[];\n  invitedSweepers: number[];\n  paceType: number;\n  fromPaceValue: number;\n  toPaceValue: number;\n  fieldLimit: null;\n  registrationStart: string;\n  registrationEnd: string;\n  lineUpStart: string;\n  lineUpEnd: string;\n  eventSubgroupStart: string;\n  durationInSeconds: number;\n  laps: number;\n  distanceInMeters: number;\n  signedUp: boolean;\n  signupStatus: number;\n  registered: boolean;\n  registrationStatus: number;\n  followeeEntrantCount: number;\n  totalEntrantCount: number;\n  followeeSignedUpCount: number;\n  totalSignedUpCount: number;\n  followeeJoinedCount: number;\n  totalJoinedCount: number;\n  auxiliaryUrl: null | string;\n  rulesSet: RulesSet[];\n  workoutHash: null;\n  customUrl: null | string;\n  overrideMapPreferences: boolean;\n  tags: string[];\n  lateJoinInMinutes: number | null;\n  timeTrialOptions: TimeTrialOptions | null;\n  qualificationRuleIds: null;\n  accessValidationResult: null;\n}\n\nexport type RulesSet =\n  | \"ALLOWS_LATE_JOIN\"\n  | \"DISABLE_CONTROLLED_ROLLOUT\"\n  | \"LADIES_ONLY\"\n  | \"MEN_ONLY\"\n  | \"NO_DRAFTING\"\n  | \"NO_POWERUPS\"\n  | \"NO_TT_BIKES\"\n  | \"SHOW_RACE_RESULTS\";\n\nexport type SubgroupLabel = \"A\" | \"B\" | \"C\" | \"D\" | \"E\";\n\nexport interface TimeTrialOptions {\n  timeGapBetweenRowsMs: number;\n  maxRows: number;\n  maxRidersPerRow: number;\n}\n\nexport type ZwiftEventType =\n  | \"GROUP_RIDE\"\n  | \"GROUP_WORKOUT\"\n  | \"RACE\"\n  | \"TIME_TRIAL\";\n\nexport type Sport = \"CYCLING\" | \"RUNNING\";\n\nexport type Type =\n  | \"EVENT_TYPE_GROUP_RIDE\"\n  | \"EVENT_TYPE_GROUP_WORKOUT\"\n  | \"EVENT_TYPE_RACE\"\n  | \"EVENT_TYPE_TIME_TRIAL\";\n","import { ListItem, SimpleListItem } from \"@react-md/list\";\nimport { EventFontIcon } from \"@react-md/material-icons\";\nimport { CircularProgress } from \"@react-md/progress\";\nimport { Text } from \"@react-md/typography\";\nimport round from \"lodash/round\";\nimport React, { useMemo } from \"react\";\nimport { useAsync } from \"react-async-hook\";\nimport { Route } from \"zwift-data\";\nimport { fetchEvents, ZwiftEventType } from \"../../../../services/fetchEvents\";\nimport { Distance } from \"../../../Distance\";\n\ninterface Props {\n  route: Route;\n}\n\nexport function RouteEvents({ route }: Props) {\n  const { result: events } = useAsync(fetchEvents, []);\n  const filteredEvents = useMemo(() => {\n    if (!events) {\n      return;\n    }\n\n    return events\n      .filter((event) => {\n        const eventRouteIds = [\n          event.routeId,\n          ...event.eventSubgroups.map((esg) => esg.routeId),\n        ];\n\n        return route.id && eventRouteIds.includes(route.id);\n      })\n      .sort((a, b) => a.eventStart.localeCompare(b.eventStart));\n  }, [events, route]);\n\n  if (filteredEvents === undefined) {\n    return (\n      <SimpleListItem>\n        <CircularProgress\n          id=\"loading-events\"\n          small\n          circleStyle={{ stroke: \"black\" }}\n        />\n      </SimpleListItem>\n    );\n  }\n\n  if (filteredEvents.length === 0) {\n    return (\n      <SimpleListItem>\n        <Text type=\"body-2\">No events on this route today.</Text>\n      </SimpleListItem>\n    );\n  }\n\n  return (\n    <>\n      {filteredEvents.slice(0, 3).map((event) => (\n        <ListItem\n          key={event.id}\n          onClick={() =>\n            window.open(`http://zwift.com/events/view/${event.id}`, \"_blank\")\n          }\n          rightAddon={<EventFontIcon />}\n          rightAddonType=\"icon\"\n          secondaryText={\n            <>\n              {new Intl.DateTimeFormat(\"en-US\", {\n                hour: \"2-digit\",\n                minute: \"2-digit\",\n                weekday: \"short\",\n              }).format(Date.parse(event.eventStart))}\n              <br />\n              {eventTypes[event.eventType] ?? event.eventType} |&nbsp;\n              {event.distanceInMeters !== 0 ? (\n                <Distance distance={event.distanceInMeters / 1_000} />\n              ) : event.durationInSeconds > 0 ? (\n                <>{round(event.durationInSeconds) / 60}min</>\n              ) : (\n                <>{event.laps === 1 ? `1 lap` : `${event.laps} laps`}</>\n              )}\n            </>\n          }\n          threeLines\n        >\n          {event.name}\n        </ListItem>\n      ))}\n      {filteredEvents.length > 3 && (\n        <SimpleListItem>\n          <Text type=\"body-2\">\n            {filteredEvents.length - 3} more{\" \"}\n            {filteredEvents.length === 4 ? \"event\" : \"events\"} happening today\n          </Text>\n        </SimpleListItem>\n      )}\n    </>\n  );\n}\n\nconst eventTypes: { [type in ZwiftEventType]: string } = {\n  GROUP_RIDE: \"Group Ride\",\n  GROUP_WORKOUT: \"Workout\",\n  RACE: \"Race\",\n  TIME_TRIAL: \"Time Trial\",\n};\n","interface Props {\n  seconds: number;\n}\n\nexport function Time({ seconds: secondsInput }: Props) {\n  const seconds = secondsInput % 60;\n  const minutes = ((secondsInput - seconds) / 60) % 60;\n  const hours = ((secondsInput - seconds) / 60 - minutes) / 60;\n\n  if (hours === 0) {\n    if (minutes === 0) {\n      return <>{seconds}s</>;\n    } else {\n      return (\n        <>\n          {minutes}:{seconds.toString().padStart(2, \"0\")}min\n        </>\n      );\n    }\n  } else {\n    return (\n      <>\n        {hours}:{minutes.toString().padStart(2, \"0\")}:\n        {seconds.toString().padStart(2, \"0\")}h\n      </>\n    );\n  }\n}\n","import { ListItem, SimpleListItem } from \"@react-md/list\";\nimport {\n  VisibilityFontIcon,\n  VisibilityOffFontIcon,\n} from \"@react-md/material-icons\";\nimport { Text } from \"@react-md/typography\";\nimport React from \"react\";\nimport { useAsync } from \"react-async-hook\";\nimport { Route, Segment, segments, SegmentType } from \"zwift-data\";\nimport { useIsLoggedInStrava } from \"../../../../hooks/useIsLoggedInStrava\";\nimport { useLocationState } from \"../../../../hooks/useLocationState\";\nimport { fetchSegment } from \"../../../../services/strava/api\";\nimport { LocationStateRoute } from \"../../../../types\";\nimport { Distance } from \"../../../Distance\";\nimport { Time } from \"../../../Time\";\n\ninterface Props {\n  route: Route;\n}\n\nexport function RouteSegments({ route }: Props) {\n  const [locationState, setLocationState] = useLocationState();\n  const segmentsOnRoute = segments\n    .filter((s) => s.world === route.world)\n    .filter((s) => route.segments.includes(s.slug))\n    .sort((a, b) => a.name.localeCompare(b.name));\n\n  if (segmentsOnRoute.length === 0) {\n    return (\n      <SimpleListItem>\n        <Text type=\"body-2\">No segments on this route.</Text>\n      </SimpleListItem>\n    );\n  }\n\n  const selectedSegments = (locationState as LocationStateRoute).segments;\n\n  return (\n    <>\n      {segmentsOnRoute.map((segment) => (\n        <ListItem\n          key={segment.slug}\n          disabled={segment.stravaSegmentId === undefined}\n          rightAddonType=\"icon\"\n          rightAddon={\n            segment.stravaSegmentId ===\n            undefined ? null : selectedSegments.includes(segment) ? (\n              <VisibilityFontIcon />\n            ) : (\n              <VisibilityOffFontIcon />\n            )\n          }\n          secondaryText={<SecondaryText segment={segment} />}\n          threeLines\n          onClick={() => {\n            if (segment.stravaSegmentId === undefined) {\n              return;\n            }\n\n            if (selectedSegments.includes(segment)) {\n              setLocationState({\n                ...locationState,\n                type: \"route\",\n                route: (locationState as LocationStateRoute).route,\n                segments: selectedSegments.filter((s) => s !== segment),\n              });\n            } else {\n              setLocationState({\n                ...locationState,\n                type: \"route\",\n                route: (locationState as LocationStateRoute).route,\n                segments: [...selectedSegments, segment],\n              });\n            }\n          }}\n        >\n          {segment.name}\n        </ListItem>\n      ))}\n    </>\n  );\n}\n\ninterface SecondaryTextProps {\n  segment: Segment;\n}\n\nfunction SecondaryText({ segment }: SecondaryTextProps) {\n  const isLoggedIn = useIsLoggedInStrava();\n  const { result: stravaSegment } = useAsync(\n    async (sid: number | undefined, loggedIn: boolean) => {\n      if (sid === undefined || !loggedIn) {\n        return null;\n      }\n      return await fetchSegment(sid.toString());\n    },\n    [segment.stravaSegmentId, isLoggedIn]\n  );\n  const segmentPB =\n    (stravaSegment?.athlete_segment_stats.effort_count ?? 0) > 0\n      ? stravaSegment?.athlete_segment_stats.pr_elapsed_time\n      : null;\n\n  return (\n    <>\n      <Distance distance={segment.distance} />\n      {segment.avgIncline && (\n        <>\n          {\" \"}\n          |{\" \"}\n          {new Intl.NumberFormat(\"en-US\", {\n            minimumFractionDigits: 1,\n            maximumFractionDigits: 1,\n            style: \"percent\",\n          }).format(segment.avgIncline / 100)}\n        </>\n      )}\n      <br />\n      {segmentPB ? (\n        <>\n          PB: <Time seconds={segmentPB} />\n        </>\n      ) : (\n        segmentTypes[segment.type]\n      )}\n    </>\n  );\n}\n\nconst segmentTypes: { [type in SegmentType]: string } = {\n  climb: \"Climb\",\n  sprint: \"Sprint\",\n  segment: \"Segment\",\n};\n","import { ListItem, SimpleListItem } from \"@react-md/list\";\nimport { OpenInNewFontIcon, TimerFontIcon } from \"@react-md/material-icons\";\nimport { CircularProgress } from \"@react-md/progress\";\nimport React from \"react\";\nimport { useAsync } from \"react-async-hook\";\nimport { Route } from \"zwift-data\";\nimport { useIsLoggedInStrava } from \"../../../../hooks/useIsLoggedInStrava\";\nimport { fetchSegment } from \"../../../../services/strava/api\";\nimport { Time } from \"../../../Time\";\n\ninterface Props {\n  route: Route;\n}\n\nexport function RouteStravaPB({ route }: Props) {\n  const isLoggedInStrava = useIsLoggedInStrava();\n\n  const {\n    result: segment,\n    loading,\n    error,\n  } = useAsync(\n    async (loggedIn: boolean, segmentId?: number) => {\n      if (!loggedIn || segmentId === undefined) {\n        return null;\n      }\n\n      return await fetchSegment(segmentId.toString());\n    },\n    [isLoggedInStrava, route.stravaSegmentId]\n  );\n\n  if (loading) {\n    return (\n      <SimpleListItem\n        leftAddon={<TimerFontIcon />}\n        leftAddonType=\"icon\"\n        rightAddon={<OpenInNewFontIcon />}\n        rightAddonType=\"icon\"\n      >\n        <CircularProgress\n          id={`strava-route-pb-${route.id}`}\n          circleStyle={{ stroke: \"black\" }}\n          small\n        />\n      </SimpleListItem>\n    );\n  }\n\n  if (error || segment === null || segment === undefined) {\n    return null;\n  }\n\n  const handleClick = () => {\n    window.open(`https://www.strava.com/segments/${segment.id}`, \"_blank\");\n  };\n\n  return (\n    <ListItem\n      leftAddon={<TimerFontIcon />}\n      leftAddonType=\"icon\"\n      rightAddon={<OpenInNewFontIcon />}\n      rightAddonType=\"icon\"\n      onClick={handleClick}\n    >\n      {segment.athlete_segment_stats.effort_count === 0 ? (\n        <>No time set</>\n      ) : (\n        <Time seconds={segment.athlete_segment_stats.pr_elapsed_time!} />\n      )}\n    </ListItem>\n  );\n}\n","import { Avatar } from \"@react-md/avatar\";\nimport { Button } from \"@react-md/button\";\nimport { TextIconSpacing } from \"@react-md/icon\";\nimport { List, ListItem, ListSubheader, SimpleListItem } from \"@react-md/list\";\nimport {\n  EventFontIcon,\n  LandscapeFontIcon,\n  ListFontIcon,\n  MapFontIcon,\n  OpenInNewFontIcon,\n  SpaceBarFontIcon,\n  StarFontIcon,\n} from \"@react-md/material-icons\";\nimport { Text } from \"@react-md/typography\";\nimport stravaLogo from \"../../../../assets/strava-40x40.png\";\nimport whatsOnZwiftLogo from \"../../../../assets/WhatsOnZwift-40x40.png\";\nimport zwiftInsiderLogo from \"../../../../assets/ZwiftInsider-40x40.jpg\";\nimport { Route, worlds } from \"zwift-data\";\nimport { Distance } from \"../../../Distance\";\nimport { Elevation } from \"../../../Elevation\";\nimport { ElevationChart } from \"../../ElevationChart\";\nimport { RouteEvents } from \"./RouteEvents\";\nimport { RouteSegments } from \"./RouteSegments\";\nimport { RouteStravaPB } from \"./RouteStravaPB\";\n\ninterface Props {\n  route: Route;\n  onMouseHoverDistanceChange: (distance: number | undefined) => void;\n  backButtonText: string;\n  onBackButtonClick: () => void;\n}\n\nexport function RouteDetails({\n  route,\n  onMouseHoverDistanceChange,\n  backButtonText,\n  onBackButtonClick,\n}: Props) {\n  const world = worlds.find((w) => w.slug === route.world)!;\n\n  return (\n    <List>\n      <SimpleListItem>\n        <Button themeType=\"outline\" onClick={onBackButtonClick}>\n          <TextIconSpacing icon={<ListFontIcon />}>\n            {backButtonText}\n          </TextIconSpacing>\n        </Button>\n      </SimpleListItem>\n      <SimpleListItem>\n        <Text type=\"headline-6\" style={{ margin: 0 }}>\n          {route.name}\n        </Text>\n      </SimpleListItem>\n\n      <SimpleListItem\n        clickable={false}\n        leftAddon={<SpaceBarFontIcon />}\n        leftAddonType=\"icon\"\n      >\n        <Distance distance={route.distance} />\n        {route.leadInDistance !== undefined && (\n          <>\n            &nbsp;\n            <small>\n              (+\n              <Distance distance={route.leadInDistance} />)\n            </small>\n          </>\n        )}\n      </SimpleListItem>\n\n      <SimpleListItem\n        clickable={false}\n        leftAddon={<LandscapeFontIcon />}\n        leftAddonType=\"icon\"\n      >\n        <Elevation elevation={route.elevation} />\n        {route.leadInElevation !== undefined && (\n          <>\n            &nbsp;\n            <small>\n              (+\n              <Elevation elevation={route.leadInElevation} />)\n            </small>\n          </>\n        )}\n      </SimpleListItem>\n\n      {route.experience && (\n        <SimpleListItem\n          clickable={false}\n          leftAddon={<StarFontIcon />}\n          leftAddonType=\"icon\"\n        >\n          {route.experience}XP\n        </SimpleListItem>\n      )}\n\n      {route.eventOnly && (\n        <SimpleListItem\n          clickable={false}\n          leftAddon={<EventFontIcon />}\n          leftAddonType=\"icon\"\n        >\n          Event only route\n        </SimpleListItem>\n      )}\n\n      <SimpleListItem clickable={false} leftAddon={<MapFontIcon />}>\n        {world.name}\n      </SimpleListItem>\n\n      <RouteStravaPB route={route} />\n\n      <SimpleListItem>\n        <ElevationChart\n          route={route}\n          onMouseHoverDistanceChange={onMouseHoverDistanceChange}\n        />\n      </SimpleListItem>\n\n      <ListSubheader>Upcoming Events</ListSubheader>\n      <RouteEvents route={route} />\n\n      <ListSubheader>Segments</ListSubheader>\n      <RouteSegments route={route} />\n\n      <ListSubheader>Links</ListSubheader>\n      {route.zwiftInsiderUrl && (\n        <ListItem\n          onClick={() => window.open(route.zwiftInsiderUrl, \"_blank\")}\n          leftAddon={\n            <Avatar color=\"#fc6719\">\n              <img src={zwiftInsiderLogo} alt=\"\" />\n            </Avatar>\n          }\n          leftAddonType=\"avatar\"\n          rightAddon={<OpenInNewFontIcon />}\n          rightAddonType=\"icon\"\n        >\n          ZwiftInsider\n        </ListItem>\n      )}\n      {route.stravaSegmentUrl && (\n        <ListItem\n          onClick={() => window.open(route.stravaSegmentUrl, \"_blank\")}\n          leftAddon={\n            <Avatar color=\"#ff6b00\">\n              <img src={stravaLogo} alt=\"\" />\n            </Avatar>\n          }\n          leftAddonType=\"avatar\"\n          rightAddon={<OpenInNewFontIcon />}\n          rightAddonType=\"icon\"\n        >\n          Strava Segment\n        </ListItem>\n      )}\n      {route.whatsOnZwiftUrl && (\n        <ListItem\n          onClick={() => window.open(route.whatsOnZwiftUrl, \"_blank\")}\n          leftAddon={\n            <Avatar color=\"#000000\">\n              <img src={whatsOnZwiftLogo} alt=\"\" />\n            </Avatar>\n          }\n          leftAddonType=\"avatar\"\n          rightAddon={<OpenInNewFontIcon />}\n          rightAddonType=\"icon\"\n        >\n          What's on Zwift\n        </ListItem>\n      )}\n    </List>\n  );\n}\n","export default \"data:image/jpeg;base64,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\"","export default \"data:image/png;base64,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\"","import { Avatar } from \"@react-md/avatar\";\nimport { Button } from \"@react-md/button\";\nimport { TextIconSpacing } from \"@react-md/icon\";\nimport { List, ListItem, ListSubheader, SimpleListItem } from \"@react-md/list\";\nimport {\n  LandscapeFontIcon,\n  ListFontIcon,\n  MapFontIcon,\n  OpenInNewFontIcon,\n  SpaceBarFontIcon,\n  TimerFontIcon,\n} from \"@react-md/material-icons\";\nimport { CircularProgress } from \"@react-md/progress\";\nimport { Text } from \"@react-md/typography\";\nimport React from \"react\";\nimport { useAsync } from \"react-async-hook\";\nimport stravaLogo from \"../../../../assets/strava-40x40.png\";\nimport { useIsLoggedInStrava } from \"../../../../hooks/useIsLoggedInStrava\";\nimport { useLocationState } from \"../../../../hooks/useLocationState\";\nimport { openStravaAuthUrl } from \"../../../../services/strava/auth\";\nimport { getStravaActivity } from \"../../../../services/StravaActivityRepository\";\nimport { Distance } from \"../../../Distance\";\nimport { Elevation } from \"../../../Elevation\";\nimport { Time } from \"../../../Time\";\n\ninterface Props {\n  activityId: string;\n}\n\nexport function StravaActivityDetails({ activityId }: Props) {\n  const isLoggedInStrava = useIsLoggedInStrava();\n\n  if (!isLoggedInStrava) {\n    return (\n      <List>\n        <ListItem\n          leftAddon={\n            <Avatar color=\"#ff6b00\">\n              <img src={stravaLogo} alt=\"\" />\n            </Avatar>\n          }\n          leftAddonType=\"avatar\"\n          rightAddon={<OpenInNewFontIcon />}\n          rightAddonType=\"icon\"\n          secondaryText=\"to view Strava activity\"\n          onClick={openStravaAuthUrl}\n        >\n          Authorize Strava App\n        </ListItem>\n      </List>\n    );\n  }\n\n  return <StravaActivityDetailsWithToken activityId={activityId} />;\n}\n\nfunction StravaActivityDetailsWithToken({ activityId }: Props) {\n  const [locationState, setLocationState] = useLocationState();\n\n  const { result: activity, loading } = useAsync(getStravaActivity, [\n    activityId,\n  ]);\n\n  if (!activity) {\n    if (loading) {\n      return (\n        <CircularProgress\n          id={`strava-activity-${activityId}`}\n          circleStyle={{ stroke: \"black\" }}\n        />\n      );\n    } else {\n      return (\n        <List>\n          <SimpleListItem\n            secondaryText=\"Make sure you can access the activity and it was recorded in Zwift.\"\n            threeLines\n          >\n            An error occurred\n          </SimpleListItem>\n        </List>\n      );\n    }\n  }\n\n  return (\n    <List>\n      <SimpleListItem>\n        <Button\n          themeType=\"outline\"\n          onClick={() => {\n            setLocationState({\n              world: locationState.world,\n              query: locationState.query,\n              type: \"strava-activities\",\n            });\n          }}\n        >\n          <TextIconSpacing icon={<ListFontIcon />}>\n            Strava activities\n          </TextIconSpacing>\n        </Button>\n      </SimpleListItem>\n\n      <SimpleListItem>\n        <Text type=\"headline-6\" style={{ margin: 0 }}>\n          {activity.name}\n        </Text>\n      </SimpleListItem>\n\n      <SimpleListItem\n        clickable={false}\n        leftAddon={<TimerFontIcon />}\n        leftAddonType=\"icon\"\n      >\n        <Time seconds={activity.time} />\n      </SimpleListItem>\n      <SimpleListItem\n        clickable={false}\n        leftAddon={<SpaceBarFontIcon />}\n        leftAddonType=\"icon\"\n      >\n        <Distance distance={activity.distance} />\n      </SimpleListItem>\n      <SimpleListItem\n        clickable={false}\n        leftAddon={<LandscapeFontIcon />}\n        leftAddonType=\"icon\"\n      >\n        <Elevation elevation={activity.elevation} />\n      </SimpleListItem>\n      <SimpleListItem clickable={false} leftAddon={<MapFontIcon />}>\n        {activity.world.name}\n      </SimpleListItem>\n\n      <ListSubheader>Links</ListSubheader>\n      <ListItem\n        onClick={() =>\n          window.open(\n            `https://www.strava.com/activities/${activity.id}`,\n            \"_blank\"\n          )\n        }\n        leftAddon={\n          <Avatar color=\"#000000\">\n            <img src={stravaLogo} alt=\"\" />\n          </Avatar>\n        }\n        leftAddonType=\"avatar\"\n        rightAddon={<OpenInNewFontIcon />}\n        rightAddonType=\"icon\"\n      >\n        Activity on Strava\n      </ListItem>\n    </List>\n  );\n}\n","import { World } from \"zwift-data\";\n\ninterface Props {\n  world: World;\n}\n\nexport function WorldDetails({ world }: Props) {\n    return null;\n}\n","import React from \"react\";\nimport { useLocationState } from \"../../../hooks/useLocationState\";\nimport { RouteDetails } from \"./RouteDetails\";\nimport { StravaActivityDetails } from \"./StravaActivityDetails\";\nimport { WorldDetails } from \"./WorldDetails\";\n\ninterface Props {\n  onMouseHoverDistanceChange: (distance: number | undefined) => void;\n  backButtonText: string;\n  onBackButtonClick: () => void;\n}\n\nexport function Details({\n  onMouseHoverDistanceChange,\n  backButtonText,\n  onBackButtonClick,\n}: Props) {\n  const [locationState] = useLocationState();\n\n  if (locationState.type === \"route\") {\n    return (\n      <RouteDetails\n        route={locationState.route}\n        onMouseHoverDistanceChange={onMouseHoverDistanceChange}\n        backButtonText={backButtonText}\n        onBackButtonClick={onBackButtonClick}\n      />\n    );\n  } else if (locationState.type === \"strava-activity\") {\n    return (\n      <StravaActivityDetails activityId={locationState.stravaActivityId} />\n    );\n  } else {\n    return <WorldDetails world={locationState.world} />;\n  }\n}\n","import { Button } from \"@react-md/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@react-md/dialog\";\nimport { Text } from \"@react-md/typography\";\nimport React from \"react\";\nimport styles from \"./index.module.scss\";\n\ninterface Props {\n  visible: boolean;\n  onClose: () => void;\n}\n\nexport function InfoDialog({ visible, onClose }: Props) {\n  return (\n    <Dialog\n      id=\"info-dialog\"\n      aria-labelledby=\"info-dialog-title\"\n      visible={visible}\n      onRequestClose={onClose}\n      className={styles.Dialog}\n    >\n      <DialogHeader style={{ paddingBottom: 0 }}>\n        <DialogTitle id=\"info-dialog-title\">Zwift Map</DialogTitle>\n      </DialogHeader>\n      <DialogContent>\n        <Text>ZwiftMap is a fan project created by Andi Ptzold.</Text>\n\n        <Text>\n          All code is open source and available on{\" \"}\n          <a\n            href=\"https://github.com/andipaetzold/zwiftmap\"\n            rel=\"noreferrer noopener\"\n            target=\"_blank\"\n          >\n            GitHub\n          </a>\n          .\n        </Text>\n\n        <Text>\n          Route and Segment Information is collected and combined from:{\" \"}\n        </Text>\n        <ul>\n          <li>\n            <a\n              href=\"https://strava.com\"\n              rel=\"noreferrer noopener\"\n              target=\"_blank\"\n            >\n              Strava\n            </a>\n          </li>\n          <li>\n            <a\n              href=\"https://whatsonzwift.com\"\n              rel=\"noreferrer noopener\"\n              target=\"_blank\"\n            >\n              What's on Zwift\n            </a>\n          </li>\n          <li>\n            <a\n              href=\"https://zwift.com\"\n              rel=\"noreferrer noopener\"\n              target=\"_blank\"\n            >\n              Zwift\n            </a>\n          </li>\n          <li>\n            <a\n              href=\"https://zwifthub.com\"\n              rel=\"noreferrer noopener\"\n              target=\"_blank\"\n            >\n              ZwiftHub\n            </a>\n          </li>\n          <li>\n            <a\n              href=\"https://zwiftpower.com\"\n              rel=\"noreferrer noopener\"\n              target=\"_blank\"\n            >\n              Zwift Power\n            </a>\n          </li>\n        </ul>\n\n        <Text>\n          World maps were created by{\" \"}\n          <a href=\"https://zwift.com\" rel=\"noreferrer noopener\" target=\"_blank\">\n            Zwift\n          </a>\n          .\n        </Text>\n\n        <Text>\n          ZwiftMap does not collect, analyze or store any sensitive information.\n          The app only uses data required for the operation and monitoring.\n        </Text>\n\n        <Text type=\"headline-6\" style={{ margin: 0 }}>\n          Contact\n        </Text>\n        <Text>\n          Andi Ptzold\n          <br />\n          <a\n            href=\"mainto:info@zwiftmap.com\"\n            rel=\"noreferrer noopener\"\n            target=\"_blank\"\n          >\n            info@zwiftmap.com\n          </a>\n          <br />\n          Support this project via{\" \"}\n          <a\n            href=\"https://paypal.com/donate?hosted_button_id=PWQGBVL8H88QW\"\n            rel=\"noreferrer noopener\"\n            target=\"_blank\"\n          >\n            PayPal\n          </a>\n        </Text>\n      </DialogContent>\n      <DialogFooter>\n        <Button id=\"dialog-close\" onClick={onClose}>\n          Close\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import { Button } from \"@react-md/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@react-md/dialog\";\nimport { Fieldset, Radio } from \"@react-md/form\";\nimport React, { ChangeEvent } from \"react\";\nimport { Sport } from \"zwift-data\";\nimport { useSettings } from \"../../hooks/useSettings\";\nimport { Settings } from \"../../types\";\n\ninterface Props {\n  visible: boolean;\n  onClose: () => void;\n}\n\nexport function SettingsDialog({ visible, onClose }: Props) {\n  const [settings, setSettings] = useSettings();\n\n  const handleSportChange = (e: ChangeEvent<HTMLInputElement>) => {\n    if (e.target.checked) {\n      setSettings({ ...settings, sport: e.target.value as Sport });\n    }\n  };\n\n  const handleUnitsChange = (e: ChangeEvent<HTMLInputElement>) => {\n    if (e.target.checked) {\n      setSettings({ ...settings, units: e.target.value as Settings[\"units\"] });\n    }\n  };\n\n  return (\n    <Dialog\n      id=\"settings-dialog\"\n      aria-labelledby=\"settings-dialog-title\"\n      visible={visible}\n      onRequestClose={onClose}\n    >\n      <DialogHeader style={{ paddingBottom: 0 }}>\n        <DialogTitle id=\"settings-dialog-title\">Settings</DialogTitle>\n      </DialogHeader>\n      <DialogContent>\n        <Fieldset legend=\"Sport\">\n          <Radio\n            id=\"settings-dialog-cycling\"\n            name=\"settings-dialog-sport\"\n            label=\"Cycling\"\n            value=\"cycling\"\n            checked={settings.sport === \"cycling\"}\n            onChange={handleSportChange}\n          />\n          <Radio\n            id=\"settings-dialog-running\"\n            name=\"settings-dialog-sport\"\n            label=\"Running\"\n            value=\"running\"\n            checked={settings.sport === \"running\"}\n            onChange={handleSportChange}\n          />\n        </Fieldset>\n\n        <Fieldset legend=\"Units\">\n          <Radio\n            id=\"settings-dialog-metric\"\n            name=\"settings-dialog-units\"\n            label=\"Metric\"\n            value=\"metric\"\n            checked={settings.units === \"metric\"}\n            onChange={handleUnitsChange}\n          />\n          <Radio\n            id=\"settings-dialog-imperial\"\n            name=\"settings-dialog-units\"\n            label=\"Imperial\"\n            value=\"imperial\"\n            checked={settings.units === \"imperial\"}\n            onChange={handleUnitsChange}\n          />\n        </Fieldset>\n      </DialogContent>\n      <DialogFooter>\n        <Button id=\"dialog-close\" onClick={onClose}>\n          Close\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n}\n","import { Divider } from \"@react-md/divider\";\nimport { List, ListItem } from \"@react-md/list\";\nimport {\n  ChevronRightFontIcon,\n  InfoFontIcon,\n  MenuFontIcon,\n  SettingsFontIcon,\n} from \"@react-md/material-icons\";\nimport { Menu, MenuItem } from \"@react-md/menu\";\nimport { BOTTOM_RIGHT_ANCHOR, useToggle } from \"@react-md/utils\";\nimport React, { useRef, useState } from \"react\";\nimport { useIsLoggedInStrava } from \"../../hooks/useIsLoggedInStrava\";\nimport { useIsMobile } from \"../../hooks/useIsMobile\";\nimport { openStravaAuthUrl } from \"../../services/strava/auth\";\nimport { removeStravaToken } from \"../../services/strava/token\";\nimport { InfoDialog } from \"../InfoDialog\";\nimport { SettingsDialog } from \"../SettingsDialog\";\n\ninterface Props {\n  onBottomSheetClose: () => void;\n}\n\nexport function MenuButton({ onBottomSheetClose }: Props) {\n  const buttonRef = useRef<HTMLLIElement | null>(null);\n  const [menuVisible, setMenuVisible] = useState(false);\n  const [settingsDialogVisible, showSettingsDialog, hideSettingsDialog] =\n    useToggle(false);\n  const [infoDialogVisible, showInfoDialog, hideInfoDialog] = useToggle(false);\n\n  const isMobile = useIsMobile();\n  const isStravaLoggedIn = useIsLoggedInStrava();\n\n  return (\n    <>\n      <ListItem\n        onClick={(e) => {\n          e.stopPropagation();\n          setMenuVisible(!menuVisible);\n        }}\n        rightAddon={isMobile ? <MenuFontIcon /> : <ChevronRightFontIcon />}\n        rightAddonType=\"icon\"\n        id=\"sidebar-menu\"\n        ref={buttonRef}\n      >\n        Menu\n      </ListItem>\n\n      <Menu\n        id=\"sidebar-menu\"\n        controlId=\"sidebar-menu\"\n        visible={menuVisible}\n        onRequestClose={() => setMenuVisible(false)}\n        aria-labelledby=\"sidebar-menu\"\n        anchor={BOTTOM_RIGHT_ANCHOR}\n        portal\n      >\n        <List>\n          <MenuItem\n            onClick={() => {\n              showInfoDialog();\n              onBottomSheetClose();\n            }}\n            leftAddon={<InfoFontIcon />}\n            leftAddonType=\"icon\"\n          >\n            Info\n          </MenuItem>\n          <MenuItem\n            onClick={() => {\n              showSettingsDialog();\n              onBottomSheetClose();\n            }}\n            leftAddon={<SettingsFontIcon />}\n            leftAddonType=\"icon\"\n          >\n            Settings\n          </MenuItem>\n          <Divider />\n          {isStravaLoggedIn ? (\n            <MenuItem\n              onClick={() => {\n                removeStravaToken();\n              }}\n            >\n              Logout from Strava\n            </MenuItem>\n          ) : (\n            <MenuItem onClick={openStravaAuthUrl}>Login to Strava</MenuItem>\n          )}\n        </List>\n      </Menu>\n\n      <SettingsDialog\n        visible={settingsDialogVisible}\n        onClose={hideSettingsDialog}\n      />\n\n      <InfoDialog visible={infoDialogVisible} onClose={hideInfoDialog} />\n    </>\n  );\n}\n","import { useMediaQuery } from \"react-responsive\";\n\nexport function useIsMobile() {\n  return useMediaQuery({\n    query: \"(max-width: 750px)\",\n  });\n}\n","import { CircularProgress } from \"@react-md/progress\";\nimport uniqWith from \"lodash/uniqWith\";\nimport React, { useMemo } from \"react\";\nimport { useAsync } from \"react-async-hook\";\nimport { Area, AreaChart, XAxis, YAxis } from \"recharts\";\nimport { Route } from \"zwift-data\";\nimport { getStravaSegmentStreams } from \"../../services/StravaSegmentRepository\";\nimport { StravaSegment } from \"../../types\";\nimport { ElevationGradient } from \"../ElevationGradient\";\n\ninterface Props {\n  route: Route;\n}\n\nconst REQUIRED_STREAMS = [\"altitude\", \"distance\"];\n\nexport function ElevationChartPreview({ route }: Props) {\n  const { result: segment } = useAsync<\n    Pick<StravaSegment, \"altitude\" | \"distance\">\n  >(getStravaSegmentStreams, [route.slug, 'routes', REQUIRED_STREAMS]);\n\n  const data: any[] | undefined = useMemo(() => {\n    if (segment === undefined) {\n      return;\n    }\n\n    const filteredData = uniqWith(\n      segment.distance.map((distance, index) => ({\n        distance: Math.round(distance / 100) / 10,\n        elevation: segment.altitude[index],\n      })),\n      (a, b) => a.distance === b.distance\n    );\n\n    // remove negative elevation\n    const lowestElevation = Math.min(...filteredData.map((d) => d.elevation));\n    return filteredData.map((d) => ({\n      ...d,\n      elevation: d.elevation - lowestElevation,\n    }));\n  }, [segment]);\n\n  if (!data) {\n    return (\n      <CircularProgress\n        id={`elevation-preview-${route.slug}`}\n        small\n        circleStyle={{ stroke: \"black\" }}\n      />\n    );\n  }\n\n  return (\n    <AreaChart\n      height={50}\n      width={100}\n      data={data}\n      // @ts-ignore\n      baseValue=\"dataMin\"\n    >\n      <defs>\n        <ElevationGradient />\n      </defs>\n\n      <XAxis\n        dataKey=\"distance\"\n        type=\"number\"\n        domain={[0, \"dataMax\"]}\n        unit=\"km\"\n        hide={true}\n      />\n\n      <YAxis\n        dataKey=\"elevation\"\n        type=\"number\"\n        allowDecimals={false}\n        domain={[0, 750]}\n        unit=\"m\"\n        hide={true}\n      />\n\n      <Area\n        type=\"monotone\"\n        dataKey=\"elevation\"\n        name=\"Elevation\"\n        stroke=\"black\"\n        fillOpacity={1}\n        fill=\"url(#colorElevation)\"\n        unit=\"m\"\n        isAnimationActive={false}\n      />\n    </AreaChart>\n  );\n}\n","import { ListItem } from \"@react-md/list\";\nimport React, { useRef } from \"react\";\nimport { Route, worlds } from \"zwift-data\";\nimport { useLocationState } from \"../../hooks/useLocationState\";\nimport { useOnScreen } from \"../../hooks/useOnScreen\";\nimport { Distance } from \"../Distance\";\nimport { Elevation } from \"../Elevation\";\nimport { ElevationChartPreview } from \"../ElevationChartPreview\";\n\nexport interface Props {\n  route: Route;\n  onHoverRoute: (route?: string) => void;\n  showWorldName: boolean;\n}\n\nexport function ListItemRoute({ route, onHoverRoute, showWorldName }: Props) {\n  const [locationState, setLocationState] = useLocationState();\n  const handleClick = () => {\n    setLocationState({\n      world: worlds.find((w) => w.slug === route.world)!,\n      route,\n      segments: [],\n      query: locationState.query,\n      type: \"route\",\n    });\n    onHoverRoute(undefined);\n  };\n\n  return (\n    <ListItem\n      secondaryText={<RouteInfo route={route} showWorldName={showWorldName} />}\n      threeLines={showWorldName}\n      onClick={handleClick}\n      rightAddonType=\"large-media\"\n      rightAddon={<ChartContainer route={route} />}\n      onMouseEnter={() => onHoverRoute(route.slug)}\n      onMouseLeave={() => onHoverRoute(undefined)}\n    >\n      {route.name}\n    </ListItem>\n  );\n}\n\ninterface RouteInfoProps {\n  route: Route;\n  showWorldName: boolean;\n}\n\nfunction RouteInfo({ route, showWorldName }: RouteInfoProps) {\n  return (\n    <>\n      {showWorldName && (\n        <>\n          {worlds.find((w) => w.slug === route.world)!.name}\n          <br />\n        </>\n      )}\n      <Distance distance={route.distance} /> |{\" \"}\n      <Elevation elevation={route.elevation} />\n    </>\n  );\n}\n\ninterface ChartProps {\n  route: Route;\n}\n\nfunction ChartContainer({ route }: ChartProps) {\n  const ref = useRef<HTMLDivElement | null>(null);\n\n  const onScreen = useOnScreen(ref);\n\n  return (\n    <div ref={ref} style={{ width: \"100%\", pointerEvents: \"none\" }}>\n      {onScreen ? <ElevationChartPreview route={route} /> : null}\n    </div>\n  );\n}\n","import { MutableRefObject, useEffect, useState } from \"react\";\n\n/**\n * @see https://usehooks.com/useOnScreen/\n */\nexport function useOnScreen(ref: MutableRefObject<HTMLElement | null>) {\n  const [isIntersecting, setIntersecting] = useState(false);\n  useEffect(() => {\n    const current = ref.current;\n\n    const observer = new IntersectionObserver(([entry]) => {\n      setIntersecting(entry.isIntersecting);\n    });\n    if (current) {\n      observer.observe(current);\n    }\n    return () => {\n      if (current) {\n        observer.unobserve(current);\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return isIntersecting;\n}\n","import { Divider } from \"@react-md/divider\";\nimport { ListItem } from \"@react-md/list\";\nimport { routes } from \"zwift-data\";\nimport { useIsLoggedInStrava } from \"../../hooks/useIsLoggedInStrava\";\nimport { useLocationState } from \"../../hooks/useLocationState\";\nimport { useSettings } from \"../../hooks/useSettings\";\nimport { ListItemRoute } from \"./ListItemRoute\";\n\ninterface Props {\n  onHoverRoute: (route?: string) => void;\n}\n\nexport function RouteList({ onHoverRoute }: Props) {\n  const [settings] = useSettings();\n  const [locationState, setLocationState] = useLocationState();\n  const isLoggedIn = useIsLoggedInStrava();\n\n  const handleStravaClick = () => {\n    setLocationState({\n      world: locationState.world,\n      query: \"\",\n      type: \"strava-activities\",\n    });\n  };\n\n  return (\n    <>\n      {isLoggedIn && (\n        <>\n          <ListItem secondaryText=\"Last 30 days\" onClick={handleStravaClick}>\n            Recent Strava Activities\n          </ListItem>\n          <Divider />\n        </>\n      )}\n      {routes\n        .filter((route) => route.world === locationState.world.slug)\n        .filter((route) => route.sports.includes(settings.sport))\n        .filter((route) => route.stravaSegmentId !== undefined)\n        .sort((a, b) => a.name.localeCompare(b.name))\n        .map((route) => (\n          <ListItemRoute\n            route={route}\n            key={route.slug}\n            onHoverRoute={onHoverRoute}\n            showWorldName={false}\n          />\n        ))}\n    </>\n  );\n}\n","import { Button } from \"@react-md/button\";\nimport { TextField } from \"@react-md/form\";\nimport { FontIcon } from \"@react-md/icon\";\nimport React from \"react\";\nimport { useLocationState } from \"../../hooks/useLocationState\";\n\nexport function SearchInput() {\n  const [locationState, setLocationState] = useLocationState();\n  return (\n    <TextField\n      id=\"search-input\"\n      style={{ width: \"100%\" }}\n      placeholder=\"Search for worlds and routes\"\n      value={locationState.query}\n      onChange={(e) => {\n        setLocationState({\n          world: locationState.world,\n          type: \"default\",\n          query: e.target.value,\n        });\n      }}\n      isRightAddon={false}\n      rightChildren={\n        locationState.query !== \"\" && (\n          <Button\n            buttonType=\"icon\"\n            style={{ right: 0, position: \"absolute\" }}\n            onClick={() => {\n              setLocationState({ ...locationState, query: \"\" });\n            }}\n            aria-label=\"Clear search field\"\n          >\n            <FontIcon>clear</FontIcon>\n          </Button>\n        )\n      }\n    />\n  );\n}\n","import { Route, routes, Segment, Sport, World, worlds } from \"zwift-data\";\n\nconst REGEX_STRAVA_ACTIVITY = /strava\\.com\\/activities\\/(\\d{10})/;\n\nexport type SearchResult =\n  | SearchResultWorld\n  | SearchResultRoute\n  | SearchResultSegment\n  | SearchResultStravaActivity;\n\nexport interface SearchResultWorld {\n  type: \"world\";\n  terms: string[];\n  data: World;\n}\n\nexport interface SearchResultRoute {\n  type: \"route\";\n  terms: string[];\n  data: Route;\n}\n\nexport interface SearchResultSegment {\n  type: \"segment\";\n  terms: string[];\n  data: Segment;\n}\n\nexport interface SearchResultStravaActivity {\n  type: \"strava-activity\";\n  data: {\n    slug: string;\n    activityId: string;\n  };\n}\n\nconst searchResults: (\n  | SearchResultWorld\n  | SearchResultRoute\n  | SearchResultSegment\n)[] = [\n  ...[...worlds]\n    .sort((a, b) => a.name.localeCompare(b.name))\n    .map((world) => ({\n      type: \"world\" as const,\n      terms: [world.name].map((t) => t.toLocaleLowerCase()),\n      data: world,\n    })),\n  ...[...routes]\n    .sort((a, b) => a.name.localeCompare(b.name))\n    .filter((route) => route.stravaSegmentId !== undefined)\n    .map((route) => ({\n      type: \"route\" as const,\n      terms: [worlds.find((w) => w.slug === route.world)!.name, route.name].map(\n        (t) => t.toLocaleLowerCase()\n      ),\n      data: route,\n    })),\n  //   ...segments\n  //     .filter((route) => route.stravaSegmentId !== undefined)\n  //     .map((segment) => ({\n  //     type: \"segment\" as const,\n  //     terms: [\n  //       worlds.find((w) => w.slug === segment.slug)!.name,\n  //       segment.name,\n  //     ].map((t) => t.toLocaleLowerCase()),\n  //     data: segment,\n  //   })),\n];\n\nexport function search(term: string, sport: Sport): SearchResult[] {\n  if (REGEX_STRAVA_ACTIVITY.test(term)) {\n    const [, stravaActivityId] = REGEX_STRAVA_ACTIVITY.exec(term)!;\n    return [\n      {\n        type: \"strava-activity\",\n        data: {\n          activityId: stravaActivityId,\n          slug: `strava-activity-${stravaActivityId}`,\n        },\n      },\n    ];\n  }\n\n  const terms = term\n    .toLocaleLowerCase()\n    .split(\" \")\n    .filter((t) => t.length > 0);\n\n  return searchResults\n    .filter((sr) => {\n      if (sr.type === \"world\" || sr.type === \"segment\") {\n        return true;\n      } else {\n        return sr.data.sports.includes(sport);\n      }\n    })\n\n    .filter((sr) =>\n      terms.every((t) => sr.terms.some((srt) => srt.includes(t)))\n    );\n}\n\nexport const searchResultTypes = {\n  world: {\n    title: \"Worlds\",\n  },\n  route: {\n    title: \"Routes\",\n  },\n  segment: {\n    title: \"Segments\",\n  },\n  \"strava-activity\": {\n    title: \"Strava Activity\",\n  },\n};\n","import { Avatar } from \"@react-md/avatar\";\nimport { ListItem, SimpleListItem } from \"@react-md/list\";\nimport { OpenInNewFontIcon } from \"@react-md/material-icons\";\nimport { CircularProgress } from \"@react-md/progress\";\nimport React from \"react\";\nimport { useAsync } from \"react-async-hook\";\nimport stravaLogo from \"../../assets/strava-40x40.png\";\nimport { useIsLoggedInStrava } from \"../../hooks/useIsLoggedInStrava\";\nimport { useLocationState } from \"../../hooks/useLocationState\";\nimport { openStravaAuthUrl } from \"../../services/strava/auth\";\nimport { getStravaActivity } from \"../../services/StravaActivityRepository\";\nimport { Distance } from \"../Distance\";\nimport { Elevation } from \"../Elevation\";\nimport { Time } from \"../Time\";\n\nexport interface Props {\n  activity: { activityId: string; slug: string };\n  onHoverRoute: (route?: string) => void;\n}\n\nexport function ListItemStravaActivity({ activity, onHoverRoute }: Props) {\n  const isLoggedInStrava = useIsLoggedInStrava();\n\n  if (!isLoggedInStrava) {\n    return (\n      <ListItem\n        leftAddon={\n          <Avatar color=\"#ff6b00\">\n            <img src={stravaLogo} alt=\"\" />\n          </Avatar>\n        }\n        leftAddonType=\"avatar\"\n        rightAddon={<OpenInNewFontIcon />}\n        rightAddonType=\"icon\"\n        secondaryText=\"to view Strava activity\"\n        onClick={openStravaAuthUrl}\n      >\n        Authorize Strava App\n      </ListItem>\n    );\n  }\n\n  return (\n    <SearchResultCardStravaActivityWithToken\n      activity={activity}\n      onHoverRoute={onHoverRoute}\n    />\n  );\n}\n\nfunction SearchResultCardStravaActivityWithToken({\n  activity: { activityId },\n  onHoverRoute,\n}: Props) {\n  const { result: activity, loading } = useAsync(getStravaActivity, [\n    activityId,\n  ]);\n  const [, setLocationState] = useLocationState();\n\n  if (!activity) {\n    if (loading) {\n      return (\n        <CircularProgress\n          id={`strava-activity-${activityId}`}\n          circleStyle={{ stroke: \"black\" }}\n        />\n      );\n    } else {\n      return (\n        <SimpleListItem\n          secondaryText=\"Make sure you can access the activity and it was recorded in Zwift.\"\n          threeLines\n        >\n          An error occurred\n        </SimpleListItem>\n      );\n    }\n  }\n\n  const handleClick = () => {\n    setLocationState({\n      world: activity.world,\n      stravaActivityId: activity.id,\n      query: \"\",\n      type: \"strava-activity\",\n    });\n  };\n\n  return (\n    <ListItem\n      onClick={handleClick}\n      secondaryText={\n        <>\n          <Distance distance={activity.distance} /> |{\" \"}\n          <Elevation elevation={activity.elevation} />\n          <br />\n          {activity.avgWatts && <>{Math.round(activity.avgWatts)}W | </>}\n          <Time seconds={activity.time} />\n        </>\n      }\n      threeLines\n      rightAddonType={activity.photoUrl ? \"large-media\" : undefined}\n      rightAddon={\n        activity.photoUrl ? (\n          <img src={activity.photoUrl} alt=\"\" width=\"100\" />\n        ) : undefined\n      }\n    >\n      {activity.name}\n    </ListItem>\n  );\n}\n","import { ListItem } from \"@react-md/list\";\nimport { routes, segments, World } from \"zwift-data\";\nimport { useLocationState } from \"../../hooks/useLocationState\";\nimport { useSettings } from \"../../hooks/useSettings\";\n\nexport interface Props {\n  world: World;\n}\n\nexport function ListItemWorld({ world }: Props) {\n  const [, setLocationState] = useLocationState();\n\n  const [settings] = useSettings();\n  const secondaryText = `${\n    routes\n      .filter((r) => r.sports.includes(settings.sport))\n      .filter((r) => r.world === world.slug).length\n  } routes | ${segments.filter((s) => s.world === world.slug).length} segments`;\n\n  const handleClick = () => {\n    setLocationState({\n      world,\n      query: \"\",\n      type: \"default\",\n    });\n  };\n\n  return (\n    <ListItem secondaryText={secondaryText} onClick={handleClick}>\n      {world.name}\n    </ListItem>\n  );\n}\n","import { Divider } from \"@react-md/divider\";\nimport { ListSubheader, SimpleListItem } from \"@react-md/list\";\nimport React, { Fragment } from \"react\";\nimport { useLocationState } from \"../../hooks/useLocationState\";\nimport { useSettings } from \"../../hooks/useSettings\";\nimport { search, SearchResult, searchResultTypes } from \"../../services/search\";\nimport { ListItemRoute } from \"./ListItemRoute\";\nimport { ListItemStravaActivity } from \"./ListItemStravaActivity\";\nimport { ListItemWorld } from \"./ListItemWorld\";\n\ninterface Props {\n  onHoverRoute: (route?: string) => void;\n}\n\nexport function SearchResultList({ onHoverRoute }: Props) {\n  const [locationState] = useLocationState();\n  const [settings] = useSettings();\n  const searchResults = search(locationState.query, settings.sport);\n\n  if (searchResults.length === 0) {\n    return <SimpleListItem>No worlds or routes found</SimpleListItem>;\n  }\n\n  return (\n    <>\n      {searchResults.map((searchResult, i) => (\n        <Fragment key={searchResult.data.slug}>\n          {searchResults[i - 1]?.type !== searchResult.type && (\n            <>\n              {searchResults[i - 1] && <Divider />}\n              <ListSubheader>\n                {searchResultTypes[searchResult.type].title}\n              </ListSubheader>\n            </>\n          )}\n          <SearchResultCard\n            searchResult={searchResult}\n            onHoverRoute={onHoverRoute}\n          />\n        </Fragment>\n      ))}\n    </>\n  );\n}\n\ninterface SearchResultCardProps {\n  searchResult: SearchResult;\n  onHoverRoute: (route?: string) => void;\n}\n\nfunction SearchResultCard({\n  searchResult,\n  onHoverRoute,\n}: SearchResultCardProps) {\n  switch (searchResult.type) {\n    case \"world\":\n      return <ListItemWorld world={searchResult.data} />;\n    case \"route\":\n      return (\n        <ListItemRoute\n          route={searchResult.data}\n          onHoverRoute={onHoverRoute}\n          showWorldName={true}\n        />\n      );\n    case \"strava-activity\":\n      return (\n        <ListItemStravaActivity\n          activity={searchResult.data}\n          onHoverRoute={onHoverRoute}\n        />\n      );\n    default:\n      return null;\n  }\n}\n","import { Button } from \"@react-md/button\";\nimport { TextIconSpacing } from \"@react-md/icon\";\nimport { List, ListItem, ListSubheader, SimpleListItem } from \"@react-md/list\";\nimport { ListFontIcon } from \"@react-md/material-icons\";\nimport { CircularProgress } from \"@react-md/progress\";\nimport React from \"react\";\nimport { useAsync } from \"react-async-hook\";\nimport { useLocationState } from \"../../hooks/useLocationState\";\nimport { getLoggedInAthleteActivities } from \"../../services/strava/api\";\nimport { SummaryActivity } from \"../../services/strava/types\";\nimport { getWorld } from \"../../util/strava\";\nimport { Distance } from \"../Distance\";\nimport { Elevation } from \"../Elevation\";\nimport { Time } from \"../Time\";\n\nconst PER_PAGE = 30;\n\nconst monthInSeconds = 30 * 24 * 60 * 60;\nconst now = new Date().getTime() / 1_000;\n\nexport function StravaActivitiesList() {\n  const [locationState, setLocationState] = useLocationState();\n\n  const { result: activities } = useAsync(async () => {\n    const result: SummaryActivity[] = [];\n\n    let page = 1;\n    let newResults = [];\n    do {\n      newResults = await getLoggedInAthleteActivities({\n        after: now - monthInSeconds,\n        per_page: PER_PAGE,\n        page,\n      });\n      result.push(...newResults);\n      ++page;\n    } while (newResults.length === PER_PAGE);\n    return result;\n  }, []);\n\n  return (\n    <List>\n      <SimpleListItem>\n        <Button\n          themeType=\"outline\"\n          onClick={() => {\n            setLocationState({\n              world: locationState.world,\n              query: \"\",\n              type: \"default\",\n            });\n          }}\n        >\n          <TextIconSpacing icon={<ListFontIcon />}>Route List</TextIconSpacing>\n        </Button>\n      </SimpleListItem>\n\n      <ListSubheader>Recent Strava Activities</ListSubheader>\n\n      {activities === undefined && (\n        <SimpleListItem>\n          <CircularProgress\n            id=\"strava-activities\"\n            circleStyle={{ stroke: \"black\" }}\n          />\n        </SimpleListItem>\n      )}\n\n      {activities !== undefined &&\n        [...activities]\n        .sort((a, b) => -a.start_date.localeCompare(b.start_date))\n          .map((activity) => {\n            const world = getWorld(activity);\n            return { world, activity };\n          })\n          .filter(({ world }) => world !== undefined)\n          .map(({ world, activity }) => (\n            <ListItem\n              key={activity.id}\n              onClick={() => {\n                setLocationState({\n                  world: world!,\n                  query: \"\",\n                  type: \"strava-activity\",\n                  stravaActivityId: activity.id.toString(),\n                });\n              }}\n              secondaryText={\n                <>\n                  <Distance distance={activity.distance / 1_000} /> |{\" \"}\n                  <Elevation elevation={activity.total_elevation_gain} />\n                  <br />\n                  {activity.average_watts && (\n                    <>{Math.round(activity.average_watts)}W | </>\n                  )}\n                  <Time seconds={activity.moving_time} />\n                </>\n              }\n              threeLines\n            >\n              {activity.name}\n            </ListItem>\n          ))}\n    </List>\n  );\n}\n","import { Divider } from \"@react-md/divider\";\nimport { List, SimpleListItem } from \"@react-md/list\";\nimport {\n  KeyboardArrowDownFontIcon,\n  KeyboardArrowUpFontIcon,\n} from \"@react-md/material-icons\";\nimport c from \"classnames\";\nimport React, { useRef, useState } from \"react\";\nimport { useLocationState } from \"../../hooks/useLocationState\";\nimport { Details } from \"./Details\";\nimport styles from \"./index.module.scss\";\nimport { MenuButton } from \"./MenuButton\";\nimport { RouteList } from \"./RouteList\";\nimport { SearchInput } from \"./SearchInput\";\nimport { SearchResultList } from \"./SearchResultList\";\nimport { StravaActivitiesList } from \"./StravaActivitiesList\";\n\ninterface Props {\n  onMouseHoverDistanceChange: (distance: number | undefined) => void;\n  onHoverRoute: (previewRoute: string | undefined) => void;\n}\n\nexport function Sidebar({ onMouseHoverDistanceChange, onHoverRoute }: Props) {\n  const [bottomSheetOpen, setBottomSheetOpen] = useState(false);\n  const [locationState, setLocationState] = useLocationState();\n  const containerRef = useRef<HTMLDivElement | null>(null);\n\n  return (\n    <>\n      <div\n        className={c(styles.Container, {\n          [styles.BottomSheetOpen]: bottomSheetOpen,\n        })}\n        ref={containerRef}\n      >\n        <button\n          className={styles.DragHandle}\n          onClick={() => setBottomSheetOpen(false)}\n        >\n          <KeyboardArrowDownFontIcon />\n        </button>\n        <List className={styles.SearchBox}>\n          <SimpleListItem>\n            <SearchInput />\n          </SimpleListItem>\n          <Divider className={styles.NoGapDivider} />\n        </List>\n        <div className={styles.Content}>\n          {locationState.type === \"route\" ||\n          locationState.type === \"strava-activity\" ? (\n            <Details\n              onMouseHoverDistanceChange={onMouseHoverDistanceChange}\n              backButtonText={\n                locationState.query === \"\"\n                  ? \"Route List\"\n                  : \"Search Results\"\n              }\n              onBackButtonClick={() => {\n                setLocationState({\n                  world: locationState.world,\n                  query: locationState.query,\n                  type: \"default\",\n                });\n              }}\n            />\n          ) : locationState.type === \"strava-activities\" ? (\n            <StravaActivitiesList />\n          ) : (\n            <List>\n              {locationState.query === \"\" ? (\n                <RouteList onHoverRoute={onHoverRoute} />\n              ) : (\n                <SearchResultList onHoverRoute={onHoverRoute} />\n              )}\n            </List>\n          )}\n        </div>\n        <List className={styles.BottomMenu}>\n          <Divider className={styles.NoGapDivider} />\n\n          <MenuButton onBottomSheetClose={() => setBottomSheetOpen(false)} />\n        </List>\n      </div>\n\n      <button\n        className={c(styles.DragHandle, styles.DragHandleBottom, {\n          [styles.BottomSheetOpen]: bottomSheetOpen,\n        })}\n        onClick={() => setBottomSheetOpen(true)}\n      >\n        <KeyboardArrowUpFontIcon />\n      </button>\n    </>\n  );\n}\n","import React, { useState } from \"react\";\nimport styles from \"./App.module.scss\";\nimport RouteMap from \"./components/RouteMap\";\nimport { Sidebar } from \"./components/Sidebar\";\nimport { usePing } from \"./hooks/usePing\";\nimport { useStravaTokenListener } from \"./hooks/useStravaTokenListener\";\n\nexport default function App() {\n  usePing();\n  useStravaTokenListener();\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [mouseHoverDistance, setMouseHoverDistance] =\n    useState<number | undefined>(undefined);\n\n  const [previewRoute, setPreviewRoute] = useState<string | undefined>();\n\n  return (\n    <div className={styles.Wrapper}>\n      <Sidebar\n        onMouseHoverDistanceChange={setMouseHoverDistance}\n        onHoverRoute={setPreviewRoute}\n      />\n      <RouteMap\n        mouseHoverDistance={mouseHoverDistance}\n        previewRoute={previewRoute}\n      />\n    </div>\n  );\n}\n","import axios from \"axios\";\nimport { useEffect } from \"react\";\n\nexport function usePing() {\n  useEffect(() => {\n    try {\n      axios.get(\n        `${\n          process.env.NODE_ENV === \"production\"\n            ? \"https://api.zwiftmap.com\"\n            : \"http://localhost:3001\"\n        }/ping`\n      );\n    } catch {}\n  }, []);\n}\n","import { useCallback, useEffect } from \"react\";\nimport { writeStravaToken } from \"../services/strava/token\";\n\nexport function useStravaTokenListener(): void {\n  const updateStravaToken = useCallback(() => {\n    const params = new URLSearchParams(window.location.search);\n\n    if (params.has(\"strava-auth\")) {\n      writeStravaToken(JSON.parse(params.get(\"strava-auth\")!));\n\n      params.delete(\"strava-auth\");\n      window.history.replaceState(\n        undefined,\n        \"\",\n        `${window.location.origin}${\n          window.location.pathname\n        }?${params.toString()}`\n      );\n    }\n  }, []);\n\n  useEffect(() => {\n    updateStravaToken();\n  }, [updateStravaToken]);\n\n  useEffect(() => {\n    window.addEventListener(\"popstate\", updateStravaToken);\n    return () => window.removeEventListener(\"popstate\", updateStravaToken);\n  }, [updateStravaToken]);\n}\n","import * as Sentry from \"@sentry/react\";\nimport { Integrations } from \"@sentry/tracing\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.scss\";\n\nSentry.init({\n  enabled: (process.env.REACT_APP_SENTRY_DSN ?? \"\").length > 0,\n  dsn: process.env.REACT_APP_SENTRY_DSN,\n  integrations: [new Integrations.BrowserTracing()],\n  tracesSampleRate: 1.0,\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"app\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Sidebar_Container__3o0kK\",\"BottomSheetOpen\":\"Sidebar_BottomSheetOpen__22Bgs\",\"SearchBox\":\"Sidebar_SearchBox__3wlGX\",\"Content\":\"Sidebar_Content__15Hau\",\"BottomMenu\":\"Sidebar_BottomMenu__2Obmz\",\"NoGapDivider\":\"Sidebar_NoGapDivider__20DmD\",\"DragHandle\":\"Sidebar_DragHandle__l0Son\",\"DragHandleBottom\":\"Sidebar_DragHandleBottom__1sHmD\"};"],"sourceRoot":""}